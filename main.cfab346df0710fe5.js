"use strict";(self.webpackChunkfirebase_todolist=self.webpackChunkfirebase_todolist||[]).push([[179],{566:()=>{function Ne(t){return"function"==typeof t}function _l(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const bh=_l(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function pa(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Bn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ne(r))try{r()}catch(s){e=s instanceof bh?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Ix(s)}catch(o){e=e??[],o instanceof bh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new bh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ix(e);else{if(e instanceof Bn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&pa(n,e)}remove(e){const{_finalizers:n}=this;n&&pa(n,e),e instanceof Bn&&e._removeParent(this)}}Bn.EMPTY=(()=>{const t=new Bn;return t.closed=!0,t})();const vx=Bn.EMPTY;function wx(t){return t instanceof Bn||t&&"closed"in t&&Ne(t.remove)&&Ne(t.add)&&Ne(t.unsubscribe)}function Ix(t){Ne(t)?t():t.unsubscribe()}const $s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Dh={setTimeout(t,e,...n){const{delegate:r}=Dh;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Dh;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ex(t){Dh.setTimeout(()=>{const{onUnhandledError:e}=$s;if(!e)throw t;e(t)})}function Cx(){}const iq=S_("C",void 0,void 0);function S_(t,e,n){return{kind:t,value:e,error:n}}let js=null;function Th(t){if($s.useDeprecatedSynchronousErrorHandling){const e=!js;if(e&&(js={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=js;if(js=null,n)throw r}}else t()}class A_ extends Bn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wx(e)&&e.add(this)):this.destination=dq}static create(e,n,r){return new yl(e,n,r)}next(e){this.isStopped?M_(function oq(t){return S_("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?M_(function sq(t){return S_("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?M_(iq,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const uq=Function.prototype.bind;function x_(t,e){return uq.call(t,e)}class lq{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Sh(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Sh(r)}else Sh(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Sh(n)}}}class yl extends A_{constructor(e,n,r){let i;if(super(),Ne(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&$s.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&x_(e.next,s),error:e.error&&x_(e.error,s),complete:e.complete&&x_(e.complete,s)}):i=e}this.destination=new lq(i)}}function Sh(t){$s.useDeprecatedSynchronousErrorHandling?function aq(t){$s.useDeprecatedSynchronousErrorHandling&&js&&(js.errorThrown=!0,js.error=t)}(t):Ex(t)}function M_(t,e){const{onStoppedNotification:n}=$s;n&&Dh.setTimeout(()=>n(t,e))}const dq={closed:!0,next:Cx,error:function cq(t){throw t},complete:Cx},N_="function"==typeof Symbol&&Symbol.observable||"@@observable";function Hs(t){return t}function bx(t){return 0===t.length?Hs:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let qe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function pq(t){return t&&t instanceof A_||function fq(t){return t&&Ne(t.next)&&Ne(t.error)&&Ne(t.complete)}(t)&&wx(t)}(n)?n:new yl(n,r,i);return Th(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Dx(r))((i,s)=>{const o=new yl({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[N_](){return this}pipe(...n){return bx(n)(this)}toPromise(n){return new(n=Dx(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Dx(t){var e;return null!==(e=t??$s.Promise)&&void 0!==e?e:Promise}const gq=_l(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Fr=(()=>{class t extends qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Tx(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new gq}next(n){Th(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Th(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Th(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?vx:(this.currentObservers=null,s.push(n),new Bn(()=>{this.currentObservers=null,pa(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new qe;return n.source=this,n}}return t.create=(e,n)=>new Tx(e,n),t})();class Tx extends Fr{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:vx}}function Sx(t){return Ne(t?.lift)}function bt(t){return e=>{if(Sx(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function gt(t,e,n,r,i){return new mq(t,e,n,r,i)}class mq extends A_{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function he(t,e){return bt((n,r)=>{let i=0;n.subscribe(gt(r,s=>{r.next(t.call(e,s,i++))}))})}function xx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Gs(t){return this instanceof Gs?(this.v=t,this):new Gs(t)}function vq(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof Gs?Promise.resolve(h.value.v).then(l,c):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function l(h){a("next",h)}function c(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function wq(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Nx(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}const Rx=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function kx(t){return Ne(t?.then)}function Px(t){return Ne(t[N_])}function Ox(t){return Symbol.asyncIterator&&Ne(t?.[Symbol.asyncIterator])}function Fx(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Lx=function Eq(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Vx(t){return Ne(t?.[Lx])}function Ux(t){return vq(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Gs(n.read());if(i)return yield Gs(void 0);yield yield Gs(r)}}finally{n.releaseLock()}})}function Bx(t){return Ne(t?.getReader)}function mr(t){if(t instanceof qe)return t;if(null!=t){if(Px(t))return function Cq(t){return new qe(e=>{const n=t[N_]();if(Ne(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Rx(t))return function bq(t){return new qe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(kx(t))return function Dq(t){return new qe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ex)})}(t);if(Ox(t))return $x(t);if(Vx(t))return function Tq(t){return new qe(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Bx(t))return function Sq(t){return $x(Ux(t))}(t)}throw Fx(t)}function $x(t){return new qe(e=>{(function Aq(t,e){var n,r,i,s;return function _q(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=wq(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function li(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Lt(t,e,n=1/0){return Ne(e)?Lt((r,i)=>he((s,o)=>e(r,s,i,o))(mr(t(r,i))),n):("number"==typeof e&&(n=e),bt((r,i)=>function xq(t,e,n,r,i,s,o,a){const u=[];let l=0,c=0,d=!1;const h=()=>{d&&!u.length&&!l&&e.complete()},f=g=>l<r?p(g):u.push(g),p=g=>{s&&e.next(g),l++;let _=!1;mr(n(g,c++)).subscribe(gt(e,I=>{i?.(I),s?f(I):e.next(I)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;u.length&&l<r;){const I=u.shift();o?li(e,o,()=>p(I)):p(I)}h()}catch(I){e.error(I)}}))};return t.subscribe(gt(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function ga(t=1/0){return Lt(Hs,t)}const ci=new qe(t=>t.complete());function k_(t){return t[t.length-1]}function jx(t){return Ne(k_(t))?t.pop():void 0}function vl(t){return function Nq(t){return t&&Ne(t.schedule)}(k_(t))?t.pop():void 0}function Ah(t,e=0){return bt((n,r)=>{n.subscribe(gt(r,i=>li(r,t,()=>r.next(i),e),()=>li(r,t,()=>r.complete(),e),i=>li(r,t,()=>r.error(i),e)))})}function xh(t,e=0){return bt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Hx(t,e){if(!t)throw new Error("Iterable cannot be null");return new qe(n=>{li(n,e,()=>{const r=t[Symbol.asyncIterator]();li(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function at(t,e){return e?function Vq(t,e){if(null!=t){if(Px(t))return function kq(t,e){return mr(t).pipe(xh(e),Ah(e))}(t,e);if(Rx(t))return function Oq(t,e){return new qe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(kx(t))return function Pq(t,e){return mr(t).pipe(xh(e),Ah(e))}(t,e);if(Ox(t))return Hx(t,e);if(Vx(t))return function Fq(t,e){return new qe(n=>{let r;return li(n,e,()=>{r=t[Lx](),li(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Ne(r?.return)&&r.return()})}(t,e);if(Bx(t))return function Lq(t,e){return Hx(Ux(t),e)}(t,e)}throw Fx(t)}(t,e):mr(t)}function P_(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new yl({next:()=>{r.unsubscribe(),t()}});return e(...n).subscribe(r)}function Se(t){for(let e in t)if(t[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function O_(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ae(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ae).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function F_(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const $q=Se({__forward_ref__:Se});function Re(t){return t.__forward_ref__=Re,t.toString=function(){return Ae(this())},t}function q(t){return L_(t)?t():t}function L_(t){return"function"==typeof t&&t.hasOwnProperty($q)&&t.__forward_ref__===Re}class A extends Error{constructor(e,n){super(function Mh(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function X(t){return"string"==typeof t?t:null==t?"":String(t)}function Nh(t,e){throw new A(-201,!1)}function jn(t,e){null==t&&function Ie(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function te(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function cn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Rh(t){return Gx(t,kh)||Gx(t,qx)}function Gx(t,e){return t.hasOwnProperty(e)?t[e]:null}function Wx(t){return t&&(t.hasOwnProperty(V_)||t.hasOwnProperty(Yq))?t[V_]:null}const kh=Se({\u0275prov:Se}),V_=Se({\u0275inj:Se}),qx=Se({ngInjectableDef:Se}),Yq=Se({ngInjectorDef:Se});var H=(()=>((H=H||{})[H.Default=0]="Default",H[H.Host=1]="Host",H[H.Self=2]="Self",H[H.SkipSelf=4]="SkipSelf",H[H.Optional=8]="Optional",H))();let U_;function rr(t){const e=U_;return U_=t,e}function zx(t,e,n){const r=Rh(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&H.Optional?null:void 0!==e?e:void Nh(Ae(t))}function zi(t){return{toString:t}.toString()}var _r=(()=>((_r=_r||{})[_r.OnPush=0]="OnPush",_r[_r.Default=1]="Default",_r))(),Lr=(()=>{return(t=Lr||(Lr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Lr;var t})();const xe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ma={},we=[],Ph=Se({\u0275cmp:Se}),B_=Se({\u0275dir:Se}),$_=Se({\u0275pipe:Se}),Kx=Se({\u0275mod:Se}),hi=Se({\u0275fac:Se}),wl=Se({__NG_ELEMENT_ID__:Se});let Xq=0;function Oh(t){return zi(()=>{const n=!0===t.standalone,r={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===_r.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||we,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Lr.Emulated,id:"c"+Xq++,styles:t.styles||we,_:null,setInput:null,schemas:t.schemas||null,tView:null},s=t.dependencies,o=t.features;return i.inputs=Zx(t.inputs,r),i.outputs=Zx(t.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Qx).filter(Yx):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(hn).filter(Yx):null,i})}function Qx(t){return Ce(t)||dn(t)}function Yx(t){return null!==t}function Tn(t){return zi(()=>({type:t.type,bootstrap:t.bootstrap||we,declarations:t.declarations||we,imports:t.imports||we,exports:t.exports||we,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Zx(t,e){if(null==t)return ma;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const z=Oh;function Sn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ce(t){return t[Ph]||null}function dn(t){return t[B_]||null}function hn(t){return t[$_]||null}function Hn(t,e){const n=t[Kx]||null;if(!n&&!0===e)throw new Error(`Type ${Ae(t)} does not have '\u0275mod' property.`);return n}function An(t){return Array.isArray(t)&&"object"==typeof t[1]}function vr(t){return Array.isArray(t)&&!0===t[1]}function G_(t){return 0!=(8&t.flags)}function Uh(t){return 2==(2&t.flags)}function Bh(t){return 1==(1&t.flags)}function wr(t){return null!==t.template}function iz(t){return 0!=(256&t[2])}function Qs(t,e){return t.hasOwnProperty(hi)?t[hi]:null}class az{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function sr(){return eM}function eM(t){return t.type.prototype.ngOnChanges&&(t.setInput=lz),uz}function uz(){const t=nM(this),e=t?.current;if(e){const n=t.previous;if(n===ma)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function lz(t,e,n,r){const i=nM(t)||function cz(t,e){return t[tM]=e}(t,{previous:ma,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new az(u&&u.currentValue,e,o===ma),t[r]=e}sr.ngInherit=!0;const tM="__ngSimpleChanges__";function nM(t){return t[tM]||null}function ut(t){for(;Array.isArray(t);)t=t[0];return t}function $h(t,e){return ut(e[t])}function ar(t,e){return ut(e[t.index])}function Q_(t,e){return t.data[e]}function Wn(t,e){const n=e[t];return An(n)?n:n[0]}function jh(t){return 64==(64&t[2])}function Ki(t,e){return null==e?null:t[e]}function iM(t){t[18]=0}function Y_(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Q={lFrame:fM(null),bindingsEnabled:!0};function oM(){return Q.bindingsEnabled}function C(){return Q.lFrame.lView}function pe(){return Q.lFrame.tView}function mt(){let t=aM();for(;null!==t&&64===t.type;)t=t.parent;return t}function aM(){return Q.lFrame.currentTNode}function Vr(t,e){const n=Q.lFrame;n.currentTNode=t,n.isParent=e}function Z_(){return Q.lFrame.isParent}function Ca(){return Q.lFrame.bindingIndex++}function Tz(t,e){const n=Q.lFrame;n.bindingIndex=n.bindingRootIndex=t,J_(e)}function J_(t){Q.lFrame.currentDirectiveIndex=t}function ty(t){Q.lFrame.currentQueryIndex=t}function Az(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function dM(t,e,n){if(n&H.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&H.Host||(i=Az(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Q.lFrame=hM();return r.currentTNode=e,r.lView=t,!0}function ny(t){const e=hM(),n=t[1];Q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function hM(){const t=Q.lFrame,e=null===t?null:t.child;return null===e?fM(t):e}function fM(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function pM(){const t=Q.lFrame;return Q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const gM=pM;function ry(){const t=pM();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pn(){return Q.lFrame.selectedIndex}function Qi(t){Q.lFrame.selectedIndex=t}function Gh(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:c}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),u&&(t.viewHooks||(t.viewHooks=[])).push(-n,u),l&&((t.viewHooks||(t.viewHooks=[])).push(n,l),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,l)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function Wh(t,e,n){mM(t,e,3,n)}function qh(t,e,n,r){(3&t[2])===n&&mM(t,e,n,r)}function iy(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function mM(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[18]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[18]+=65536),(a<s||-1==s)&&(Lz(t,n,e,u),t[18]=(4294901760&t[18])+u+2),u++}function Lz(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Dl{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function zh(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];yM(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function _M(t){return 3===t||4===t||6===t}function yM(t){return 64===t.charCodeAt(0)}function Kh(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||vM(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function vM(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function wM(t){return-1!==t}function ba(t){return 32767&t}function Da(t,e){let n=function jz(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let oy=!0;function Qh(t){const e=oy;return oy=t,e}let Hz=0;const Ur={};function Sl(t,e){const n=uy(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,ay(r.data,t),ay(e,null),ay(r.blueprint,null));const i=Yh(t,e),s=t.injectorIndex;if(wM(i)){const o=ba(i),a=Da(i,e),u=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function ay(t,e){t.push(0,0,0,0,0,0,0,0,e)}function uy(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Yh(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=xM(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Zh(t,e,n){!function Gz(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(wl)&&(r=n[wl]),null==r&&(r=n[wl]=Hz++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function CM(t,e,n){if(n&H.Optional)return t;Nh()}function bM(t,e,n,r){if(n&H.Optional&&void 0===r&&(r=null),0==(n&(H.Self|H.Host))){const i=t[9],s=rr(void 0);try{return i?i.get(e,r,n&H.Optional):zx(e,r,n&H.Optional)}finally{rr(s)}}return CM(r,0,n)}function DM(t,e,n,r=H.Default,i){if(null!==t){if(1024&e[2]){const o=function Qz(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=TM(s,o,n,r|H.Self,Ur);if(a!==Ur)return a;let u=s.parent;if(!u){const l=o[21];if(l){const c=l.get(n,Ur,r);if(c!==Ur)return c}u=xM(o),o=o[15]}s=u}return i}(t,e,n,r,Ur);if(o!==Ur)return o}const s=TM(t,e,n,r,Ur);if(s!==Ur)return s}return bM(e,n,r,i)}function TM(t,e,n,r,i){const s=function zz(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(wl)?t[wl]:void 0;return"number"==typeof e?e>=0?255&e:Kz:e}(n);if("function"==typeof s){if(!dM(e,t,r))return r&H.Host?CM(i,0,r):bM(e,n,r,i);try{const o=s(r);if(null!=o||r&H.Optional)return o;Nh()}finally{gM()}}else if("number"==typeof s){let o=null,a=uy(t,e),u=-1,l=r&H.Host?e[16][6]:null;for((-1===a||r&H.SkipSelf)&&(u=-1===a?Yh(t,e):e[a+8],-1!==u&&AM(r,!1)?(o=e[1],a=ba(u),e=Da(u,e)):a=-1);-1!==a;){const c=e[1];if(SM(s,a,c.data)){const d=qz(a,e,n,o,r,l);if(d!==Ur)return d}u=e[a+8],-1!==u&&AM(r,e[1].data[a+8]===l)&&SM(s,a,e)?(o=c,a=ba(u),e=Da(u,e)):a=-1}}return i}function qz(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],c=function Xh(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,h=i?a+c:t.directiveEnd;for(let f=r?a:a+c;f<h;f++){const p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=o[u];if(f&&wr(f)&&f.type===n)return u}return null}(a,o,n,null==r?Uh(a)&&oy:r!=o&&0!=(3&a.type),i&H.Host&&s===a);return null!==c?Al(e,o,c,a):Ur}function Al(t,e,n,r){let i=t[n];const s=e.data;if(function Vz(t){return t instanceof Dl}(i)){const o=i;o.resolving&&function jq(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new A(-200,`Circular dependency in DI detected for ${t}${n}`)}(function ve(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():X(t)}(s[n]));const a=Qh(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?rr(o.injectImpl):null;dM(t,r,H.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function Fz(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=eM(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&rr(u),Qh(a),o.resolving=!1,gM()}}return i}function SM(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function AM(t,e){return!(t&H.Self||t&H.Host&&e)}class Ta{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return DM(this._tNode,this._lView,e,r,n)}}function Kz(){return new Ta(mt(),C())}function ly(t){return L_(t)?()=>{const e=ly(q(t));return e&&e()}:Qs(t)}function xM(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}const Aa="__parameters__";function Ma(t,e,n){return zi(()=>{const r=function cy(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,c){const d=u.hasOwnProperty(Aa)?u[Aa]:Object.defineProperty(u,Aa,{value:[]})[Aa];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class U{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function gi(t,e){t.forEach(n=>Array.isArray(n)?gi(n,e):e(n))}function NM(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Jh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function zn(t,e,n){let r=Na(t,e);return r>=0?t[1|r]=n:(r=~r,function Jz(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function hy(t,e){const n=Na(t,e);if(n>=0)return t[1|n]}function Na(t,e){return function PM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const kl={},py="__NG_DI_FLAG__",tf="ngTempTokenPath",a3=/\n/gm,OM="__source";let Pl;function Ra(t){const e=Pl;return Pl=t,e}function l3(t,e=H.Default){if(void 0===Pl)throw new A(-203,!1);return null===Pl?zx(t,void 0,e):Pl.get(t,e&H.Optional?null:void 0,e)}function B(t,e=H.Default){return(function Zq(){return U_}()||l3)(q(t),e)}function nt(t,e=H.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),B(t,e)}function gy(t){const e=[];for(let n=0;n<t.length;n++){const r=q(t[n]);if(Array.isArray(r)){if(0===r.length)throw new A(900,!1);let i,s=H.Default;for(let o=0;o<r.length;o++){const a=r[o],u=c3(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(B(i,s))}else e.push(B(r))}return e}function Ol(t,e){return t[py]=e,t.prototype[py]=e,t}function c3(t){return t[py]}const lt=Ol(Ma("Optional"),8),Fl=Ol(Ma("SkipSelf"),4);let _y;const Dy=new U("ENVIRONMENT_INITIALIZER"),rN=new U("INJECTOR",-1),iN=new U("INJECTOR_DEF_TYPES");class sN{get(e,n=kl){if(n===kl){const r=new Error(`NullInjectorError: No provider for ${Ae(e)}!`);throw r.name="NullInjectorError",r}return n}}function K3(...t){return{\u0275providers:oN(0,t)}}function oN(t,...e){const n=[],r=new Set;let i;return gi(e,s=>{const o=s;Ty(o,n,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&aN(i,n),n}function aN(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];gi(i,s=>{e.push(s)})}}function Ty(t,e,n,r){if(!(t=q(t)))return!1;let i=null,s=Wx(t);const o=!s&&Ce(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Wx(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)Ty(l,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{gi(s.imports,c=>{Ty(c,e,n,r)&&(l||(l=[]),l.push(c))})}finally{}void 0!==l&&aN(l,e)}if(!a){const l=Qs(i)||(()=>new i);e.push({provide:i,useFactory:l,deps:we},{provide:iN,useValue:i,multi:!0},{provide:Dy,useValue:()=>B(i),multi:!0})}const u=s.providers;null==u||a||gi(u,c=>{e.push(c)})}}return i!==t&&void 0!==t.providers}const Q3=Se({provide:String,useValue:Se});function Sy(t){return null!==t&&"object"==typeof t&&Q3 in t}function Ys(t){return"function"==typeof t}const Ay=new U("Set Injector scope."),cf={},Z3={};let xy;function df(){return void 0===xy&&(xy=new sN),xy}class Xi{}class cN extends Xi{constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ny(e,o=>this.processProvider(o)),this.records.set(rN,Oa(void 0,this)),i.has("environment")&&this.records.set(Xi,Oa(void 0,this));const s=this.records.get(Ay);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(iN.multi,we,H.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=Ra(this),r=rr(void 0);try{return e()}finally{Ra(n),rr(r)}}get(e,n=kl,r=H.Default){this.assertNotDestroyed();const i=Ra(this),s=rr(void 0);try{if(!(r&H.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function n4(t){return"function"==typeof t||"object"==typeof t&&t instanceof U}(e)&&Rh(e);a=u&&this.injectableDefInScope(u)?Oa(My(e),cf):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&H.Self?df():this.parent).get(e,n=r&H.Optional&&n===kl?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[tf]=o[tf]||[]).unshift(Ae(e)),i)throw o;return function d3(t,e,n,r){const i=t[tf];throw e[OM]&&i.unshift(e[OM]),t.message=function h3(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Ae(e);if(Array.isArray(e))i=e.map(Ae).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ae(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(a3,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[tf]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{rr(s),Ra(i)}}resolveInjectorInitializers(){const e=Ra(this),n=rr(void 0);try{const r=this.get(Dy.multi,we,H.Self);for(const i of r)i()}finally{Ra(e),rr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ae(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new A(205,!1)}processProvider(e){let n=Ys(e=q(e))?e:q(e&&e.provide);const r=function J3(t){return Sy(t)?Oa(void 0,t.useValue):Oa(dN(t),cf)}(e);if(Ys(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Oa(void 0,cf,!0),i.factory=()=>gy(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===cf&&(n.value=Z3,n.value=n.factory()),"object"==typeof n.value&&n.value&&function t4(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=q(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function My(t){const e=Rh(t),n=null!==e?e.factory:Qs(t);if(null!==n)return n;if(t instanceof U)throw new A(204,!1);if(t instanceof Function)return function X3(t){const e=t.length;if(e>0)throw function Rl(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new A(204,!1);const n=function Kq(t){const e=t&&(t[kh]||t[qx]);if(e){const n=function Qq(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new A(204,!1)}function dN(t,e,n){let r;if(Ys(t)){const i=q(t);return Qs(i)||My(i)}if(Sy(t))r=()=>q(t.useValue);else if(function lN(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...gy(t.deps||[]));else if(function uN(t){return!(!t||!t.useExisting)}(t))r=()=>B(q(t.useExisting));else{const i=q(t&&(t.useClass||t.provide));if(!function e4(t){return!!t.deps}(t))return Qs(i)||My(i);r=()=>new i(...gy(t.deps))}return r}function Oa(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function r4(t){return!!t.\u0275providers}function Ny(t,e){for(const n of t)Array.isArray(n)?Ny(n,e):r4(n)?Ny(n.\u0275providers,e):e(n)}class hN{}class o4{resolveComponentFactory(e){throw function s4(t){const e=Error(`No component factory found for ${Ae(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let jl=(()=>{class t{}return t.NULL=new o4,t})();function a4(){return Fa(mt(),C())}function Fa(t,e){return new Kn(ar(t,e))}let Kn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=a4,t})();class pN{}let mi=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function l4(){const t=C(),n=Wn(mt().index,t);return(An(n)?n:t)[11]}(),t})(),c4=(()=>{class t{}return t.\u0275prov=te({token:t,providedIn:"root",factory:()=>null}),t})();class La{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const gN=new La("14.2.1"),Ry={};function Ly(t){return t.ngOriginalError}class Va{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ly(e);for(;n&&Ly(n);)n=Ly(n);return n||null}}const Vy=new Map;let E4=0;const By="__ngContext__";function en(t,e){An(e)?(t[By]=e[20],function b4(t){Vy.set(t[20],t)}(e)):t[By]=e}function Hl(t){const e=t[By];return"number"==typeof e?function IN(t){return Vy.get(t)||null}(e):e||null}function $y(t){const e=Hl(t);return e?An(e)?e:e.lView:null}function _i(t){return t instanceof Function?t():t}var xn=(()=>((xn=xn||{})[xn.Important=1]="Important",xn[xn.DashCase=2]="DashCase",xn))();function Hy(t,e){return undefined(t,e)}function Gl(t){const e=t[3];return vr(e)?e[3]:e}function Gy(t){return AN(t[13])}function Wy(t){return AN(t[4])}function AN(t){for(;null!==t&&!vr(t);)t=t[4];return t}function Ba(t,e,n,r,i){if(null!=r){let s,o=!1;vr(r)?s=r:An(r)&&(o=!0,r=r[0]);const a=ut(r);0===t&&null!==n?null==i?PN(e,n,a):Zs(e,n,a,i||null,!0):1===t&&null!==n?Zs(e,n,a,i||null,!0):2===t?function $N(t,e,n){const r=hf(t,e);r&&function Z4(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function eK(t,e,n,r,i){const s=n[7];s!==ut(n)&&Ba(e,t,r,s,i);for(let a=10;a<n.length;a++){const u=n[a];Wl(u[1],u,t,e,r,s)}}(e,t,s,n,i)}}function zy(t,e,n){return t.createElement(e,n)}function MN(t,e){const n=t[9],r=n.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Y_(i,-1)),n.splice(r,1)}function Ky(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&MN(i,r),e>0&&(t[n-1][4]=r[4]);const s=Jh(t,10+e);!function H4(t,e){Wl(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function NN(t,e){if(!(128&e[2])){const n=e[11];n.destroyNode&&Wl(t,e,n,3,null,null),function q4(t){let e=t[13];if(!e)return Qy(t[1],t);for(;e;){let n=null;if(An(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)An(e)&&Qy(e[1],e),e=e[3];null===e&&(e=t),An(e)&&Qy(e[1],e),n=e&&e[4]}e=n}}(e)}}function Qy(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function Y4(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Dl)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];try{u.call(a)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function Q4(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+1],a="function"==typeof o?o(e):ut(e[o]),u=r[i=n[s+2]],l=n[s+3];"boolean"==typeof l?a.removeEventListener(n[s],u,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(t,e),1===e[1].type&&e[11].destroy();const n=e[17];if(null!==n&&vr(e[3])){n!==e[3]&&MN(n,e);const r=e[19];null!==r&&r.detachView(t)}!function D4(t){Vy.delete(t[20])}(e)}}function RN(t,e,n){return function kN(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===Lr.None||i===Lr.Emulated)return null}return ar(r,n)}(t,e.parent,n)}function Zs(t,e,n,r,i){t.insertBefore(e,n,r,i)}function PN(t,e,n){t.appendChild(e,n)}function ON(t,e,n,r,i){null!==r?Zs(t,e,n,r,i):PN(t,e,n)}function hf(t,e){return t.parentNode(e)}let VN=function LN(t,e,n){return 40&t.type?ar(t,n):null};function ff(t,e,n,r){const i=RN(t,r,e),s=e[11],a=function FN(t,e,n){return VN(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)ON(s,i,n[u],a,!1);else ON(s,i,n,a,!1)}function pf(t,e){if(null!==e){const n=e.type;if(3&n)return ar(e,t);if(4&n)return Zy(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return pf(t,r);{const i=t[e.index];return vr(i)?Zy(-1,i):ut(i)}}if(32&n)return Hy(e,t)()||ut(t[e.index]);{const r=BN(t,e);return null!==r?Array.isArray(r)?r[0]:pf(Gl(t[16]),r):pf(t,e.next)}}return null}function BN(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Zy(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return pf(r,i)}return e[7]}function Xy(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&en(ut(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Xy(t,e,n.child,r,i,s,!1),Ba(e,t,i,a,s);else if(32&u){const l=Hy(n,r);let c;for(;c=l();)Ba(e,t,i,c,s);Ba(e,t,i,a,s)}else 16&u?jN(t,e,r,n,i,s):Ba(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Wl(t,e,n,r,i,s){Xy(n,r,t.firstChild,e,i,s,!1)}function jN(t,e,n,r,i,s){const o=n[16],u=o[6].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Ba(e,t,i,u[l],s);else Xy(t,e,u,o[3],i,s,!0)}function HN(t,e,n){t.setAttribute(e,"style",n)}function Jy(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function GN(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const WN="ng-template";function nK(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==GN(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function qN(t){return 4===t.type&&t.value!==WN}function rK(t,e,n){return e===(4!==t.type||n?t.value:WN)}function iK(t,e,n){let r=4;const i=t.attrs||[],s=function aK(t){for(let e=0;e<t.length;e++)if(_M(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!rK(t,u,n)||""===u&&1===e.length){if(Ir(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!nK(t.attrs,l,n)){if(Ir(r))return!1;o=!0}continue}const d=sK(8&r?"class":u,i,qN(t),n);if(-1===d){if(Ir(r))return!1;o=!0;continue}if(""!==l){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==GN(f,l,0)||2&r&&l!==h){if(Ir(r))return!1;o=!0}}}}else{if(!o&&!Ir(r)&&!Ir(u))return!1;if(o&&Ir(u))continue;o=!1,r=u|1&r}}return Ir(r)||o}function Ir(t){return 0==(1&t)}function sK(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function uK(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function zN(t,e,n=!1){for(let r=0;r<e.length;r++)if(iK(t,e[r],n))return!0;return!1}function KN(t,e){return t?":not("+e.trim()+")":e}function cK(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ir(o)&&(e+=KN(s,i),i=""),r=o,s=s||!Ir(r);n++}return""!==i&&(e+=KN(s,i)),e}const J={};function gf(t){QN(pe(),C(),pn()+t,!1)}function QN(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&Wh(e,s,n)}else{const s=t.preOrderHooks;null!==s&&qh(e,s,0,n)}Qi(n)}function JN(t,e=null,n=null,r){const i=eR(t,e,n,r);return i.resolveInjectorInitializers(),i}function eR(t,e=null,n=null,r,i=new Set){const s=[n||we,K3(t)];return r=r||("object"==typeof t?void 0:Ae(t)),new cN(s,e||df(),r||null,i)}let tn=(()=>{class t{static create(n,r){if(Array.isArray(n))return JN({name:""},r,n,"");{const i=n.name??"";return JN({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=kl,t.NULL=new sN,t.\u0275prov=te({token:t,providedIn:"any",factory:()=>B(rN)}),t.__NG_ELEMENT_ID__=-1,t})();function b(t,e=H.Default){const n=C();return null===n?B(t,e):DM(mt(),n,q(t),e)}function iv(){throw new Error("invalid")}function _f(t,e){return t<<17|e<<2}function Er(t){return t>>17&32767}function sv(t){return 2|t}function yi(t){return(131068&t)>>2}function ov(t,e){return-131069&t|e<<2}function av(t){return 1|t}function _R(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const o=t.data[s];ty(i),o.contentQueries(2,e[s],s)}}}function wf(t,e,n,r,i,s,o,a,u,l,c){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==c||t&&1024&t[2])&&(d[2]|=1024),iM(d),d[3]=d[15]=t,d[8]=n,d[10]=o||t&&t[10],d[11]=a||t&&t[11],d[12]=u||t&&t[12]||null,d[9]=l||t&&t[9]||null,d[6]=s,d[20]=function C4(){return E4++}(),d[21]=c,d[16]=2==e.type?t[16]:d,d}function ja(t,e,n,r,i){let s=t.data[e];if(null===s)s=function gv(t,e,n,r,i){const s=aM(),o=Z_(),u=t.data[e]=function zK(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(t,e,n,r,i),function Dz(){return Q.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function bl(){const t=Q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Vr(s,!0),s}function Ha(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function If(t,e,n){ny(e);try{const r=t.viewQuery;null!==r&&bv(1,r,n);const i=t.template;null!==i&&yR(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&_R(t,e),t.staticViewQueries&&bv(2,t.viewQuery,n);const s=t.components;null!==s&&function HK(t,e){for(let n=0;n<e.length;n++)l8(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,ry()}}function ql(t,e,n,r){const i=e[2];if(128!=(128&i)){ny(e);try{iM(e),function uM(t){return Q.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&yR(t,e,n,2,r);const o=3==(3&i);if(o){const l=t.preOrderCheckHooks;null!==l&&Wh(e,l,null)}else{const l=t.preOrderHooks;null!==l&&qh(e,l,0,null),iy(e,0)}if(function a8(t){for(let e=Gy(t);null!==e;e=Wy(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],s=i[3];0==(512&i[2])&&Y_(s,1),i[2]|=512}}}(e),function o8(t){for(let e=Gy(t);null!==e;e=Wy(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];jh(r)&&ql(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&_R(t,e),o){const l=t.contentCheckHooks;null!==l&&Wh(e,l)}else{const l=t.contentHooks;null!==l&&qh(e,l,1),iy(e,1)}!function $K(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Qi(~i);else{const s=i,o=n[++r],a=n[++r];Tz(o,s),a(2,e[s])}}}finally{Qi(-1)}}(t,e);const a=t.components;null!==a&&function jK(t,e){for(let n=0;n<e.length;n++)u8(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&bv(2,u,r),o){const l=t.viewCheckHooks;null!==l&&Wh(e,l)}else{const l=t.viewHooks;null!==l&&qh(e,l,2),iy(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Y_(e[3],-1))}finally{ry()}}}function GK(t,e,n,r){const i=e[10],o=function rM(t){return 4==(4&t[2])}(e);try{!o&&i.begin&&i.begin(),o&&If(t,e,r),ql(t,e,n,r)}finally{!o&&i.end&&i.end()}}function yR(t,e,n,r,i){const s=pn(),o=2&r;try{Qi(-1),o&&e.length>22&&QN(t,e,22,!1),n(r,i)}finally{Qi(s)}}function mv(t,e,n){!oM()||(function XK(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Sl(n,e),en(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],l=wr(u);l&&r8(e,n,u);const c=Al(e,t,a,n);en(c,e),null!==o&&i8(0,a-i,c,u,0,o),l&&(Wn(n.index,e)[8]=c)}}(t,e,n,ar(n,e)),128==(128&n.flags)&&function JK(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function Sz(){return Q.lFrame.currentDirectiveIndex}();try{Qi(s);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];J_(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&TR(u,l)}}finally{Qi(-1),J_(o)}}(t,e,n))}function _v(t,e,n=ar){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function wR(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=yv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function yv(t,e,n,r,i,s,o,a,u,l){const c=22+r,d=c+i,h=function WK(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:J);return n}(c,d),f="function"==typeof l?l():l;return h[1]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function ER(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function CR(t,e){const r=e.directiveEnd,i=t.data,s=e.attrs,o=[];let a=null,u=null;for(let l=e.directiveStart;l<r;l++){const c=i[l],d=c.inputs,h=null===s||qN(e)?null:s8(d,s);o.push(h),a=ER(d,l,a),u=ER(c.outputs,l,u)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=u}function bR(t,e){const n=Wn(e,t);16&n[2]||(n[2]|=32)}function vv(t,e,n,r){let i=!1;if(oM()){const s=function e8(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];zN(n,o.selectors,!1)&&(i||(i=[]),Zh(Sl(n,e),t,o.type),wr(o)?(SR(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,AR(n,t.data.length,s.length);for(let c=0;c<s.length;c++){const d=s[c];d.providersResolver&&d.providersResolver(d)}let a=!1,u=!1,l=Ha(t,e,s.length,null);for(let c=0;c<s.length;c++){const d=s[c];n.mergedAttrs=Kh(n.mergedAttrs,d.hostAttrs),xR(t,n,e,l,d),n8(l,d,o),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!u&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),u=!0),l++}CR(t,n)}o&&function t8(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new A(-301,!1);r.push(e[i],s)}}}(n,r,o)}return n.mergedAttrs=Kh(n.mergedAttrs,n.attrs),i}function DR(t,e,n,r,i,s){const o=s.hostBindings;if(o){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const u=~e.index;(function ZK(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=u&&a.push(u),a.push(r,i,o)}}function TR(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function SR(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function n8(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;wr(e)&&(n[""]=t)}}function AR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xR(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Qs(i.type)),o=new Dl(s,wr(i),b);t.blueprint[r]=o,n[r]=o,DR(t,e,0,r,Ha(t,n,i.hostVars,J),i)}function r8(t,e,n){const r=ar(e,t),i=wR(n),s=t[10],o=Ef(t,wf(t,i,null,n.onPush?32:16,r,e,s,s.createRenderer(r,n),null,null,null));t[e.index]=o}function i8(t,e,n,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let u=0;u<o.length;){const l=o[u++],c=o[u++],d=o[u++];null!==a?r.setInput(n,d,l,c):n[c]=d}}}function s8(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function MR(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function u8(t,e){const n=Wn(e,t);if(jh(n)){const r=n[1];48&n[2]?ql(r,n,r.template,n[8]):n[5]>0&&Iv(n)}}function Iv(t){for(let r=Gy(t);null!==r;r=Wy(r))for(let i=10;i<r.length;i++){const s=r[i];if(jh(s))if(512&s[2]){const o=s[1];ql(o,s,o.template,s[8])}else s[5]>0&&Iv(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Wn(n[r],t);jh(i)&&i[5]>0&&Iv(i)}}function l8(t,e){const n=Wn(e,t),r=n[1];(function c8(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),If(r,n,n[8])}function Ef(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ev(t){for(;t;){t[2]|=32;const e=Gl(t);if(iz(t)&&!e)return t;t=e}return null}function bv(t,e,n){ty(0),e(t,n)}function RR(t){return t[7]||(t[7]=[])}function kR(t){return t.cleanup||(t.cleanup=[])}function OR(t,e){const n=t[9],r=n?n.get(Va,null):null;r&&r.handleError(e)}function Dv(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],l=t.data[o];null!==l.setInput?l.setInput(u,i,r,a):u[a]=i}}function Cf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=F_(i,a):2==s&&(r=F_(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function bf(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(ut(s)),vr(s))for(let a=10;a<s.length;a++){const u=s[a],l=u[1].firstChild;null!==l&&bf(u[1],u,l,r)}const o=n.type;if(8&o)bf(t,e,n.child,r);else if(32&o){const a=Hy(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=BN(e,n);if(Array.isArray(a))r.push(...a);else{const u=Gl(e[16]);bf(u[1],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class zl{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return bf(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(vr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Ky(e,r),Jh(n,r))}this._attachedToViewContainer=!1}NN(this._lView[1],this._lView)}onDestroy(e){!function IR(t,e,n,r){const i=RR(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&kR(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Ev(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Cv(t,e,n){const r=e[10];r.begin&&r.begin();try{ql(t,e,t.template,n)}catch(i){throw OR(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function W4(t,e){Wl(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=e}}class h8 extends zl{constructor(e){super(e),this._view=e}detectChanges(){!function NR(t){!function d8(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=$y(n);if(null!==r){const i=r[1];GK(i,r,i.template,n)}}}(t[8])}(this._view)}checkNoChanges(){}get context(){return null}}class Tv extends jl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ce(e);return new Kl(n,this.ngModule)}}function FR(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class p8{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,Ry,r);return i!==Ry||n===Ry?i:this.parentInjector.get(e,n,r)}}class Kl extends hN{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function dK(t){return t.map(cK).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return FR(this.componentDef.inputs)}get outputs(){return FR(this.componentDef.outputs)}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Xi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new p8(e,s):e,a=o.get(pN,null);if(null===a)throw new A(407,!1);const u=o.get(c4,null),l=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=r?function qK(t,e,n){return t.selectRootElement(e,n===Lr.ShadowDom)}(l,r,this.componentDef.encapsulation):zy(a.createRenderer(null,this.componentDef),c,function f8(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),h=this.componentDef.onPush?288:272,f={components:[]},p=yv(0,null,null,1,0,null,null,null,null,null),g=wf(null,p,f,h,null,null,a,l,u,o,null);let _,I;ny(g);try{const E=function _8(t,e,n,r,i,s){const o=n[1];n[22]=t;const u=ja(o,22,2,"#host",null),l=u.mergedAttrs=e.hostAttrs;null!==l&&(Cf(u,l,!0),null!==t&&(zh(i,t,l),null!==u.classes&&Jy(i,t,u.classes),null!==u.styles&&HN(i,t,u.styles)));const c=r.createRenderer(t,e),d=wf(n,wR(e),null,e.onPush?32:16,n[22],u,r,c,s||null,null,null);return o.firstCreatePass&&(Zh(Sl(u,n),o,e.type),SR(o,u),AR(u,n.length,1)),Ef(n,d),n[22]=d}(d,this.componentDef,g,a,l);if(d)if(r)zh(l,d,["ng-version",gN.full]);else{const{attrs:y,classes:S}=function hK(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Ir(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);y&&zh(l,d,y),S&&S.length>0&&Jy(l,d,S.join(" "))}if(I=Q_(p,22),void 0!==n){const y=I.projection=[];for(let S=0;S<this.ngContentSelectors.length;S++){const k=n[S];y.push(null!=k?Array.from(k):null)}}_=function y8(t,e,n,r,i){const s=n[1],o=function YK(t,e,n){const r=mt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),xR(t,r,e,Ha(t,e,1,null),n),CR(t,r));const i=Al(e,t,r.directiveStart,r);en(i,e);const s=ar(r,e);return s&&en(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,null!==i)for(const u of i)u(o,e);if(e.contentQueries){const u=mt();e.contentQueries(1,o,u.directiveStart)}const a=mt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Qi(a.index),DR(n[1],a,0,a.directiveStart,a.directiveEnd,e),TR(e,o)),o}(E,this.componentDef,g,f,[w8]),If(p,g,null)}finally{ry()}return new m8(this.componentType,_,Fa(I,g),g,I)}}class m8 extends class i4{}{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new h8(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;Dv(s[1],s,i,e,n),bR(s,this._tNode.index)}}get injector(){return new Ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function w8(){const t=mt();Gh(C()[1],t)}function be(t){let e=function LR(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(wr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new A(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Sv(t.inputs),o.declaredInputs=Sv(t.declaredInputs),o.outputs=Sv(t.outputs);const a=i.hostBindings;a&&b8(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&E8(t,u),l&&C8(t,l),O_(t.inputs,i.inputs),O_(t.declaredInputs,i.declaredInputs),O_(t.outputs,i.outputs),wr(i)&&i.data.animation){const c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===be&&(n=!1)}}e=Object.getPrototypeOf(e)}!function I8(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Kh(i.hostAttrs,n=Kh(n,i.hostAttrs))}}(r)}function Sv(t){return t===ma?{}:t===we?[]:t}function E8(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function C8(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function b8(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}let Df=null;function Xs(){if(!Df){const t=xe.Symbol;if(t&&t.iterator)Df=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Df=r)}}}return Df}function Ql(t){return!!function Av(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Xs()in t)}function nn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Sf(t,e,n){const r=C();return nn(r,Ca(),e)&&function Qn(t,e,n,r,i,s,o,a){const u=ar(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(Dv(t,n,c,r,i),Uh(e)&&bR(n,e.index)):3&e.type&&(r=function KK(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(pe(),function Ye(){const t=Q.lFrame;return Q_(t.tView,t.selectedIndex)}(),r,t,e,r[11],n,!1),Sf}function xv(t,e,n,r,i){const o=i?"class":"style";Dv(t,n,e.inputs[o],o,r)}function ts(t,e,n,r){const i=C(),s=pe(),o=22+t,a=i[11],u=i[o]=zy(a,e,function Oz(){return Q.lFrame.currentNamespace}()),l=s.firstCreatePass?function O8(t,e,n,r,i,s,o){const a=e.consts,l=ja(e,t,2,i,Ki(a,s));return vv(e,n,l,Ki(a,o)),null!==l.attrs&&Cf(l,l.attrs,!1),null!==l.mergedAttrs&&Cf(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,0,e,n,r):s.data[o];Vr(l,!0);const c=l.mergedAttrs;null!==c&&zh(a,u,c);const d=l.classes;null!==d&&Jy(a,u,d);const h=l.styles;return null!==h&&HN(a,u,h),64!=(64&l.flags)&&ff(s,i,u,l),0===function _z(){return Q.lFrame.elementDepthCount}()&&en(u,i),function yz(){Q.lFrame.elementDepthCount++}(),Bh(l)&&(mv(s,i,l),function vR(t,e,n){if(G_(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}(s,l,i)),null!==r&&_v(i,l),ts}function ns(){let t=mt();Z_()?function X_(){Q.lFrame.isParent=!1}():(t=t.parent,Vr(t,!1));const e=t;!function vz(){Q.lFrame.elementDepthCount--}();const n=pe();return n.firstCreatePass&&(Gh(n,t),G_(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Bz(t){return 0!=(16&t.flags)}(e)&&xv(n,e,C(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function $z(t){return 0!=(32&t.flags)}(e)&&xv(n,e,C(),e.stylesWithoutHost,!1),ns}function Mv(t,e,n,r){return ts(t,e,n,r),ns(),Mv}function Zl(t){return!!t&&"function"==typeof t.then}function QR(t){return!!t&&"function"==typeof t.subscribe}const kv=QR;function mn(t,e,n,r){const i=C(),s=pe(),o=mt();return function ZR(t,e,n,r,i,s,o,a){const u=Bh(r),c=t.firstCreatePass&&kR(t),d=e[8],h=RR(e);let f=!0;if(3&r.type||a){const _=ar(r,e),I=a?a(_):_,E=h.length,y=a?k=>a(ut(k[r.index])):r.index;let S=null;if(!a&&u&&(S=function V8(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[7],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=s,S.__ngLastListenerFn__=s,f=!1;else{s=JR(r,e,d,s,!1);const k=n.listen(I,i,s);h.push(s,k),c&&c.push(i,y,E,E+1)}}else s=JR(r,e,d,s,!1);const p=r.outputs;let g;if(f&&null!==p&&(g=p[i])){const _=g.length;if(_)for(let I=0;I<_;I+=2){const V=e[g[I]][g[I+1]].subscribe(s),Te=h.length;h.push(s,V),c&&c.push(i,r.index,Te,-(Te+1))}}}(s,i,i[11],o,t,e,0,r),mn}function XR(t,e,n,r){try{return!1!==n(r)}catch(i){return OR(t,i),!1}}function JR(t,e,n,r,i){return function s(o){if(o===Function)return r;Ev(2&t.flags?Wn(t.index,e):e);let u=XR(e,0,r,o),l=s.__ngNextListenerFn__;for(;l;)u=XR(e,0,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function lk(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Er(s):yi(s),u=!1;for(;0!==a&&(!1===u||o);){const c=t[a+1];W8(t[a],e)&&(u=!0,t[a+1]=r?av(c):sv(c)),a=r?Er(c):yi(c)}u&&(t[n+1]=r?sv(s):av(s))}function W8(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Na(t,e)>=0}function Af(t,e){return function Cr(t,e,n,r){const i=C(),s=pe(),o=function pi(t){const e=Q.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function yk(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[pn()],o=function _k(t,e){return e>=t.expandoStartIndex}(t,n);(function Ek(t,e){return 0!=(t.flags&(e?16:32))})(s,r)&&null===e&&!o&&(e=!1),e=function e6(t,e,n,r){const i=function ey(t){const e=Q.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Xl(n=Ov(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Ov(i,t,e,n,r),null===s){let u=function t6(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==yi(r))return t[Er(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=Ov(null,t,e,u[1],r),u=Xl(u,e.attrs,r),function n6(t,e,n,r){t[Er(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function r6(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Xl(r,t[s].hostAttrs,n);return Xl(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function H8(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Er(o),u=yi(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const d=n;c=d[1],(null===c||Na(d,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const h=Er(t[a+1]);t[r+1]=_f(h,a),0!==h&&(t[h+1]=ov(t[h+1],r)),t[a+1]=function NK(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=_f(a,0),0!==a&&(t[a+1]=ov(t[a+1],r)),a=r;else t[r+1]=_f(u,0),0===a?a=r:t[u+1]=ov(t[u+1],r),u=r;l&&(t[r+1]=sv(t[r+1])),lk(t,c,r,!0),lk(t,c,r,!1),function G8(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Na(s,e)>=0&&(n[r+1]=av(n[r+1]))}(e,c,t,r,s),o=_f(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==J&&nn(i,o,e)&&function wk(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,l=u[a+1];xf(function lR(t){return 1==(1&t)}(l)?Ik(u,e,n,i,yi(l),o):void 0)||(xf(s)||function uR(t){return 2==(2&t)}(l)&&(s=Ik(u,null,n,i,a,o)),function tK(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:xn.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=xn.Important),t.setStyle(n,r,i,s))}}(r,o,$h(pn(),n),i,s))}(s,s.data[pn()],i,i[11],t,i[o+1]=function o6(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ae(function Zi(t){return t instanceof class KM{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,o)}(t,e,null,!0),Af}function Ov(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Xl(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Xl(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),zn(t,o,!!n||e[++s]))}return void 0===t?null:t}function Ik(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),c=l?u[1]:u,d=null===c;let h=n[i+1];h===J&&(h=d?we:void 0);let f=d?hy(h,r):c===r?h:void 0;if(l&&!xf(f)&&(f=hy(u,r)),xf(f)&&(a=f,o))return a;const p=t[i+1];i=o?Er(p):yi(p)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=hy(u,r))}return a}function xf(t){return void 0!==t}function Mf(t,e=""){const n=C(),r=pe(),i=t+22,s=r.firstCreatePass?ja(r,i,1,e,null):r.data[i],o=n[i]=function qy(t,e){return t.createText(e)}(n[11],e);ff(r,n,o,s),Vr(s,!1)}function Fv(t){return Lv("",t,""),Fv}function Lv(t,e,n){const r=C(),i=function Wa(t,e,n,r){return nn(t,Ca(),n)?e+X(n)+r:J}(r,t,e,n);return i!==J&&function vi(t,e,n){const r=$h(e,t);!function xN(t,e,n){t.setValue(e,n)}(t[11],r,n)}(r,pn(),i),Lv}const tu="en-US";let Gk=tu;function Bv(t,e,n,r,i){if(t=q(t),Array.isArray(t))for(let s=0;s<t.length;s++)Bv(t[s],e,n,r,i);else{const s=pe(),o=C();let a=Ys(t)?t:q(t.provide),u=dN(t);const l=mt(),c=1048575&l.providerIndexes,d=l.directiveStart,h=l.providerIndexes>>20;if(Ys(t)||!t.multi){const f=new Dl(u,i,b),p=jv(a,e,i?c:c+h,d);-1===p?(Zh(Sl(l,o),s,a),$v(s,t,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{const f=jv(a,e,c+h,d),p=jv(a,e,c,c+h),g=f>=0&&n[f],_=p>=0&&n[p];if(i&&!_||!i&&!g){Zh(Sl(l,o),s,a);const I=function b7(t,e,n,r,i){const s=new Dl(t,n,b);return s.multi=[],s.index=e,s.componentProviders=0,gP(s,i,r&&!n),s}(i?C7:E7,n.length,i,r,u);!i&&_&&(n[p].providerFactory=I),$v(s,t,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(I),o.push(I)}else $v(s,t,f>-1?f:p,gP(n[i?p:f],u,!i&&r));!i&&r&&_&&n[p].componentProviders++}}}function $v(t,e,n,r){const i=Ys(e),s=function Y3(t){return!!t.useClass}(e);if(i||s){const u=(s?q(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const c=l.indexOf(n);-1===c?l.push(n,[r,u]):l[c+1].push(r,u)}else l.push(n,u)}}}function gP(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function jv(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function E7(t,e,n,r){return Hv(this.multi,[])}function C7(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Al(n,n[1],this.providerFactory.index,r);s=a.slice(0,o),Hv(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Hv(i,s);return s}function Hv(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Be(t,e=[]){return n=>{n.providersResolver=(r,i)=>function I7(t,e,n){const r=pe();if(r.firstCreatePass){const i=wr(t);Bv(n,r.data,r.blueprint,i,!0),Bv(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class to{}class mP{}class _P extends to{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tv(this);const r=Hn(e);this._bootstrapComponents=_i(r.bootstrap),this._r3Injector=eR(e,n,[{provide:to,useValue:this},{provide:jl,useValue:this.componentFactoryResolver}],Ae(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Gv extends mP{constructor(e){super(),this.moduleType=e}create(e){return new _P(this.moduleType,e)}}class T7 extends to{constructor(e,n,r){super(),this.componentFactoryResolver=new Tv(this),this.instance=null;const i=new cN([...e,{provide:to,useValue:this},{provide:jl,useValue:this.componentFactoryResolver}],n||df(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Of(t,e,n=null){return new T7(t,e,n).injector}let S7=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=oN(0,n.type),i=r.length>0?Of([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=te({token:t,providedIn:"environment",factory:()=>new t(B(Xi))}),t})();function yP(t){t.getStandaloneInjector=e=>e.get(S7).getOrCreateStandaloneInjector(t)}function DP(t,e,n,r,i,s){const o=e+n;return nn(t,o,i)?function jr(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function rc(t,e){const n=t[e];return n===J?void 0:n}(t,o+1)}function NP(t,e,n){const r=t+22,i=C(),s=function Ea(t,e){return t[e]}(i,r);return function ic(t,e){return t[1].data[e].pure}(i,r)?DP(i,function fn(){const t=Q.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function qv(t){return e=>{setTimeout(t,void 0,e)}}const Xe=class Z7 extends Fr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=qv(s),i&&(i=qv(i)),o&&(o=qv(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Bn&&e.add(a),a}};let wi=(()=>{class t{}return t.__NG_ELEMENT_ID__=t5,t})();const J7=wi,e5=class extends J7{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tViews,i=wf(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),If(r,i,e),new zl(i)}};function t5(){return function Ff(t,e){return 4&t.type?new e5(e,t,Fa(t,e)):null}(mt(),C())}let Dr=(()=>{class t{}return t.__NG_ELEMENT_ID__=n5,t})();function n5(){return function PP(t,e){let n;const r=e[t.index];if(vr(r))n=r;else{let i;if(8&t.type)i=ut(r);else{const s=e[11];i=s.createComment("");const o=ar(t,e);Zs(s,hf(s,o),i,function X4(t,e){return t.nextSibling(e)}(s,o),!1)}e[t.index]=n=MR(r,e,i,t),Ef(e,n)}return new RP(n,t,e)}(mt(),C())}const r5=Dr,RP=class extends r5{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Fa(this._hostTNode,this._hostLView)}get injector(){return new Ta(this._hostTNode,this._hostLView)}get parentInjector(){const e=Yh(this._hostTNode,this._hostLView);if(wM(e)){const n=Da(e,this._hostLView),r=ba(e);return new Ta(n[1].data[r+8],n)}return new Ta(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=kP(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(n||{},s);return this.insert(o,i),o}createComponent(e,n,r,i,s){const o=e&&!function Nl(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const u=o?e:new Kl(Ce(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const h=(o?l:this.parentInjector).get(Xi,null);h&&(s=h)}const c=u.create(l,i,void 0,s);return this.insert(c.hostView,a),c}insert(e,n){const r=e._lView,i=r[1];if(function mz(t){return vr(t[3])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=r[3],h=new RP(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function z4(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],NM(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function K4(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=64}(i,r,o,s);const a=Zy(s,o),u=r[11],l=hf(u,o[7]);return null!==l&&function G4(t,e,n,r,i,s){r[0]=i,r[6]=e,Wl(t,r,n,1,i,s)}(i,o[6],u,r,l,a),e.attachToViewContainerRef(),NM(Kv(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=kP(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Ky(this._lContainer,n);r&&(Jh(Kv(this._lContainer),n),NN(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Ky(this._lContainer,n);return r&&null!=Jh(Kv(this._lContainer),n)?new zl(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function kP(t){return t[8]}function Kv(t){return t[8]||(t[8]=[])}function Vf(...t){}const Uf=new U("Application Initializer");let Bf=(()=>{class t{constructor(n){this.appInits=n,this.resolve=Vf,this.reject=Vf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Zl(s))n.push(s);else if(kv(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(B(Uf,8))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const oc=new U("AppId",{providedIn:"root",factory:function iO(){return`${aw()}${aw()}${aw()}`}});function aw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sO=new U("Platform Initializer"),$f=new U("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),oO=new U("appBootstrapListener");let k5=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Ii=new U("LocaleId",{providedIn:"root",factory:()=>nt(Ii,H.Optional|H.SkipSelf)||function P5(){return typeof $localize<"u"&&$localize.locale||tu}()});class F5{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let uw=(()=>{class t{compileModuleSync(n){return new Gv(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=_i(Hn(n).declarations).reduce((o,a)=>{const u=Ce(a);return u&&o.push(new Kl(u)),o},[]);return new F5(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const U5=(()=>Promise.resolve(0))();function lw(t){typeof Zone>"u"?U5.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class $e{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function B5(){let t=xe.requestAnimationFrame,e=xe.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function H5(t){const e=()=>{!function j5(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(xe,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,dw(t),t.isCheckStableRunning=!0,cw(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),dw(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return lO(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),cO(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return lO(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),cO(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,dw(t),cw(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$e.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if($e.isInAngularZone())throw new A(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,$5,Vf,Vf);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const $5={};function cw(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function dw(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function lO(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function cO(t){t._nesting--,cw(t)}class G5{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const dO=new U(""),jf=new U("");let pw,hw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pw||(function W5(t){pw=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$e.assertNotInAngularZone(),lw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lw(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(B($e),B(fw),B(jf))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})(),fw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return pw?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),rs=null;const hO=new U("AllowMultipleToken"),gw=new U("PlatformDestroyListeners");class fO{constructor(e,n){this.name=e,this.token=n}}function gO(t,e,n=[]){const r=`Platform: ${e}`,i=new U(r);return(s=[])=>{let o=mw();if(!o||o.injector.get(hO,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function K5(t){if(rs&&!rs.get(hO,!1))throw new A(400,!1);rs=t;const e=t.get(_O);(function pO(t){const e=t.get(sO,null);e&&e.forEach(n=>n())})(t)}(function mO(t=[],e){return tn.create({name:e,providers:[{provide:Ay,useValue:"platform"},{provide:gw,useValue:new Set([()=>rs=null])},...t]})}(a,r))}return function Y5(t){const e=mw();if(!e)throw new A(401,!1);return e}()}}function mw(){return rs?.get(_O)??null}let _O=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function vO(t,e){let n;return n="noop"===t?new G5:("zone.js"===t?void 0:t)||new $e(e),n}(r?.ngZone,function yO(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:$e,useValue:i}];return i.run(()=>{const o=tn.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),u=a.injector.get(Va,null);if(!u)throw new A(402,!1);return i.runOutsideAngular(()=>{const l=i.onError.subscribe({next:c=>{u.handleError(c)}});a.onDestroy(()=>{Gf(this._modules,a),l.unsubscribe()})}),function wO(t,e,n){try{const r=n();return Zl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(u,i,()=>{const l=a.injector.get(Bf);return l.runInitializers(),l.donePromise.then(()=>(function Wk(t){jn(t,"Expected localeId to be defined"),"string"==typeof t&&(Gk=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ii,tu)||tu),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=IO({},r);return function q5(t,e,n){const r=new Gv(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Hf);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new A(403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new A(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(gw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(B(tn))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function IO(t,e){return Array.isArray(e)?e.reduce(IO,t):{...t,...e}}let Hf=(()=>{class t{constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new qe(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new qe(a=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{$e.assertNotInAngularZone(),lw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{$e.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),l.unsubscribe()}});this.isStable=function Uq(...t){const e=vl(t),n=function Rq(t,e){return"number"==typeof k_(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?mr(r[0]):ga(n)(at(r,e)):ci}(s,o.pipe(function Bq(t={}){const{connector:e=(()=>new Fr),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,l=0,c=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,c=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return bt((g,_)=>{l++,!d&&!c&&h();const I=u=u??e();_.add(()=>{l--,0===l&&!d&&!c&&(a=P_(p,i))}),I.subscribe(_),!o&&l>0&&(o=new yl({next:E=>I.next(E),error:E=>{d=!0,h(),a=P_(f,n,E),I.error(E)},complete:()=>{c=!0,h(),a=P_(f,r),I.complete()}}),mr(g).subscribe(o))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof hN;if(!this._injector.get(Bf).done)throw!i&&function _a(t){const e=Ce(t)||dn(t)||hn(t);return null!==e&&e.standalone}(n),new A(405,false);let o;o=i?n:this._injector.get(jl).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function z5(t){return t.isBoundToModule}(o)?void 0:this._injector.get(to),l=o.create(tn.NULL,[],r||o.selector,a),c=l.location.nativeElement,d=l.injector.get(dO,null);return d?.registerApplication(c),l.onDestroy(()=>{this.detachView(l.hostView),Gf(this.components,l),d?.unregisterApplication(c)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new A(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Gf(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(oO,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Gf(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new A(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(B($e),B(Xi),B(Va))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Gf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let CO=!0,Wf=(()=>{class t{}return t.__NG_ELEMENT_ID__=J5,t})();function J5(t){return function eQ(t,e,n){if(Uh(t)&&!n){const r=Wn(t.index,e);return new zl(r,r)}return 47&t.type?new zl(e[16],e):null}(mt(),C(),16==(16&t))}class AO{constructor(){}supports(e){return Ql(e)}create(e){return new oQ(e)}}const sQ=(t,e)=>e;class oQ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||sQ}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<MO(r,i,s)?n:r,a=MO(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,c=u-i;if(l!=c){for(let h=0;h<l;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;c<=p&&p<l&&(s[h]=f+1)}s[o.previousIndex]=c-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Ql(e))throw new A(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function x8(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Xs()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new aQ(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new xO),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class aQ{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uQ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class xO{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new uQ,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function MO(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function RO(){return new Kf([new AO])}let Kf=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||RO()),deps:[[t,new Fl,new lt]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new A(901,!1)}}return t.\u0275prov=te({token:t,providedIn:"root",factory:RO}),t})();const fQ=gO(null,"core",[]);let pQ=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(B(Hf))},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({}),t})();let Qf=null;function qr(){return Qf}const Mn=new U("DocumentToken");let Iw=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:function(){return function yQ(){return B(PO)}()},providedIn:"platform"}),t})();const vQ=new U("Location Initialized");let PO=(()=>{class t extends Iw{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qr().getBaseHref(this._doc)}onPopState(n){const r=qr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=qr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){OO()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){OO()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(B(Mn))},t.\u0275prov=te({token:t,factory:function(){return function wQ(){return new PO(B(Mn))}()},providedIn:"platform"}),t})();function OO(){return!!window.history.pushState}function Ew(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function FO(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function bi(t){return t&&"?"!==t[0]?"?"+t:t}let ro=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:function(){return nt(VO)},providedIn:"root"}),t})();const LO=new U("appBaseHref");let VO=(()=>{class t extends ro{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??nt(Mn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Ew(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+bi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+bi(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+bi(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(B(Iw),B(LO,8))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),IQ=(()=>{class t extends ro{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Ew(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+bi(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+bi(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(B(Iw),B(LO,8))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})(),Cw=(()=>{class t{constructor(n){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=FO(UO(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+bi(r))}normalize(n){return t.stripTrailingSlash(function CQ(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,UO(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+bi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+bi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.normalizeQueryParams=bi,t.joinWithSlash=Ew,t.stripTrailingSlash=FO,t.\u0275fac=function(n){return new(n||t)(B(ro))},t.\u0275prov=te({token:t,factory:function(){return function EQ(){return new Cw(B(ro))}()},providedIn:"root"}),t})();function UO(t){return t.replace(/\/index.html$/,"")}class lY{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let YO=(()=>{class t{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new lY(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),ZO(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{ZO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(b(Dr),b(wi),b(Kf))},t.\u0275dir=z({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function ZO(t,e){t.context.$implicit=e.item}class yY{createSubscription(e,n){return e.subscribe({next:n,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class vY{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const wY=new vY,IY=new yY;let e1=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Zl(n))return wY;if(QR(n))return IY;throw function Ar(t,e){return new A(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return t.\u0275fac=function(n){return new(n||t)(b(Wf,16))},t.\u0275pipe=Sn({name:"async",type:t,pure:!1,standalone:!0}),t})(),VY=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({}),t})();let jY=(()=>{class t{}return t.\u0275prov=te({token:t,providedIn:"root",factory:()=>new HY(B(Mn),window)}),t})();class HY{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function GY(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=r1(this.window.history)||r1(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function r1(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Uw extends class l9 extends class _Q{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function mQ(t){Qf||(Qf=t)}(new Uw)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function c9(){return dc=dc||document.querySelector("base"),dc?dc.getAttribute("href"):null}();return null==n?null:function d9(t){op=op||document.createElement("a"),op.setAttribute("href",t);const e=op.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){dc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function oY(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let op,dc=null;const a1=new U("TRANSITION_ID"),f9=[{provide:Uf,useFactory:function h9(t,e,n){return()=>{n.get(Bf).donePromise.then(()=>{const r=qr(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[a1,Mn,tn],multi:!0}];let g9=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();const ap=new U("EventManagerPlugins");let up=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(B(ap),B($e))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();class u1{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=qr().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let l1=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})(),hc=(()=>{class t extends l1{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(c1),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(c1))}}return t.\u0275fac=function(n){return new(n||t)(B(Mn))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();function c1(t){qr().remove(t)}const Bw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$w=/%COMP%/g;function lp(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?lp(t,i,n):(i=i.replace($w,t),n.push(i))}return n}function f1(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let jw=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Hw(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Lr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new I9(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case Lr.ShadowDom:return new E9(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=lp(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(B(up),B(hc),B(oc))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();class Hw{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(Bw[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(g1(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(g1(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Bw[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Bw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(xn.DashCase|xn.Important)?e.style.setProperty(n,r,i&xn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&xn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,f1(r)):this.eventManager.addEventListener(e,n,f1(r))}}function g1(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class I9 extends Hw{constructor(e,n,r,i){super(e),this.component=r;const s=lp(i+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function y9(t){return"_ngcontent-%COMP%".replace($w,t)}(i+"-"+r.id),this.hostAttr=function v9(t){return"_nghost-%COMP%".replace($w,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class E9 extends Hw{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=lp(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let C9=(()=>{class t extends u1{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(B(Mn))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();const m1=["alt","control","meta","shift"],b9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},D9={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let T9=(()=>{class t extends u1{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qr().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),m1.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=b9[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),m1.forEach(o=>{o!==i&&(0,D9[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(B(Mn))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();const y1=[{provide:$f,useValue:"browser"},{provide:sO,useValue:function S9(){Uw.makeCurrent()},multi:!0},{provide:Mn,useFactory:function x9(){return function E3(t){_y=t}(document),document},deps:[]}],M9=gO(fQ,"browser",y1),v1=new U(""),w1=[{provide:jf,useClass:class p9{addToWindow(e){xe.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},xe.getAllAngularTestabilities=()=>e.getAllTestabilities(),xe.getAllAngularRootElements=()=>e.getAllRootElements(),xe.frameworkStabilizers||(xe.frameworkStabilizers=[]),xe.frameworkStabilizers.push(r=>{const i=xe.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?qr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:dO,useClass:hw,deps:[$e,fw,jf]},{provide:hw,useClass:hw,deps:[$e,fw,jf]}],I1=[{provide:Ay,useValue:"root"},{provide:Va,useFactory:function A9(){return new Va},deps:[]},{provide:ap,useClass:C9,multi:!0,deps:[Mn,$e,$f]},{provide:ap,useClass:T9,multi:!0,deps:[Mn]},{provide:jw,useClass:jw,deps:[up,hc,oc]},{provide:pN,useExisting:jw},{provide:l1,useExisting:hc},{provide:hc,useClass:hc,deps:[Mn]},{provide:up,useClass:up,deps:[ap,$e]},{provide:class WY{},useClass:g9,deps:[]},[]];let N9=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:oc,useValue:n.appId},{provide:a1,useExisting:oc},f9]}}}return t.\u0275fac=function(n){return new(n||t)(B(v1,12))},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({providers:[...I1,...w1],imports:[VY,pQ]}),t})(),E1=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(B(Mn))},t.\u0275prov=te({token:t,factory:function(n){let r=null;return r=n?new n:function k9(){return new E1(B(Mn))}(),r},providedIn:"root"}),t})();function $(...t){return at(t,vl(t))}typeof window<"u"&&window;class xr extends Fr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const cp=_l(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:$9}=Array,{getPrototypeOf:j9,prototype:H9,keys:G9}=Object;function D1(t){if(1===t.length){const e=t[0];if($9(e))return{args:e,keys:null};if(function W9(t){return t&&"object"==typeof t&&j9(t)===H9}(e)){const n=G9(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:q9}=Array;function T1(t){return he(e=>function z9(t,e){return q9(e)?t(...e):t(e)}(t,e))}function S1(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function A1(...t){const e=vl(t),n=jx(t),{args:r,keys:i}=D1(t);if(0===r.length)return at([],e);const s=new qe(function K9(t,e,n=Hs){return r=>{x1(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)x1(e,()=>{const l=at(t[u],e);let c=!1;l.subscribe(gt(r,d=>{s[u]=d,c||(c=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>S1(i,o):Hs));return n?s.pipe(T1(n)):s}function x1(t,e,n){t?li(n,t,e):e()}function qw(...t){return function Q9(){return ga(1)}()(at(t,vl(t)))}function M1(t){return new qe(e=>{mr(t()).subscribe(e)})}function fc(t,e){const n=Ne(t)?t:()=>t,r=i=>i.error(n());return new qe(e?i=>e.schedule(r,0,i):r)}function zw(){return bt((t,e)=>{let n=null;t._refCount++;const r=gt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class N1 extends qe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Sx(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Bn;const n=this.getSubject();e.add(this.source.subscribe(gt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Bn.EMPTY)}return e}refCount(){return zw()(this)}}function zr(t,e){return bt((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(gt(r,u=>{i?.unsubscribe();let l=0;const c=s++;mr(t(u,c)).subscribe(i=gt(r,d=>r.next(e?e(u,d,c,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function pc(t){return t<=0?()=>ci:bt((e,n)=>{let r=0;e.subscribe(gt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ss(t,e){return bt((n,r)=>{let i=0;n.subscribe(gt(r,s=>t.call(e,s,i++)&&r.next(s)))})}function dp(t){return bt((e,n)=>{let r=!1;e.subscribe(gt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function R1(t=Z9){return bt((e,n)=>{let r=!1;e.subscribe(gt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Z9(){return new cp}function os(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ss((i,s)=>t(i,s,r)):Hs,pc(1),n?dp(e):R1(()=>new cp))}function io(t,e){return Ne(e)?Lt(t,e,1):Lt(t,1)}function Vt(t,e,n){const r=Ne(t)||e||n?{next:t,error:e,complete:n}:t;return r?bt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(gt(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Hs}function as(t){return bt((e,n)=>{let s,r=null,i=!1;r=e.subscribe(gt(n,void 0,void 0,o=>{s=mr(t(o,as(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function X9(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(gt(o,c=>{const d=l++;u=a?t(u,c,d):(a=!0,c),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function k1(t,e){return bt(X9(t,e,arguments.length>=2,!0))}function Kw(t){return t<=0?()=>ci:bt((e,n)=>{let r=[];e.subscribe(gt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function P1(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ss((i,s)=>t(i,s,r)):Hs,Kw(1),n?dp(e):R1(()=>new cp))}function Qw(t){return bt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const oe="primary",gc=Symbol("RouteTitle");class tZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function su(t){return new tZ(t)}function nZ(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Kr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!O1(t[i],e[i]))return!1;return!0}function O1(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function F1(t){return Array.prototype.concat.apply([],t)}function L1(t){return t.length>0?t[t.length-1]:null}function Ut(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function us(t){return kv(t)?t:Zl(t)?at(Promise.resolve(t)):$(t)}const sZ={exact:function B1(t,e,n){if(!oo(t.segments,e.segments)||!hp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!B1(t.children[r],e.children[r],n))return!1;return!0},subset:$1},V1={exact:function oZ(t,e){return Kr(t,e)},subset:function aZ(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>O1(t[n],e[n]))},ignored:()=>!0};function U1(t,e,n){return sZ[n.paths](t.root,e.root,n.matrixParams)&&V1[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function $1(t,e,n){return j1(t,e,e.segments,n)}function j1(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!oo(i,n)||e.hasChildren()||!hp(i,n,r))}if(t.segments.length===n.length){if(!oo(t.segments,n)||!hp(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!$1(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(oo(t.segments,i)&&hp(t.segments,i,r)&&t.children[oe])&&j1(t.children[oe],e,s,r)}}function hp(t,e,n){return e.every((r,i)=>V1[n](t[i].parameters,r.parameters))}class so{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=su(this.queryParams)),this._queryParamMap}toString(){return cZ.serialize(this)}}class le{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Ut(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fp(this)}}class mc{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=su(this.parameters)),this._parameterMap}toString(){return q1(this)}}function oo(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let H1=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:function(){return new Zw},providedIn:"root"}),t})();class Zw{parse(e){const n=new vZ(e);return new so(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${_c(e.root,!0)}`,r=function fZ(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${pp(n)}=${pp(i)}`).join("&"):`${pp(n)}=${pp(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function dZ(t){return encodeURI(t)}(e.fragment)}`:""}`}}const cZ=new Zw;function fp(t){return t.segments.map(e=>q1(e)).join("/")}function _c(t,e){if(!t.hasChildren())return fp(t);if(e){const n=t.children[oe]?_c(t.children[oe],!1):"",r=[];return Ut(t.children,(i,s)=>{s!==oe&&r.push(`${s}:${_c(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function lZ(t,e){let n=[];return Ut(t.children,(r,i)=>{i===oe&&(n=n.concat(e(r,i)))}),Ut(t.children,(r,i)=>{i!==oe&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===oe?[_c(t.children[oe],!1)]:[`${i}:${_c(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[oe]?`${fp(t)}/${n[0]}`:`${fp(t)}/(${n.join("//")})`}}function G1(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pp(t){return G1(t).replace(/%3B/gi,";")}function Xw(t){return G1(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gp(t){return decodeURIComponent(t)}function W1(t){return gp(t.replace(/\+/g,"%20"))}function q1(t){return`${Xw(t.path)}${function hZ(t){return Object.keys(t).map(e=>`;${Xw(e)}=${Xw(t[e])}`).join("")}(t.parameters)}`}const pZ=/^[^\/()?;=#]+/;function mp(t){const e=t.match(pZ);return e?e[0]:""}const gZ=/^[^=?&#]+/,_Z=/^[^&#]+/;class vZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new le(e,n)),r}parseSegment(){const e=mp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(e),new mc(gp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=mp(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=mp(this.remaining);i&&(r=i,this.capture(r))}e[gp(n)]=gp(r)}parseQueryParam(e){const n=function mZ(t){const e=t.match(gZ);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function yZ(t){const e=t.match(_Z);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=W1(n),s=W1(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mp(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new A(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[oe]:new le([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new A(4011,!1)}}function Jw(t){return t.segments.length>0?new le([],{[oe]:t}):t}function _p(t){const e={};for(const r of Object.keys(t.children)){const s=_p(t.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function wZ(t){if(1===t.numberOfChildren&&t.children[oe]){const e=t.children[oe];return new le(t.segments.concat(e.segments),e.children)}return t}(new le(t.segments,e))}function ao(t){return t instanceof so}function CZ(t,e,n,r,i){if(0===n.length)return ou(e.root,e.root,e.root,r,i);const s=function Q1(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new K1(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Ut(s.outlets,(u,l)=>{a[l]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new K1(n,e,r)}(n);return s.toRoot()?ou(e.root,e.root,new le([],{}),r,i):function o(u){const l=function DZ(t,e,n,r){if(t.isAbsolute)return new au(e.root,!0,0);if(-1===r)return new au(n,n===e.root,0);return function Y1(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new A(4005,!1);i=r.segments.length}return new au(r,!1,i-s)}(n,r+(yc(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,e,t.snapshot?._urlSegment,u),c=l.processChildren?wc(l.segmentGroup,l.index,s.commands):tI(l.segmentGroup,l.index,s.commands);return ou(e.root,l.segmentGroup,c,r,i)}(t.snapshot?._lastPathIndex)}function yc(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function vc(t){return"object"==typeof t&&null!=t&&t.outlets}function ou(t,e,n,r,i){let o,s={};r&&Ut(r,(u,l)=>{s[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`}),o=t===e?n:z1(t,e,n);const a=Jw(_p(o));return new so(a,s,i)}function z1(t,e,n){const r={};return Ut(t.children,(i,s)=>{r[s]=i===e?n:z1(i,e,n)}),new le(t.segments,r)}class K1{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&yc(r[0]))throw new A(4003,!1);const i=r.find(vc);if(i&&i!==L1(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class au{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function tI(t,e,n){if(t||(t=new le([],{})),0===t.segments.length&&t.hasChildren())return wc(t,e,n);const r=function SZ(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(vc(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!X1(u,l,o))return s;r+=2}else{if(!X1(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new le(t.segments.slice(0,r.pathIndex),{});return s.children[oe]=new le(t.segments.slice(r.pathIndex),t.children),wc(s,0,i)}return r.match&&0===i.length?new le(t.segments,{}):r.match&&!t.hasChildren()?nI(t,e,n):r.match?wc(t,0,i):nI(t,e,n)}function wc(t,e,n){if(0===n.length)return new le(t.segments,{});{const r=function TZ(t){return vc(t[0])?t[0].outlets:{[oe]:t}}(n),i={};return Ut(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=tI(t.children[o],e,s))}),Ut(t.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new le(t.segments,i)}}function nI(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(vc(s)){const u=AZ(s.outlets);return new le(r,u)}if(0===i&&yc(n[0])){r.push(new mc(t.segments[e].path,Z1(n[0]))),i++;continue}const o=vc(s)?s.outlets[oe]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&yc(a)?(r.push(new mc(o,Z1(a))),i+=2):(r.push(new mc(o,{})),i++)}return new le(r,{})}function AZ(t){const e={};return Ut(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=nI(new le([],{}),0,n))}),e}function Z1(t){const e={};return Ut(t,(n,r)=>e[r]=`${n}`),e}function X1(t,e,n){return t==n.path&&Kr(e,n.parameters)}class Ti{constructor(e,n){this.id=e,this.url=n}}class rI extends Ti{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class uo extends Ti{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yp extends Ti{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class J1 extends Ti{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xZ extends Ti{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MZ extends Ti{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NZ extends Ti{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class RZ extends Ti{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kZ extends Ti{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PZ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class OZ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class FZ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LZ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VZ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UZ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eF{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class tF{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=iI(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=iI(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=sI(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return sI(e,this._root).map(n=>n.value)}}function iI(t,e){if(t===e.value)return e;for(const n of e.children){const r=iI(t,n);if(r)return r}return null}function sI(t,e){if(t===e.value)return[e];for(const n of e.children){const r=sI(t,n);if(r.length)return r.unshift(e),r}return[]}class Si{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function uu(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class nF extends tF{constructor(e,n){super(e),this.snapshot=n,oI(this,e)}toString(){return this.snapshot.toString()}}function rF(t,e){const n=function $Z(t,e){const o=new vp([],{},{},"",{},oe,e,null,t.root,-1,{});return new sF("",new Si(o,[]))}(t,e),r=new xr([new mc("",{})]),i=new xr({}),s=new xr({}),o=new xr({}),a=new xr(""),u=new lo(r,i,o,a,s,oe,e,n.root);return u.snapshot=n.root,new nF(new Si(u,[]),n)}class lo{constructor(e,n,r,i,s,o,a,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(he(l=>l[gc]))??$(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(he(e=>su(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(he(e=>su(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function iF(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function jZ(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class vp{constructor(e,n,r,i,s,o,a,u,l,c,d,h){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[gc],this.routeConfig=u,this._urlSegment=l,this._lastPathIndex=c,this._correctedLastPathIndex=h??c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=su(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=su(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sF extends tF{constructor(e,n){super(n),this.url=e,oI(this,n)}toString(){return oF(this._root)}}function oI(t,e){e.value._routerState=t,e.children.forEach(n=>oI(t,n))}function oF(t){const e=t.children.length>0?` { ${t.children.map(oF).join(", ")} } `:"";return`${t.value}${e}`}function aI(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Kr(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Kr(e.params,n.params)||t.params.next(n.params),function rZ(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Kr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Kr(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function uI(t,e){const n=Kr(t.params,e.params)&&function uZ(t,e){return oo(t,e)&&t.every((n,r)=>Kr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||uI(t.parent,e.parent))}function Ic(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function GZ(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ic(t,r,i);return Ic(t,r)})}(t,e,n);return new Si(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ic(t,a)),o}}const r=function WZ(t){return new lo(new xr(t.url),new xr(t.params),new xr(t.queryParams),new xr(t.fragment),new xr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Ic(t,s));return new Si(r,i)}}const lI="ngNavigationCancelingError";function aF(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=ao(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=uF(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function uF(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[lI]=!0,r.cancellationCode=e,n&&(r.url=n),r}function lF(t){return cF(t)&&ao(t.url)}function cF(t){return t&&t[lI]}class qZ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ec,this.attachRef=null}}let Ec=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new qZ,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const wp=!1;let dF=(()=>{class t{constructor(n,r,i,s,o){this.parentContexts=n,this.location=r,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.name=i||oe,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,wp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,wp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,wp);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new A(4013,wp);this._activatedRoute=n;const i=this.location,o=n._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new zZ(n,a,i.injector);if(r&&function KZ(t){return!!t.resolveComponentFactory}(r)){const l=r.resolveComponentFactory(o);this.activated=i.createComponent(l,i.length,u)}else this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(b(Ec),b(Dr),function xl(t){return function Wz(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(_M(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(mt(),t)}("name"),b(Wf),b(Xi))},t.\u0275dir=z({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),t})();class zZ{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===lo?this.route:e===Ec?this.childContexts:this.parent.get(e,n)}}let cI=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Oh({type:t,selectors:[["ng-component"]],standalone:!0,features:[yP],decls:1,vars:0,template:function(n,r){1&n&&Mv(0,"router-outlet")},dependencies:[dF],encapsulation:2}),t})();function hF(t,e){return t.providers&&!t._injector&&(t._injector=Of(t.providers,e,`Route: ${t.path}`)),t._injector??e}function hI(t){const e=t.children&&t.children.map(hI),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=cI),n}function dr(t){return t.outlet||oe}function fF(t,e){const n=t.filter(r=>dr(r)===e);return n.push(...t.filter(r=>dr(r)!==e)),n}function Cc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class JZ{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),aI(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=uu(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Ut(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=uu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=uu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=uu(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new UZ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new LZ(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(aI(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),aI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Cc(i.snapshot),u=a?.get(jl)??null;o.attachRef=null,o.route=i,o.resolver=u,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class pF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ip{constructor(e,n){this.component=e,this.route=n}}function eX(t,e,n){const r=t._root;return bc(r,e?e._root:null,n,[r.value])}function lu(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function zq(t){return null!==Rh(t)}(t)?e.get(t):t:r}function bc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=uu(e);return t.children.forEach(o=>{(function nX(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function rX(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!oo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!oo(t.url,e.url)||!Kr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uI(t,e)||!Kr(t.queryParams,e.queryParams);default:return!uI(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new pF(r)):(s.data=o.data,s._resolvedData=o._resolvedData),bc(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ip(a.outlet.component,o))}else o&&Dc(e,a,i),i.canActivateChecks.push(new pF(r)),bc(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Ut(s,(o,a)=>Dc(o,n.getContext(a),i)),i}function Dc(t,e,n){const r=uu(t),i=t.value;Ut(r,(s,o)=>{Dc(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Ip(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Tc(t){return"function"==typeof t}function fI(t){return t instanceof cp||"EmptyError"===t?.name}const Ep=Symbol("INITIAL_VALUE");function cu(){return zr(t=>A1(t.map(e=>e.pipe(pc(1),function Y9(...t){const e=vl(t);return bt((n,r)=>{(e?qw(t,n,e):qw(t,n)).subscribe(r)})}(Ep)))).pipe(he(e=>{for(const n of e)if(!0!==n){if(n===Ep)return Ep;if(!1===n||n instanceof so)return n}return!0}),ss(e=>e!==Ep),pc(1)))}function gF(t){return function hq(...t){return bx(t)}(Vt(e=>{if(ao(e))throw aF(0,e)}),he(e=>!0===e))}const pI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mF(t,e,n,r,i){const s=gI(t,e,n);return s.matched?function wX(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?$(i.map(o=>{const a=lu(o,t);return us(function lX(t){return t&&Tc(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(cu(),gF()):$(!0)}(r=hF(e,r),e,n).pipe(he(o=>!0===o?s:{...pI})):$(s)}function gI(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...pI}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||nZ)(n,t,e);if(!i)return{...pI};const s={};Ut(i.posParams,(a,u)=>{s[u]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Cp(t,e,n,r,i="corrected"){if(n.length>0&&function CX(t,e,n){return n.some(r=>bp(t,e,r)&&dr(r)!==oe)}(t,n,r)){const o=new le(e,function EX(t,e,n,r){const i={};i[oe]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&dr(s)!==oe){const o=new le([],{});o._sourceSegment=t,o._segmentIndexShift=e.length,i[dr(s)]=o}return i}(t,e,r,new le(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function bX(t,e,n){return n.some(r=>bp(t,e,r))}(t,n,r)){const o=new le(t.segments,function IX(t,e,n,r,i,s){const o={};for(const a of r)if(bp(t,n,a)&&!i[dr(a)]){const u=new le([],{});u._sourceSegment=t,u._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[dr(a)]=u}return{...i,...o}}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const s=new le(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function bp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function _F(t,e,n,r){return!!(dr(t)===r||r!==oe&&bp(e,n,t))&&("**"===t.path||gI(e,t,n).matched)}function yF(t,e,n){return 0===e.length&&!t.children[n]}const Dp=!1;class Tp{constructor(e){this.segmentGroup=e||null}}class vF{constructor(e){this.urlTree=e}}function Sc(t){return fc(new Tp(t))}function wF(t){return fc(new vF(t))}class AX{constructor(e,n,r,i,s){this.injector=e,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Cp(this.urlTree.root,[],[],this.config).segmentGroup,n=new le(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,n,oe).pipe(he(s=>this.createUrlTree(_p(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(as(s=>{if(s instanceof vF)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Tp?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,oe).pipe(he(i=>this.createUrlTree(_p(i),e.queryParams,e.fragment))).pipe(as(i=>{throw i instanceof Tp?this.noMatchError(i):i}))}noMatchError(e){return new A(4002,Dp)}createUrlTree(e,n,r){const i=Jw(e);return new so(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(he(s=>new le([],s))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return at(i).pipe(io(s=>{const o=r.children[s],a=fF(n,s);return this.expandSegmentGroup(e,a,o,s).pipe(he(u=>({segment:u,outlet:s})))}),k1((s,o)=>(s[o.outlet]=o.segment,s),{}),P1())}expandSegment(e,n,r,i,s,o){return at(r).pipe(io(a=>this.expandSegmentAgainstRoute(e,n,r,a,i,s,o).pipe(as(l=>{if(l instanceof Tp)return $(null);throw l}))),os(a=>!!a),as((a,u)=>{if(fI(a))return yF(n,i,s)?$(new le([],{})):Sc(n);throw a}))}expandSegmentAgainstRoute(e,n,r,i,s,o,a){return _F(i,n,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o):Sc(n):Sc(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wF(s):this.lineralizeSegments(r,s).pipe(Lt(o=>{const a=new le(o,{});return this.expandSegment(e,a,n,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:c}=gI(n,i,s);if(!a)return Sc(n);const d=this.applyRedirectCommands(u,i.redirectTo,c);return i.redirectTo.startsWith("/")?wF(d):this.lineralizeSegments(i,d).pipe(Lt(h=>this.expandSegment(e,n,r,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){return"**"===r.path?(e=hF(r,e),r.loadChildren?(r._loadedRoutes?$({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(he(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new le(i,{})))):$(new le(i,{}))):mF(n,r,i,e).pipe(zr(({matched:o,consumedSegments:a,remainingSegments:u})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe(Lt(c=>{const d=c.injector??e,h=c.routes,{segmentGroup:f,slicedSegments:p}=Cp(n,a,u,h),g=new le(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(he(y=>new le(a,y)));if(0===h.length&&0===p.length)return $(new le(a,{}));const _=dr(r)===s;return this.expandSegment(d,g,h,p,_?oe:s,!0).pipe(he(E=>new le(a.concat(E.segments),E.children)))})):Sc(n)))}getChildConfig(e,n,r){return n.children?$({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?$({routes:n._loadedRoutes,injector:n._loadedInjector}):function vX(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?$(!0):$(i.map(o=>{const a=lu(o,t);return us(function sX(t){return t&&Tc(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(cu(),gF())}(e,n,r).pipe(Lt(i=>i?this.configLoader.loadChildren(e,n).pipe(Vt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function TX(t){return fc(uF(Dp,3))}())):$({routes:[],injector:e})}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return $(r);if(i.numberOfChildren>1||!i.children[oe])return fc(new A(4e3,Dp));i=i.children[oe]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new so(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Ut(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Ut(n.children,(a,u)=>{o[u]=this.createSegmentGroup(e,a,r,i)}),new le(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new A(4001,Dp);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}class MX{}class kX{constructor(e,n,r,i,s,o,a,u){this.injector=e,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=u}recognize(){const e=Cp(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,oe).pipe(he(n=>{if(null===n)return null;const r=new vp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},oe,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Si(r,n),s=new sF(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const n=e.value,r=iF(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i)}processChildren(e,n,r){return at(Object.keys(r.children)).pipe(io(i=>{const s=r.children[i],o=fF(n,i);return this.processSegmentGroup(e,o,s,i)}),k1((i,s)=>i&&s?(i.push(...s),i):null),function J9(t,e=!1){return bt((n,r)=>{let i=0;n.subscribe(gt(r,s=>{const o=t(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),dp(null),P1(),he(i=>{if(null===i)return null;const s=IF(i);return function PX(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(e,n,r,i,s){return at(n).pipe(io(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),os(o=>!!o),as(o=>{if(fI(o))return yF(r,i,s)?$([]):$(null);throw o}))}processSegmentAgainstRoute(e,n,r,i,s){if(n.redirectTo||!_F(n,r,i,s))return $(null);let o;if("**"===n.path){const a=i.length>0?L1(i).parameters:{},u=CF(r)+i.length;o=$({snapshot:new vp(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,DF(n),dr(n),n.component??n._loadedComponent??null,n,EF(r),u,TF(n),u),consumedSegments:[],remainingSegments:[]})}else o=mF(r,n,i,e).pipe(he(({matched:a,consumedSegments:u,remainingSegments:l,parameters:c})=>{if(!a)return null;const d=CF(r)+u.length;return{snapshot:new vp(u,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,DF(n),dr(n),n.component??n._loadedComponent??null,n,EF(r),d,TF(n),d),consumedSegments:u,remainingSegments:l}}));return o.pipe(zr(a=>{if(null===a)return $(null);const{snapshot:u,consumedSegments:l,remainingSegments:c}=a;e=n._injector??e;const d=n._loadedInjector??e,h=function OX(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(n),{segmentGroup:f,slicedSegments:p}=Cp(r,l,c,h.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution);if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(he(_=>null===_?null:[new Si(u,_)]));if(0===h.length&&0===p.length)return $([new Si(u,[])]);const g=dr(n)===s;return this.processSegment(d,h,f,p,g?oe:s).pipe(he(_=>null===_?null:[new Si(u,_)]))}))}}function FX(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function IF(t){const e=[],n=new Set;for(const r of t){if(!FX(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=IF(r.children);e.push(new Si(r.value,i))}return e.filter(r=>!n.has(r))}function EF(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function CF(t){let e=t,n=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift??0;return n-1}function DF(t){return t.data||{}}function TF(t){return t.resolve||{}}function SF(t){return"string"==typeof t.title||null===t.title}function mI(t){return zr(e=>{const n=t(e);return n?at(n).pipe(he(()=>e)):$(e)})}let AF=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===oe);return r}getResolvedTitleForRoute(n){return n.data[gc]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:function(){return nt(xF)},providedIn:"root"}),t})(),xF=(()=>{class t extends AF{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)(B(E1))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class GX{}class qX extends class WX{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const Ap=new U("",{providedIn:"root",factory:()=>({})}),_I=new U("ROUTES");let yI=(()=>{class t{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return $(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=us(n.loadComponent()).pipe(Vt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Qw(()=>{this.componentLoaders.delete(n)})),i=new N1(r,()=>new Fr).pipe(zw());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(he(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,l,c=!1;Array.isArray(a)?l=a:(u=a.create(n).injector,l=F1(u.get(_I,[],H.Self|H.Optional)));return{routes:l.map(hI),injector:u}}),Qw(()=>{this.childrenLoaders.delete(r)})),o=new N1(s,()=>new Fr).pipe(zw());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(n){return us(n()).pipe(Lt(r=>r instanceof mP||Array.isArray(r)?$(r):at(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)(B(tn),B(uw))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class KX{}class QX{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function YX(t){throw t}function ZX(t,e,n){return e.parse("/")}const XX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function NF(){const t=nt(H1),e=nt(Ec),n=nt(Cw),r=nt(tn),i=nt(uw),s=nt(_I,{optional:!0})??[],o=nt(Ap,{optional:!0})??{},a=nt(xF),u=nt(AF,{optional:!0}),l=nt(KX,{optional:!0}),c=nt(GX,{optional:!0}),d=new Bt(null,t,e,n,r,i,F1(s));return l&&(d.urlHandlingStrategy=l),c&&(d.routeReuseStrategy=c),d.titleStrategy=u??a,function eJ(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(e.canceledNavigationResolution=t.canceledNavigationResolution)}(o,d),d}let Bt=(()=>{class t{constructor(n,r,i,s,o,a,u){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fr,this.errorHandler=YX,this.malformedUriErrorHandler=ZX,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>$(void 0),this.urlHandlingStrategy=new QX,this.routeReuseStrategy=new qX,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(yI),this.configLoader.onLoadEndListener=h=>this.triggerEvent(new OZ(h)),this.configLoader.onLoadStartListener=h=>this.triggerEvent(new PZ(h)),this.ngModule=o.get(to),this.console=o.get(k5);const d=o.get($e);this.isNgZoneEnabled=d instanceof $e&&$e.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function iZ(){return new so(new le([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=rF(this.currentUrlTree,this.rootComponentType),this.transitions=new xr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(ss(i=>0!==i.id),he(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),zr(i=>{let s=!1,o=!1;return $(i).pipe(Vt(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zr(a=>{const u=this.browserUrlTree.toString(),l=!this.navigated||a.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return RF(a.source)&&(this.browserUrlTree=a.extractedUrl),$(a).pipe(zr(d=>{const h=this.transitions.getValue();return r.next(new rI(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?ci:Promise.resolve(d)}),function xX(t,e,n,r){return zr(i=>function SX(t,e,n,r,i){return new AX(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(he(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Vt(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},i.urlAfterRedirects=d.urlAfterRedirects}),function VX(t,e,n,r,i,s){return Lt(o=>function RX(t,e,n,r,i,s,o="emptyOnly",a="legacy"){return new kX(t,e,n,r,i,o,a,s).recognize().pipe(zr(u=>null===u?function NX(t){return new qe(e=>e.error(t))}(new MX):$(u)))}(t,e,n,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i,s).pipe(he(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Vt(d=>{if(i.targetSnapshot=d.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new xZ(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:_}=a,I=new rI(h,this.serializeUrl(f),p,g);r.next(I);const E=rF(f,this.rootComponentType).snapshot;return $(i={...a,targetSnapshot:E,urlAfterRedirects:f,extras:{..._,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),ci}),Vt(a=>{const u=new MZ(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(u)}),he(a=>i={...a,guards:eX(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function dX(t,e){return Lt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?$({...n,guardsResult:!0}):function hX(t,e,n,r){return at(t).pipe(Lt(i=>function yX(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?$(s.map(a=>{const u=Cc(e)??i,l=lu(a,u);return us(function uX(t){return t&&Tc(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(os())})).pipe(cu()):$(!0)}(i.component,i.route,n,e,r)),os(i=>!0!==i,!0))}(o,r,i,t).pipe(Lt(a=>a&&function iX(t){return"boolean"==typeof t}(a)?function fX(t,e,n,r){return at(e).pipe(io(i=>qw(function gX(t,e){return null!==t&&e&&e(new FZ(t)),$(!0)}(i.route.parent,r),function pX(t,e){return null!==t&&e&&e(new VZ(t)),$(!0)}(i.route,r),function _X(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function tX(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>M1(()=>$(o.guards.map(u=>{const l=Cc(o.node)??n,c=lu(u,l);return us(function aX(t){return t&&Tc(t.canActivateChild)}(c)?c.canActivateChild(r,t):l.runInContext(()=>c(r,t))).pipe(os())})).pipe(cu())));return $(s).pipe(cu())}(t,i.path,n),function mX(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return $(!0);const i=r.map(s=>M1(()=>{const o=Cc(e)??n,a=lu(s,o);return us(function oX(t){return t&&Tc(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(os())}));return $(i).pipe(cu())}(t,i.route,n))),os(i=>!0!==i,!0))}(r,s,t,e):$(a)),he(a=>({...n,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Vt(a=>{if(i.guardsResult=a.guardsResult,ao(a.guardsResult))throw aF(0,a.guardsResult);const u=new NZ(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(u)}),ss(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),mI(a=>{if(a.guards.canActivateChecks.length)return $(a).pipe(Vt(u=>{const l=new RZ(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(l)}),zr(u=>{let l=!1;return $(u).pipe(function UX(t,e){return Lt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return $(n);let s=0;return at(i).pipe(io(o=>function BX(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!SF(i)&&(s[gc]=i.title),function $X(t,e,n,r){const i=function jX(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return $({});const s={};return at(i).pipe(Lt(o=>function HX(t,e,n,r){const i=Cc(e)??r,s=lu(t,i);return us(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(os(),Vt(a=>{s[o]=a}))),Kw(1),function eZ(t){return he(()=>t)}(s),as(o=>fI(o)?ci:fc(o)))}(s,t,e,r).pipe(he(o=>(t._resolvedData=o,t.data=iF(t,n).resolve,i&&SF(i)&&(t.data[gc]=i.title),null)))}(o.route,r,t,e)),Vt(()=>s++),Kw(1),Lt(o=>s===i.length?$(n):ci))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Vt({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),Vt(u=>{const l=new kZ(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(l)}))}),mI(a=>{const u=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Vt(d=>{l.component=d}),he(()=>{})));for(const d of l.children)c.push(...u(d));return c};return A1(u(a.targetSnapshot.root)).pipe(dp(),pc(1))}),mI(()=>this.afterPreactivation()),he(a=>{const u=function HZ(t,e,n){const r=Ic(t,e._root,n?n._root:void 0);return new nF(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return i={...a,targetRouterState:u}}),Vt(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((t,e,n)=>he(r=>(new JZ(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Vt({next(){s=!0},complete(){s=!0}}),Qw(()=>{s||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),as(a=>{if(o=!0,cF(a)){lF(a)||(this.navigated=!0,this.restoreHistory(i,!0));const u=new yp(i.id,this.serializeUrl(i.extractedUrl),a.message,a.cancellationCode);if(r.next(u),lF(a)){const l=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||RF(i.source)};this.scheduleNavigation(l,"imperative",null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const u=new J1(i.id,this.serializeUrl(i.extractedUrl),a,i.targetSnapshot??void 0);r.next(u);try{i.resolve(this.errorHandler(a))}catch(l){i.reject(l)}}return ci}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=n.state?.navigationId?n.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const o=this.parseUrl(n.url);this.scheduleNavigation(o,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(hI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=i||this.routerState.root,c=u?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),CZ(l,this.currentUrlTree,n,d,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=ao(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function tJ(t){for(let e=0;e<t.length;e++){if(null==t[e])throw new A(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...XX}:!1===r?{...JX}:r,ao(n))return U1(this.currentUrlTree,n,i);const s=this.parseUrl(n);return U1(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new uo(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((h,f)=>{a=h,u=f});const c=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),d=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:c,targetPageId:d,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r,i){const s=new yp(n.id,this.serializeUrl(n.extractedUrl),r,i);this.triggerEvent(s),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){iv()},t.\u0275prov=te({token:t,factory:function(){return NF()},providedIn:"root"}),t})();function RF(t){return"imperative"!==t}class kF{}let iJ=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ss(n=>n instanceof uo),io(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Of(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return at(i).pipe(ga())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):$(null);const s=i.pipe(Lt(o=>null===o?$(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?at([s,this.loader.loadComponent(r)]).pipe(ga()):s})}}return t.\u0275fac=function(n){return new(n||t)(B(Bt),B(uw),B(Xi),B(kF),B(yI))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const II=new U("");let PF=(()=>{class t{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof rI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof uo&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof eF&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new eF(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){iv()},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();function du(t,e){return{\u0275kind:t,\u0275providers:e}}function EI(t){return[{provide:_I,multi:!0,useValue:t}]}function FF(){const t=nt(tn);return e=>{const n=t.get(Hf);if(e!==n.components[0])return;const r=t.get(Bt),i=t.get(LF);1===t.get(CI)&&r.initialNavigation(),t.get(VF,null,H.Optional)?.setUpPreloading(),t.get(II,null,H.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.next(),i.complete()}}const LF=new U("",{factory:()=>new Fr}),CI=new U("",{providedIn:"root",factory:()=>1});const VF=new U("");function uJ(t){return du(0,[{provide:VF,useExisting:iJ},{provide:kF,useExisting:t}])}const UF=new U("ROUTER_FORROOT_GUARD"),lJ=[Cw,{provide:H1,useClass:Zw},{provide:Bt,useFactory:NF},Ec,{provide:lo,useFactory:function OF(t){return t.routerState.root},deps:[Bt]},yI];function cJ(){return new fO("Router",Bt)}let BF=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[lJ,[],EI(n),{provide:UF,useFactory:pJ,deps:[[Bt,new lt,new Fl]]},{provide:Ap,useValue:r||{}},r?.useHash?{provide:ro,useClass:IQ}:{provide:ro,useClass:VO},{provide:II,useFactory:()=>{const t=nt(Bt),e=nt(jY),n=nt(Ap);return n.scrollOffset&&e.setOffset(n.scrollOffset),new PF(t,e,n)}},r?.preloadingStrategy?uJ(r.preloadingStrategy).\u0275providers:[],{provide:fO,multi:!0,useFactory:cJ},r?.initialNavigation?gJ(r):[],[{provide:$F,useFactory:FF},{provide:oO,multi:!0,useExisting:$F}]]}}static forChild(n){return{ngModule:t,providers:[EI(n)]}}}return t.\u0275fac=function(n){return new(n||t)(B(UF,8))},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({imports:[cI]}),t})();function pJ(t){return"guarded"}function gJ(t){return["disabled"===t.initialNavigation?du(3,[{provide:Uf,multi:!0,useFactory:()=>{const e=nt(Bt);return()=>{e.setUpLocationChangeListener()}}},{provide:CI,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?du(2,[{provide:CI,useValue:0},{provide:Uf,multi:!0,deps:[tn],useFactory:e=>{const n=e.get(vQ,Promise.resolve());let r=!1;return()=>n.then(()=>new Promise(s=>{const o=e.get(Bt),a=e.get(LF);(function i(s){e.get(Bt).events.pipe(ss(a=>a instanceof uo||a instanceof yp||a instanceof J1),he(a=>a instanceof uo||a instanceof yp&&(0===a.code||1===a.code)&&null),ss(a=>null!==a),pc(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),o.afterPreactivation=()=>(s(!0),r||a.closed?$(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const $F=new U(""),_J=[];let yJ=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({imports:[BF.forRoot(_J),BF]}),t})();function jF(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(l){return void n(l)}a.done?e(u):Promise.resolve(u).then(r,i)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){jF(s,r,i,o,a,"next",u)}function a(u){jF(s,r,i,o,a,"throw",u)}o(void 0)})}}const N=function(t,e){if(!t)throw hu(e)},hu=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},HF=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Rp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0;let h=(15&a)<<2|l>>6,f=63&l;u||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==l||null==d)throw Error();r.push(s<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==d&&r.push(l<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},GF=function(t){const e=HF(t);return Rp.encodeByteArray(e,!0)},kp=function(t){return GF(t).replace(/\./g,"")},DI=function(t){try{return Rp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wJ(t){return WF(void 0,t)}function WF(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!IJ(n)||(t[n]=WF(t[n],e[n]));return t}function IJ(t){return"__proto__"!==t}class fu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Tt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function Op(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function TI(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qF(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function co(){return"object"==typeof indexedDB}function Ac(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function SI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qr.prototype.create)}}class Qr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function TJ(t,e){return t.replace(SJ,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new hr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const SJ=/\{\$([^}]+)}/g;function xc(t){return JSON.parse(t)}function $t(t){return JSON.stringify(t)}const Fp=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=xc(DI(s[0])||""),n=xc(DI(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};function xi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pu(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function AI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lp(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Vp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(zF(s)&&zF(o)){if(!Vp(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zF(t){return null!==t&&"object"==typeof t}function Mc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class MJ{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let l,c,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),c=1518500249):(l=s^o^a,c=1859775393):d<60?(l=s&o|a&(s|o),c=2400959708):(l=s^o^a,c=3395469782);const h=(i<<5|i>>>27)+l+u+c+r[d]&4294967295;u=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class RJ{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function kJ(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=xI),void 0===i.error&&(i.error=xI),void 0===i.complete&&(i.complete=xI);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xI(){}const Bp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function MI(t,e=1e3,n=2){const r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Yn(t){return t&&t._delegate?t._delegate:t}class jt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ho="[DEFAULT]";class BJ{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function jJ(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return m(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===ho?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class HJ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BJ(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const NI=[];var fe=(()=>{return(t=fe||(fe={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",fe;var t})();const KF={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},GJ=fe.INFO,WJ={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},qJ=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=WJ[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class fo{constructor(e){this.name=e,this._logLevel=GJ,this._logHandler=qJ,this._userLogHandler=null,NI.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?KF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}let QF,YF;const ZF=new WeakMap,RI=new WeakMap,XF=new WeakMap,kI=new WeakMap,PI=new WeakMap;let OI={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return RI.get(t);if("objectStoreNames"===e)return t.objectStoreNames||XF.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mi(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function eee(t){return"function"==typeof t?function JJ(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function QJ(){return YF||(YF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(FI(this),e),Mi(ZF.get(this))}:function(...e){return Mi(t.apply(FI(this),e))}:function(e,...n){const r=t.call(FI(this),e,...n);return XF.set(r,e.sort?e.sort():[e]),Mi(r)}}(t):(t instanceof IDBTransaction&&function ZJ(t){if(RI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});RI.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function KJ(){return QF||(QF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,OI):t)}function Mi(t){if(t instanceof IDBRequest)return function YJ(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Mi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ZF.set(n,t)}).catch(()=>{}),PI.set(e,t),e}(t);if(kI.has(t))return kI.get(t);const e=eee(t);return e!==t&&(kI.set(t,e),PI.set(e,t)),e}const FI=t=>PI.get(t);function $p(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Mi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Mi(o.result),u.oldVersion,u.newVersion,Mi(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function LI(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Mi(n).then(()=>{})}const tee=["get","getKey","getAll","getAllKeys","count"],nee=["put","add","delete","clear"],VI=new Map;function JF(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(VI.get(e))return VI.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=nee.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!tee.includes(n))return;const s=function(){var o=m(function*(a,...u){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(yield Promise.all([c[n](...u),i&&l.done]))[0]});return function(u){return o.apply(this,arguments)}}();return VI.set(e,s),s}!function XJ(t){OI=t(OI)}(t=>({...t,get:(e,n,r)=>JF(e,n)||t.get(e,n,r),has:(e,n)=>!!JF(e,n)||t.has(e,n)}));class ree{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function iee(t){return"VERSION"===t.getComponent()?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const UI="@firebase/app",po=new fo("@firebase/app"),BI="[DEFAULT]",Mee={[UI]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},go=new Map,jp=new Map;function Nee(t,e){try{t.container.addComponent(e)}catch(n){po.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sn(t){const e=t.name;if(jp.has(e))return po.debug(`There were multiple attempts to register component ${e}.`),!1;jp.set(e,t);for(const n of go.values())Nee(n,t);return!0}function mo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ls=new Qr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kee{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}const _o="9.9.4";function Pee(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:BI,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw ls.create("bad-app-name",{appName:String(r)});const i=go.get(r);if(i){if(Vp(t,i.options)&&Vp(n,i.config))return i;throw ls.create("duplicate-app",{appName:r})}const s=new HJ(r);for(const a of jp.values())s.addComponent(a);const o=new kee(t,n,s);return go.set(r,o),o}function Hp(t=BI){const e=go.get(t);if(!e)throw ls.create("no-app",{appName:t});return e}function tL(){return Array.from(go.values())}function Ve(t,e,n){var r;let i=null!==(r=Mee[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void po.warn(a.join(" "))}sn(new jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Nc="firebase-heartbeat-store";let jI=null;function nL(){return jI||(jI=$p("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Nc)}}).catch(t=>{throw ls.create("idb-open",{originalErrorMessage:t.message})})),jI}function HI(){return(HI=m(function*(t){var e;try{return(yield nL()).transaction(Nc).objectStore(Nc).get(iL(t))}catch(n){if(n instanceof hr)po.warn(n.message);else{const r=ls.create("idb-get",{originalErrorMessage:null===(e=n)||void 0===e?void 0:e.message});po.warn(r.message)}}})).apply(this,arguments)}function rL(t,e){return GI.apply(this,arguments)}function GI(){return(GI=m(function*(t,e){var n;try{const i=(yield nL()).transaction(Nc,"readwrite");return yield i.objectStore(Nc).put(e,iL(t)),i.done}catch(r){if(r instanceof hr)po.warn(r.message);else{const i=ls.create("idb-set",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message});po.warn(i.message)}}})).apply(this,arguments)}function iL(t){return`${t.name}!${t.options.appId}`}class Bee{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jee(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return m(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=sL();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return m(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=sL(),{heartbeatsToSend:r,unsentEntries:i}=function $ee(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),oL(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),oL(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=kp(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function sL(){return(new Date).toISOString().substring(0,10)}class jee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!co()&&Ac().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return m(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Lee(t){return HI.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return rL(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return rL(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function oL(t){return kp(JSON.stringify({version:2,heartbeats:t})).length}!function Hee(t){sn(new jt("platform-logger",e=>new ree(e),"PRIVATE")),sn(new jt("heartbeat",e=>new Bee(e),"PRIVATE")),Ve(UI,"0.7.32",t),Ve(UI,"0.7.32","esm2017"),Ve("fire-js","")}(""),Ve("firebase","9.9.4","app");const aL="@firebase/installations",WI="0.5.12",lL=`w:${WI}`,cL="FIS_v2",Ni=new Qr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dL(t){return t instanceof hr&&t.code.includes("request-failed")}function qI({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function hL(t){return{token:t.token,requestStatus:2,expiresIn:Zee(t.expiresIn),creationTime:Date.now()}}function zI(t,e){return KI.apply(this,arguments)}function KI(){return(KI=m(function*(t,e){const r=(yield e.json()).error;return Ni.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function fL({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function pL(t,{refreshToken:e}){const n=fL(t);return n.append("Authorization",function Xee(t){return`${cL} ${t}`}(e)),n}function QI(t){return YI.apply(this,arguments)}function YI(){return(YI=m(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function Zee(t){return Number(t.replace("s","000"))}function Jee(t,e){return ZI.apply(this,arguments)}function ZI(){return(ZI=m(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=qI(t),i=fL(t),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:cL,appId:t.appId,sdkVersion:lL})},u=yield QI(()=>fetch(r,a));if(u.ok){const l=yield u.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:hL(l.authToken)}}throw yield zI("Create Installation",u)})).apply(this,arguments)}function gL(t){return new Promise(e=>{setTimeout(e,t)})}const tte=/^[cdef][\w-]{21}$/;function nte(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function rte(t){return function ete(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return tte.test(n)?n:""}catch{return""}}function gu(t){return`${t.appName}!${t.appId}`}const mu=new Map;function mL(t,e){const n=gu(t);_L(n,e),function ote(t,e){const n=function yL(){return!yo&&"BroadcastChannel"in self&&(yo=new BroadcastChannel("[Firebase] FID Change"),yo.onmessage=t=>{_L(t.data.key,t.data.fid)}),yo}();n&&n.postMessage({key:t,fid:e}),function vL(){0===mu.size&&yo&&(yo.close(),yo=null)}()}(n,e)}function _L(t,e){const n=mu.get(t);if(n)for(const r of n)r(e)}let yo=null;const vo="firebase-installations-store";let JI=null;function eE(){return JI||(JI=$p("firebase-installations-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(vo)}})),JI}function Gp(t,e){return tE.apply(this,arguments)}function tE(){return(tE=m(function*(t,e){const n=gu(t),i=(yield eE()).transaction(vo,"readwrite"),s=i.objectStore(vo),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&mL(t,e.fid),e})).apply(this,arguments)}function nE(t){return rE.apply(this,arguments)}function rE(){return(rE=m(function*(t){const e=gu(t),r=(yield eE()).transaction(vo,"readwrite");yield r.objectStore(vo).delete(e),yield r.done})).apply(this,arguments)}function Rc(t,e){return iE.apply(this,arguments)}function iE(){return(iE=m(function*(t,e){const n=gu(t),i=(yield eE()).transaction(vo,"readwrite"),s=i.objectStore(vo),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&mL(t,a.fid),a})).apply(this,arguments)}function sE(t){return oE.apply(this,arguments)}function oE(){return(oE=m(function*(t){let e;const n=yield Rc(t.appConfig,r=>{const i=lte(r),s=cte(t,i);return e=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})).apply(this,arguments)}function lte(t){return IL(t||{fid:nte(),registrationStatus:0})}function cte(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ni.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function dte(t,e){return aE.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:hte(t)}:{installationEntry:e}}function aE(){return(aE=m(function*(t,e){try{const n=yield Jee(t,e);return Gp(t.appConfig,n)}catch(n){throw dL(n)&&409===n.customData.serverCode?yield nE(t.appConfig):yield Gp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})).apply(this,arguments)}function hte(t){return uE.apply(this,arguments)}function uE(){return(uE=m(function*(t){let e=yield wL(t.appConfig);for(;1===e.registrationStatus;)yield gL(100),e=yield wL(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield sE(t);return r||n}return e})).apply(this,arguments)}function wL(t){return Rc(t,e=>{if(!e)throw Ni.create("installation-not-found");return IL(e)})}function IL(t){return function fte(t){return 1===t.registrationStatus&&t.registrationTime+1e4<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function pte(t,e){return lE.apply(this,arguments)}function lE(){return(lE=m(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=gte(t,n),i=pL(t,n),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:lL,appId:t.appId}})},u=yield QI(()=>fetch(r,a));if(u.ok)return hL(yield u.json());throw yield zI("Generate Auth Token",u)})).apply(this,arguments)}function gte(t,{fid:e}){return`${qI(t)}/${e}/authTokens:generate`}function cE(t){return dE.apply(this,arguments)}function dE(){return(dE=m(function*(t,e=!1){let n;const r=yield Rc(t.appConfig,s=>{if(!CL(s))throw Ni.create("not-registered");const o=s.authToken;if(!e&&yte(o))return s;if(1===o.requestStatus)return n=mte(t,e),s;{if(!navigator.onLine)throw Ni.create("app-offline");const a=wte(s);return n=_te(t,a),a}});return n?yield n:r.authToken})).apply(this,arguments)}function mte(t,e){return hE.apply(this,arguments)}function hE(){return(hE=m(function*(t,e){let n=yield EL(t.appConfig);for(;1===n.authToken.requestStatus;)yield gL(100),n=yield EL(t.appConfig);const r=n.authToken;return 0===r.requestStatus?cE(t,e):r})).apply(this,arguments)}function EL(t){return Rc(t,e=>{if(!CL(e))throw Ni.create("not-registered");return function Ite(t){return 1===t.requestStatus&&t.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function _te(t,e){return fE.apply(this,arguments)}function fE(){return(fE=m(function*(t,e){try{const n=yield pte(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Gp(t.appConfig,r),n}catch(n){if(!dL(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Gp(t.appConfig,r)}else yield nE(t.appConfig);throw n}})).apply(this,arguments)}function CL(t){return void 0!==t&&2===t.registrationStatus}function yte(t){return 2===t.requestStatus&&!function vte(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}function wte(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function pE(){return(pE=m(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield sE(e);return r?r.catch(console.error):cE(e).catch(console.error),n.fid})).apply(this,arguments)}function gE(){return(gE=m(function*(t,e=!1){const n=t;return yield bte(n),(yield cE(n,e)).token})).apply(this,arguments)}function bte(t){return mE.apply(this,arguments)}function mE(){return(mE=m(function*(t){const{registrationPromise:e}=yield sE(t);e&&(yield e)})).apply(this,arguments)}function vE(t){return Ni.create("missing-app-config-values",{valueName:t})}const bL="installations",xte=t=>{const e=t.getProvider("app").getImmediate(),n=function Ste(t){if(!t||!t.options)throw vE("App Configuration");if(!t.name)throw vE("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw vE(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:mo(e,"heartbeat"),_delete:()=>Promise.resolve()}},Mte=t=>{const n=mo(t.getProvider("app").getImmediate(),bL).getImmediate();return{getId:()=>function Ete(t){return pE.apply(this,arguments)}(n),getToken:i=>function Cte(t){return gE.apply(this,arguments)}(n,i)}};(function Nte(){sn(new jt(bL,xte,"PUBLIC")),sn(new jt("installations-internal",Mte,"PRIVATE"))})(),Ve(aL,WI),Ve(aL,WI,"esm2017");const wE="@firebase/remote-config",Rn=new Qr("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class jte{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function Hte(t=navigator){return t.languages&&t.languages[0]||t.language}class Gte{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return m(function*(){var r,i,s;const[o,a]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},d={sdk_version:n.sdkVersion,app_instance_id:o,app_instance_id_token:a,app_id:n.appId,language_code:Hte()},h={method:"POST",headers:c,body:JSON.stringify(d)},f=fetch(l,h),p=new Promise((S,k)=>{e.signal.addEventListener(()=>{const V=new Error("The operation was aborted.");V.name="AbortError",k(V)})});let g;try{yield Promise.race([f,p]),g=yield f}catch(S){let k="fetch-client-network";throw"AbortError"===(null===(r=S)||void 0===r?void 0:r.name)&&(k="fetch-timeout"),Rn.create(k,{originalErrorMessage:null===(i=S)||void 0===i?void 0:i.message})}let _=g.status;const I=g.headers.get("ETag")||void 0;let E,y;if(200===g.status){let S;try{S=yield g.json()}catch(k){throw Rn.create("fetch-client-parse",{originalErrorMessage:null===(s=k)||void 0===s?void 0:s.message})}E=S.entries,y=S.state}if("INSTANCE_STATE_UNSPECIFIED"===y?_=500:"NO_CHANGE"===y?_=304:("NO_TEMPLATE"===y||"EMPTY_CONFIG"===y)&&(E={}),304!==_&&200!==_)throw Rn.create("fetch-status",{httpStatus:_});return{status:_,eTag:I,config:E}})()}}class zte{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return m(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return m(function*(){yield function Wte(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Rn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function qte(t){if(!(t instanceof hr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+MI(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class Yte{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qp(t,e){var n;const r=t.target.error||void 0;return Rn.create(e,{originalErrorMessage:r&&(null===(n=r)||void 0===n?void 0:n.message)})}const wo="app_namespace_store";class ene{constructor(e,n,r,i=function Jte(){return new Promise((t,e)=>{var n;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e(qp(i,"storage-open"))},r.onsuccess=i=>{t(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(wo,{keyPath:"compositeKey"})}}catch(r){e(Rn.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{var o;const u=r.transaction([wo],"readonly").objectStore(wo),l=n.createCompositeKey(e);try{const c=u.get(l);c.onerror=d=>{s(qp(d,"storage-get"))},c.onsuccess=d=>{const h=d.target.result;i(h?h.value:void 0)}}catch(c){s(Rn.create("storage-get",{originalErrorMessage:null===(o=c)||void 0===o?void 0:o.message}))}})})()}set(e,n){var r=this;return m(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{var a;const l=i.transaction([wo],"readwrite").objectStore(wo),c=r.createCompositeKey(e);try{const d=l.put({compositeKey:c,value:n});d.onerror=h=>{o(qp(h,"storage-set"))},d.onsuccess=()=>{s()}}catch(d){o(Rn.create("storage-set",{originalErrorMessage:null===(a=d)||void 0===a?void 0:a.message}))}})})()}delete(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{var o;const u=r.transaction([wo],"readwrite").objectStore(wo),l=n.createCompositeKey(e);try{const c=u.delete(l);c.onerror=d=>{s(qp(d,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(Rn.create("storage-delete",{originalErrorMessage:null===(o=c)||void 0===o?void 0:o.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class tne{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return m(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function rne(){return DE.apply(this,arguments)}function DE(){return(DE=m(function*(){if(!co())return!1;try{return yield Ac()}catch{return!1}})).apply(this,arguments)}!function nne(){sn(new jt("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rn.create("registration-window");if(!co())throw Rn.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Rn.create("registration-project-id");if(!o)throw Rn.create("registration-api-key");if(!a)throw Rn.create("registration-app-id");const u=new ene(a,r.name,n=n||"firebase"),l=new tne(u),c=new fo(wE);c.logLevel=fe.ERROR;const d=new Gte(i,_o,n,s,o,a),h=new zte(d,u),f=new jte(h,u,l,c),p=new Yte(r,f,l,u,c);return function Ute(t){const e=Yn(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Ve(wE,"0.3.11"),Ve(wE,"0.3.11","esm2017")}();const ine="/firebase-messaging-sw.js",sne="/firebase-cloud-messaging-push-scope",AL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xL="google.c.a.c_id",ane="google.c.a.c_l",une="google.c.a.ts",lne="google.c.a.e";var _u=(()=>{return(t=_u||(_u={})).PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",_u;var t})();function Ri(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cne(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const TE="fcm_token_details_db",ML="fcm_token_object_Store";function hne(t){return SE.apply(this,arguments)}function SE(){return SE=m(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(TE))return null;let e=null;return(yield $p(TE,5,{upgrade:(r=m(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(ML))return;const l=a.objectStore(ML),c=yield l.index("fcmSenderId").get(t);if(yield l.clear(),c)if(2===s){const d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Ri(d.vapidKey)}}}else if(3===s){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ri(d.auth),p256dh:Ri(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ri(d.vapidKey)}}}else if(4===s){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ri(d.auth),p256dh:Ri(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ri(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield LI(TE),yield LI("fcm_vapid_details_db"),yield LI("undefined"),fne(e)?e:null;var r}),SE.apply(this,arguments)}function fne(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Io="firebase-messaging-store";let AE=null;function xE(){return AE||(AE=$p("firebase-messaging-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Io)}})),AE}function NL(t){return ME.apply(this,arguments)}function ME(){return(ME=m(function*(t){const e=PE(t),r=yield(yield xE()).transaction(Io).objectStore(Io).get(e);if(r)return r;{const i=yield hne(t.appConfig.senderId);if(i)return yield NE(t,i),i}})).apply(this,arguments)}function NE(t,e){return RE.apply(this,arguments)}function RE(){return(RE=m(function*(t,e){const n=PE(t),i=(yield xE()).transaction(Io,"readwrite");return yield i.objectStore(Io).put(e,n),yield i.done,e})).apply(this,arguments)}function mne(t){return kE.apply(this,arguments)}function kE(){return(kE=m(function*(t){const e=PE(t),r=(yield xE()).transaction(Io,"readwrite");yield r.objectStore(Io).delete(e),yield r.done})).apply(this,arguments)}function PE({appConfig:t}){return t.appId}const Ht=new Qr("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function yne(t,e){return OE.apply(this,arguments)}function OE(){return(OE=m(function*(t,e){var n;const r=yield UE(t),i=kL(e),s={method:"POST",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(VE(t.appConfig),s)).json()}catch(a){throw Ht.create("token-subscribe-failed",{errorInfo:null===(n=a)||void 0===n?void 0:n.toString()})}if(o.error)throw Ht.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Ht.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function vne(t,e){return FE.apply(this,arguments)}function FE(){return(FE=m(function*(t,e){var n;const r=yield UE(t),i=kL(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(`${VE(t.appConfig)}/${e.token}`,s)).json()}catch(a){throw Ht.create("token-update-failed",{errorInfo:null===(n=a)||void 0===n?void 0:n.toString()})}if(o.error)throw Ht.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Ht.create("token-update-no-token");return o.token})).apply(this,arguments)}function RL(t,e){return LE.apply(this,arguments)}function LE(){return(LE=m(function*(t,e){var n;const i={method:"DELETE",headers:yield UE(t)};try{const o=yield(yield fetch(`${VE(t.appConfig)}/${e}`,i)).json();if(o.error)throw Ht.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(s){throw Ht.create("token-unsubscribe-failed",{errorInfo:null===(n=s)||void 0===n?void 0:n.toString()})}})).apply(this,arguments)}function VE({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}function UE(t){return BE.apply(this,arguments)}function BE(){return(BE=m(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function kL({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==AL&&(i.web.applicationPubKey=r),i}function Ine(t){return $E.apply(this,arguments)}function $E(){return($E=m(function*(t){const e=yield Cne(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ri(e.getKey("auth")),p256dh:Ri(e.getKey("p256dh"))},r=yield NL(t.firebaseDependencies);if(r){if(bne(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?Ene(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield RL(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return OL(t.firebaseDependencies,n)}return OL(t.firebaseDependencies,n)})).apply(this,arguments)}function PL(t){return jE.apply(this,arguments)}function jE(){return(jE=m(function*(t){const e=yield NL(t.firebaseDependencies);e&&(yield RL(t.firebaseDependencies,e.token),yield mne(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function Ene(t,e){return HE.apply(this,arguments)}function HE(){return(HE=m(function*(t,e){try{const n=yield vne(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield NE(t.firebaseDependencies,r),n}catch(n){throw yield PL(t),n}})).apply(this,arguments)}function OL(t,e){return GE.apply(this,arguments)}function GE(){return(GE=m(function*(t,e){const r={token:yield yne(t,e),createTime:Date.now(),subscriptionOptions:e};return yield NE(t,r),r.token})).apply(this,arguments)}function Cne(t,e){return WE.apply(this,arguments)}function WE(){return(WE=m(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cne(e)})})).apply(this,arguments)}function bne(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}function FL(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function Dne(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}(e,t),function Tne(t,e){!e.data||(t.data=e.data)}(e,t),function Sne(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function Ane(t){return"object"==typeof t&&!!t&&xL in t}function LL(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function qE(t){return Ht.create("missing-app-config-values",{valueName:t})}LL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),LL("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mne{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function xne(t){if(!t||!t.options)throw qE("App Configuration Object");if(!t.name)throw qE("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw qE(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function VL(t){return zE.apply(this,arguments)}function zE(){return(zE=m(function*(t){var e;try{t.swRegistration=yield navigator.serviceWorker.register(ine,{scope:sne}),t.swRegistration.update().catch(()=>{})}catch(n){throw Ht.create("failed-service-worker-registration",{browserErrorMessage:null===(e=n)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function Nne(t,e){return KE.apply(this,arguments)}function KE(){return(KE=m(function*(t,e){if(!e&&!t.swRegistration&&(yield VL(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Ht.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function Rne(t,e){return QE.apply(this,arguments)}function QE(){return(QE=m(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=AL)})).apply(this,arguments)}function YE(){return(YE=m(function*(t,e){if(!navigator)throw Ht.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ht.create("permission-blocked");return yield Rne(t,e?.vapidKey),yield Nne(t,e?.serviceWorkerRegistration),Ine(t)})).apply(this,arguments)}function kne(t,e,n){return ZE.apply(this,arguments)}function ZE(){return(ZE=m(function*(t,e,n){const r=Pne(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[xL],message_name:n[ane],message_time:n[une],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Pne(t){switch(t){case _u.NOTIFICATION_CLICKED:return"notification_open";case _u.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function XE(){return(XE=m(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===_u.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(FL(n)):t.onMessageHandler.next(FL(n)));const r=n.data;Ane(r)&&"1"===r[lne]&&(yield kne(t,n.messageType,r))})).apply(this,arguments)}const BL="@firebase/messaging",Fne=t=>{const e=new Mne(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function One(t,e){return XE.apply(this,arguments)}(e,n)),e},Lne=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function UL(t,e){return YE.apply(this,arguments)}(e,r)}};function jL(){return JE.apply(this,arguments)}function JE(){return(JE=m(function*(){try{yield Ac()}catch{return!1}return typeof window<"u"&&co()&&SI()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vne(){sn(new jt("messaging",Fne,"PUBLIC")),sn(new jt("messaging-internal",Lne,"PRIVATE")),Ve(BL,"0.9.16"),Ve(BL,"0.9.16","esm2017")}();const zp="analytics",$ne="firebase_id",Gne="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",HL="https://www.googletagmanager.com/gtag/js",Gt=new fo("@firebase/analytics");function GL(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Wne(t,e){const n=document.createElement("script");n.src=`${HL}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function zne(t,e,n,r,i,s){return nC.apply(this,arguments)}function nC(){return(nC=m(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield GL(n)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){Gt.error(a)}t("config",i,s)})).apply(this,arguments)}function Kne(t,e,n,r,i){return rC.apply(this,arguments)}function rC(){return(rC=m(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield GL(n);for(const u of o){const l=a.find(d=>d.measurementId===u),c=l&&e[l.appId];if(!c){s=[];break}s.push(c)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){Gt.error(s)}})).apply(this,arguments)}function Zne(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(HL))return e;return null}const Zn=new Qr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),WL=new class tre{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function nre(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function rre(t){return iC.apply(this,arguments)}function iC(){return(iC=m(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:nre(r)},s=Gne.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw Zn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function ire(t){return sC.apply(this,arguments)}function sC(){return(sC=m(function*(t,e=WL,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Zn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Zn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new are;return setTimeout(m(function*(){a.abort()}),void 0!==n?n:6e4),qL({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function qL(t,e,n){return oC.apply(this,arguments)}function oC(){return(oC=m(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=WL){var s,o;const{appId:a,measurementId:u}=t;try{yield sre(r,e)}catch(l){if(u)return Gt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${null===(s=l)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:u};throw l}try{const l=yield rre(t);return i.deleteThrottleMetadata(a),l}catch(l){const c=l;if(!ore(c)){if(i.deleteThrottleMetadata(a),u)return Gt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:a,measurementId:u};throw l}const d=503===Number(null===(o=c?.customData)||void 0===o?void 0:o.httpStatus)?MI(n,i.intervalMillis,30):MI(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(a,h),Gt.debug(`Calling attemptFetch again in ${d} millis`),qL(t,h,r,i)}})).apply(this,arguments)}function sre(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ore(t){if(!(t instanceof hr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}class are{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let aC,fC;function uC(){return(uC=m(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function zL(t){fC=t}function KL(t){aC=t}function fre(){return pC.apply(this,arguments)}function pC(){return(pC=m(function*(){var t;if(!co())return Gt.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Ac()}catch(e){return Gt.warn(Zn.create("indexeddb-unavailable",{errorInfo:null===(t=e)||void 0===t?void 0:t.toString()}).message),!1}return!0})).apply(this,arguments)}function gC(){return(gC=m(function*(t,e,n,r,i,s,o){var a;const u=ire(t);u.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Gt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Gt.error(f)),e.push(u);const l=fre().then(f=>{if(f)return r.getId()}),[c,d]=yield Promise.all([u,l]);Zne()||Wne(s,c.measurementId),fC&&(i("consent","default",fC),zL(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[$ne]=d),i("config",c.measurementId,h),aC&&(i("set",aC),KL(void 0)),c.measurementId})).apply(this,arguments)}class gre{constructor(e){this.app=e}_delete(){return delete ki[this.app.options.appId],Promise.resolve()}}let ki={},QL=[];const YL={};let XL,Pi,Kp="dataLayer",mC=!1;function _re(t,e,n){!function mre(){const t=[];if(Op()&&t.push("This is a browser extension environment."),SI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Zn.create("invalid-analytics-context",{errorInfo:e});Gt.warn(n.message)}}();const r=t.options.appId;if(!r)throw Zn.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Zn.create("no-api-key");Gt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ki[r])throw Zn.create("already-exists",{id:r});if(!mC){!function qne(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Kp);const{wrappedGtag:s,gtagCore:o}=function Yne(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function Qne(t,e,n,r){function s(){return(s=m(function*(o,a,u){try{"event"===o?yield Kne(t,e,n,a,u):"config"===o?yield zne(t,e,n,r,a,u):"consent"===o?t("consent","update",u):t("set",a)}catch(l){Gt.error(l)}})).apply(this,arguments)}return function i(o,a,u){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(ki,QL,YL,Kp,"gtag");Pi=s,XL=o,mC=!0}return ki[r]=function pre(t,e,n,r,i,s,o){return gC.apply(this,arguments)}(t,QL,YL,e,XL,Kp,n),new gre(t)}function vre(){return _C.apply(this,arguments)}function _C(){return(_C=m(function*(){if(Op()||!SI()||!co())return!1;try{return yield Ac()}catch{return!1}})).apply(this,arguments)}const JL="@firebase/analytics";!function Ire(){sn(new jt(zp,(e,{options:n})=>_re(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),sn(new jt("analytics-internal",function t(e){try{const n=e.getProvider(zp).getImmediate();return{logEvent:(r,i,s)=>function wre(t,e,n,r){t=Yn(t),function ure(t,e,n,r,i){return uC.apply(this,arguments)}(Pi,ki[t.app.options.appId],e,n,r).catch(i=>Gt.error(i))}(n,r,i,s)}}catch(n){throw Zn.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Ve(JL,"0.8.0"),Ve(JL,"0.8.0","esm2017")}();class Ere extends Bn{constructor(e,n){super()}schedule(e,n=0){return this}}const Qp={setInterval(t,e,...n){const{delegate:r}=Qp;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Qp;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class tV extends Ere{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return Qp.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;Qp.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,pa(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const nV={now:()=>(nV.delegate||Date).now(),delegate:void 0};class kc{constructor(e,n=kc.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}kc.now=nV.now;class rV extends kc{constructor(e,n=kc.now){super(e,n),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Dre=new class bre extends rV{}(class Cre extends tV{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}}),Tre=new rV(tV),Pc=new La("7.4.1"),yC="__angularfire_symbol__analyticsIsSupportedValue",vC="__angularfire_symbol__analyticsIsSupported",wC="__angularfire_symbol__remoteConfigIsSupportedValue",IC="__angularfire_symbol__remoteConfigIsSupported",EC="__angularfire_symbol__messagingIsSupportedValue",CC="__angularfire_symbol__messagingIsSupported";function Yp(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[vC]||(globalThis[vC]=vre().then(t=>globalThis[yC]=t).catch(()=>globalThis[yC]=!1)),globalThis[CC]||(globalThis[CC]=jL().then(t=>globalThis[EC]=t).catch(()=>globalThis[EC]=!1)),globalThis[IC]||(globalThis[IC]=rne().then(t=>globalThis[wC]=t).catch(()=>globalThis[wC]=!1));const Zp=(t,e)=>{const n=e?[e]:tL(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function yu(){}class iV{constructor(e,n=Dre){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class Sre{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yu,{},yu,yu)),n.pipe(Vt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xp=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new iV(Zone.current)),this.insideAngular=n.run(()=>new iV(Zone.current,Tre)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(B($e))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Eo(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function Are(t){return Eo().ngZone.runOutsideAngular(()=>t())}function Co(t){return Eo().ngZone.run(()=>t())}function xre(t){return Eo(),function Mre(t){return function(n){return(n=n.lift(new Sre(t.ngZone))).pipe(xh(t.outsideAngular),Ah(t.insideAngular))}}(Eo())(t)}const Nre=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Co(()=>t.apply(void 0,r))},cs=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=Co(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yu,{},yu,yu)))),r[s]=Nre(r[s],n));const i=Are(()=>t.apply(this,r));if(!e){if(i instanceof qe){const s=Eo();return i.pipe(xh(s.outsideAngular),Ah(s.insideAngular))}return Co(()=>i)}return i instanceof qe?i.pipe(xre):i instanceof Promise?Co(()=>new Promise((s,o)=>i.then(a=>Co(()=>s(a)),a=>Co(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Co(()=>i)};class bo{constructor(e){return e}}class Jp{constructor(){return tL()}}const DC=new U("angularfire2._apps"),kre={provide:bo,useFactory:function Rre(t){return t&&1===t.length?t[0]:new bo(Hp())},deps:[[new lt,DC]]},Pre={provide:Jp,deps:[[new lt,DC]]};function Ore(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new bo(r)}}let Fre=(()=>{class t{constructor(n){Ve("angularfire",Pc.full,"core"),Ve("angularfire",Pc.full,"app"),Ve("angular",gN.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(B($f))},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({providers:[kre,Pre]}),t})();function Lre(t,...e){return{ngModule:Fre,providers:[{provide:DC,useFactory:Ore(t),multi:!0,deps:[$e,tn,Xp,...e]}]}}const Vre=cs(Pee,!0),sV=new Map,Ure={activated:!1,tokenObservers:[]},Bre={initialized:!1,enabled:!1};function St(t){return sV.get(t)||Ure}function Mr(t,e){sV.set(t,e)}function eg(){return Bre}class Wre{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return m(function*(){n.stop();try{n.pending=new fu,yield function qre(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new fu,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const vn=new Qr("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function aV(t){if(!St(t).activated)throw vn.create("use-before-activation",{appName:t.name})}function AC(t,e){return xC.apply(this,arguments)}function xC(){return(xC=m(function*({url:t,body:e},n){var r,i;const s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}const a={method:"POST",body:JSON.stringify(e),headers:s};let u,l;try{u=yield fetch(t,a)}catch(f){throw vn.create("fetch-network-error",{originalErrorMessage:null===(r=f)||void 0===r?void 0:r.message})}if(200!==u.status)throw vn.create("fetch-status-error",{httpStatus:u.status});try{l=yield u.json()}catch(f){throw vn.create("fetch-parse-error",{originalErrorMessage:null===(i=f)||void 0===i?void 0:i.message})}const c=l.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw vn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const d=1e3*Number(c[1]),h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})).apply(this,arguments)}function Yre(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Oc="firebase-app-check-store";let rg=null;function lV(){return rg||(rg=new Promise((t,e)=>{var n;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{t(i.target.result)},r.onerror=i=>{var s;e(vn.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Oc,{keyPath:"compositeKey"})}}catch(r){e(vn.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}}),rg)}function MC(){return(MC=m(function*(t,e){const r=(yield lV()).transaction(Oc,"readwrite"),s=r.objectStore(Oc).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(vn.create("storage-set",{originalErrorMessage:null===(l=u.target.error)||void 0===l?void 0:l.message}))}})})).apply(this,arguments)}const Fc=new fo("@firebase/app-check");function fV(t,e){return co()?function eie(t,e){return function cV(t,e){return MC.apply(this,arguments)}(function hV(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{Fc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function pV(){return eg().enabled}function gV(){return PC.apply(this,arguments)}function PC(){return(PC=m(function*(){const t=eg();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const oie={error:"UNKNOWN_ERROR"};function aie(t){return Rp.encodeString(JSON.stringify(t),!1)}function ig(t){return OC.apply(this,arguments)}function OC(){return(OC=m(function*(t,e=!1){const n=t.app;aV(n);const r=St(n);let s,i=r.token;if(!i){const u=yield r.cachedTokenPromise;u&&sg(u)&&(i=u)}if(!e&&i&&sg(i))return{token:i.token};let a,o=!1;if(pV()){r.exchangeTokenPromise||(r.exchangeTokenPromise=AC(Yre(n,yield gV()),t.heartbeatServiceProvider).then(l=>(r.exchangeTokenPromise=void 0,l)),o=!0);const u=yield r.exchangeTokenPromise;return yield fV(n,u),Mr(n,Object.assign(Object.assign({},r),{token:u})),{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(u=>(r.exchangeTokenPromise=void 0,u)),o=!0),i=yield r.exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?Fc.warn(u.message):Fc.error(u),s=u}return i?(a={token:i.token},Mr(n,Object.assign(Object.assign({},r),{token:i})),yield fV(n,i)):a=lie(s),o&&_V(n,a),a})).apply(this,arguments)}function LC(t,e){const n=St(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Mr(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function mV(t){const{app:e}=t,n=St(e);let r=n.tokenRefresher;r||(r=function uie(t){const{app:e}=t;return new Wre(m(function*(){let r;if(r=St(e).token?yield ig(t,!0):yield ig(t),r.error)throw r.error}),()=>!0,()=>{const n=St(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(t),Mr(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function _V(t,e){const n=St(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function sg(t){return t.expireTimeMillis-Date.now()>0}function lie(t){return{token:aie(oie),error:t}}class cie{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=St(this.app);for(const n of e)LC(this.app,n.next);return Promise.resolve()}}const DV="app-check-internal";!function bie(){sn(new jt("app-check",t=>function die(t,e){return new cie(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(DV).initialize()})),sn(new jt(DV,t=>function hie(t){return{getToken:e=>ig(t,e),addTokenListener:e=>function FC(t,e,n,r){const{app:i}=t,s=St(i),o={next:n,error:r,type:e};if(Mr(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&sg(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),mV(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>mV(t))}(t,"INTERNAL",e),removeTokenListener:e=>LC(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Ve("@firebase/app-check","0.5.12")}();class ag{constructor(){return Zp("app-check")}}typeof window<"u"&&window;const xie=function SV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},AV=new Qr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xV=new fo("@firebase/auth");function ug(t,...e){xV.logLevel<=fe.ERROR&&xV.error(`Auth (9.9.4): ${t}`,...e)}function kn(t,...e){throw jC(t,...e)}function Yr(t,...e){return jC(t,...e)}function MV(t,e,n){const r=Object.assign(Object.assign({},xie()),{[e]:n});return new Qr("auth","Firebase",r).create(e,{appName:t.name})}function jC(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return AV.create(t,...e)}function x(t,e,...n){if(!t)throw jC(e,...n)}function Zr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ug(e),new Error(e)}function ds(t,e){t||Zr(e)}const NV=new Map;function Oi(t){ds(t instanceof Function,"Expected a class definition");let e=NV.get(t);return e?(ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,NV.set(t,e),e)}function Lc(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function RV(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class Vc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ds(n>e,"Short delay should be less than long delay!"),this.isMobile=Pp()||TI()}get(){return function Rie(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function HC(){return"http:"===RV()||"https:"===RV()}()||Op()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function GC(t,e){ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class kV{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Oie=new Vc(3e4,6e4);function wt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function At(t,e,n,r){return WC.apply(this,arguments)}function WC(){return(WC=m(function*(t,e,n,r,i={}){return PV(t,i,m(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Mc(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),kV.fetch()(OV(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function PV(t,e,n){return qC.apply(this,arguments)}function qC(){return(qC=m(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Pie),e);try{const i=new Fie(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Uc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw Uc(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw Uc(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw Uc(t,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw MV(t,c,l);kn(t,c)}}catch(i){if(i instanceof hr)throw i;kn(t,"network-request-failed")}})).apply(this,arguments)}function Fi(t,e,n,r){return zC.apply(this,arguments)}function zC(){return(zC=m(function*(t,e,n,r,i={}){const s=yield At(t,e,n,r,i);return"mfaPendingCredential"in s&&kn(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function OV(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?GC(t.config,i):`${t.config.apiScheme}://${i}`}class Fie{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yr(this.auth,"network-request-failed")),Oie.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yr(t,e,r);return i.customData._tokenResponse=n,i}function KC(){return(KC=m(function*(t,e){return At(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function Uie(t,e){return YC.apply(this,arguments)}function YC(){return(YC=m(function*(t,e){return At(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Bc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ZC(){return(ZC=m(function*(t,e=!1){const n=Yn(t),r=yield n.getIdToken(e),i=lg(r);x(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Bc(XC(i.auth_time)),issuedAtTime:Bc(XC(i.iat)),expirationTime:Bc(XC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function XC(t){return 1e3*Number(t)}function lg(t){var e;const[n,r,i]=t.split(".");if(void 0===n||void 0===r||void 0===i)return ug("JWT malformed, contained fewer than 3 sections"),null;try{const s=DI(r);return s?JSON.parse(s):(ug("Failed to decode base64 JWT payload"),null)}catch(s){return ug("Caught error parsing JWT payload as JSON",null===(e=s)||void 0===e?void 0:e.toString()),null}}function Li(t,e){return JC.apply(this,arguments)}function JC(){return(JC=m(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof hr&&jie(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}function jie({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}class Hie{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield n.iteration()}),r)}iteration(){var e=this;return m(function*(){var n;try{yield e.user.getIdToken(!0)}catch(r){return void("auth/network-request-failed"===(null===(n=r)||void 0===n?void 0:n.code)&&e.schedule(!0))}e.schedule()})()}}class FV{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bc(this.lastLoginAt),this.creationTime=Bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $c(t){return eb.apply(this,arguments)}function eb(){return(eb=m(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Li(t,Uie(n,{idToken:r}));x(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?qie(s.providerUserInfo):[],a=Wie(t.providerData,o),c=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new FV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)})).apply(this,arguments)}function tb(){return(tb=m(function*(t){const e=Yn(t);yield $c(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function Wie(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qie(t){return t.map(e=>{var{providerId:n}=e,r=xx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function nb(){return(nb=m(function*(t,e){const n=yield PV(t,{},m(function*(){const r=Mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=OV(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",kV.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class jc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){x(e.idToken,"internal-error"),x(typeof e.idToken<"u","internal-error"),x(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function $ie(t){const e=lg(t);return x(e,"internal-error"),x(typeof e.exp<"u","internal-error"),x(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return m(function*(){return x(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return m(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function zie(t,e){return nb.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new jc;return r&&(x("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(x("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(x("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jc,this.toJSON())}_performRefresh(){return Zr("not implemented")}}function hs(t,e){x("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Do{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=xx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hie(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new FV(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return m(function*(){const r=yield Li(n,n.stsTokenManager.getToken(n.auth,e));return x(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Bie(t){return ZC.apply(this,arguments)}(this,e)}reload(){return function Gie(t){return tb.apply(this,arguments)}(this)}_assign(e){this!==e&&(x(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Do(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return m(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield $c(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return m(function*(){const n=yield e.getIdToken();return yield Li(e,function Lie(t,e){return KC.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,c;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,_=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,I=null!==(l=n.createdAt)&&void 0!==l?l:void 0,E=null!==(c=n.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:S,isAnonymous:k,providerData:V,stsTokenManager:Te}=n;x(y&&Te,e,"internal-error");const Or=jc.fromJSON(this.name,Te);x("string"==typeof y,e,"internal-error"),hs(d,e.name),hs(h,e.name),x("boolean"==typeof S,e,"internal-error"),x("boolean"==typeof k,e,"internal-error"),hs(f,e.name),hs(p,e.name),hs(g,e.name),hs(_,e.name),hs(I,e.name),hs(E,e.name);const fa=new Do({uid:y,auth:e,email:h,emailVerified:S,displayName:d,isAnonymous:k,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:Or,createdAt:I,lastLoginAt:E});return V&&Array.isArray(V)&&(fa.providerData=V.map(Ch=>Object.assign({},Ch))),_&&(fa._redirectEventId=_),fa}static _fromIdTokenResponse(e,n,r=!1){return m(function*(){const i=new jc;i.updateFromServerResponse(n);const s=new Do({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield $c(s),s})()}}const LV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(n,r){var i=this;return m(function*(){i.storage[n]=r})()}_get(n){var r=this;return m(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return m(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function cg(t,e,n){return`firebase:${t}:${e}:${n}`}class wu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=cg(this.userKey,i.apiKey,s),this.fullPersistenceKey=cg("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Do._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return m(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(function*(){if(!n.length)return new wu(Oi(LV),e,r);const i=(yield Promise.all(n.map(function(){var l=m(function*(c){if(yield c._isAvailable())return c});return function(c){return l.apply(this,arguments)}}()))).filter(l=>l);let s=i[0]||Oi(LV);const o=cg(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const c=yield l._get(o);if(c){const d=Do._fromJSON(e,c);l!==s&&(a=d),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var l=m(function*(c){if(c!==s)try{yield c._remove(o)}catch{}});return function(c){return l.apply(this,arguments)}}())),new wu(s,e,r)):new wu(s,e,r)})()}}function VV(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($V(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HV(e))return"Blackberry";if(GV(e))return"Webos";if(rb(e))return"Safari";if((e.includes("chrome/")||BV(e))&&!e.includes("edge/"))return"Chrome";if(jV(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function UV(t=Tt()){return/firefox\//i.test(t)}function rb(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BV(t=Tt()){return/crios\//i.test(t)}function $V(t=Tt()){return/iemobile/i.test(t)}function jV(t=Tt()){return/android/i.test(t)}function HV(t=Tt()){return/blackberry/i.test(t)}function GV(t=Tt()){return/webos/i.test(t)}function dg(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WV(t=Tt()){return dg(t)||jV(t)||GV(t)||HV(t)||/windows phone/i.test(t)||$V(t)}function qV(t,e=[]){let n;switch(t){case"Browser":n=VV(Tt());break;case"Worker":n=`${VV(Tt())}-${t}`;break;default:n=t}return`${n}/JsCore/9.9.4/${e.length?e.join(","):"FirebaseCore-web"}`}class Zie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return m(function*(){var r;if(n.auth.currentUser===e)return;const i=[];try{for(const s of n.queue)yield s(e),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const o of i)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=s)||void 0===r?void 0:r.message})}})()}}class Xie{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zV(this),this.idTokenSubscription=new zV(this),this.beforeStateQueue=new Zie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AV,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Oi(n)),this._initializationPromise=this.queue(m(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield wu.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return m(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,l=yield n.tryRedirectSignIn(e);(!a||a===u)&&l?.user&&(s=l.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return x(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return m(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return m(function*(){var r;try{yield $c(e)}catch(i){if("auth/network-request-failed"!==(null===(r=i)||void 0===r?void 0:r.code))return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function kie(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return m(function*(){const r=e?Yn(e):null;return r&&x(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return m(function*(){if(!r._deleted)return e&&x(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(m(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(m(function*(){yield n.assertedPersistence.setPersistence(Oi(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return m(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return m(function*(){if(!n.redirectPersistenceManager){const r=e&&Oi(e)||n._popupRedirectResolver;x(r,n,"argument-error"),n.redirectPersistenceManager=yield wu.create(n,[Oi(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return m(function*(){var r,i;return n._isInitialized&&(yield n.queue(m(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return m(function*(){if(e===n.currentUser)return n.queue(m(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return x(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return m(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function Pn(t){return Yn(t)}class zV{constructor(e){this.auth=e,this.observer=null,this.addObserver=function NJ(t,e){const n=new RJ(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vi(t,e){return mb.apply(this,arguments)}function mb(){return(mb=m(function*(t,e){return Fi(t,"POST","/v1/accounts:signInWithIdp",wt(t,e))})).apply(this,arguments)}class fs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class yse extends fs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(function*(){const s=yield Do._fromIdTokenResponse(e,r,i),o=eU(r);return new fr({user:s,providerId:o,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return m(function*(){yield e._updateTokensIfNecessary(r,!0);const i=eU(r);return new fr({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function eU(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class gg extends hr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gg.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gg(e,n,r,i)}}function tU(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?gg._fromErrorAndOperation(t,s,e,r):s})}function Db(t,e){return Tb.apply(this,arguments)}function Tb(){return(Tb=m(function*(t,e,n=!1){const r=yield Li(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return fr._forOperation(t,"link",r)})).apply(this,arguments)}function Ab(){return(Ab=m(function*(t,e,n=!1){var r;const{auth:i}=t,s="reauthenticate";try{const o=yield Li(t,tU(i,s,e,t),n);x(o.idToken,i,"internal-error");const a=lg(o.idToken);x(a,i,"internal-error");const{sub:u}=a;return x(t.uid===u,i,"user-mismatch"),fr._forOperation(t,s,o)}catch(o){throw"auth/user-not-found"===(null===(r=o)||void 0===r?void 0:r.code)&&kn(i,"user-mismatch"),o}})).apply(this,arguments)}function xb(){return(xb=m(function*(t,e,n=!1){const r="signIn",i=yield tU(t,r,e),s=yield fr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})).apply(this,arguments)}const yg="__sak";class oU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yg,"1"),this.storage.removeItem(yg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vse=(()=>{class t extends oU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ose(){const t=Tt();return rb(t)||dg(t)}()&&function Yie(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=WV(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function Qie(){return qF()&&10===document.documentMode}()||o===n.newValue||n.newValue===n.oldValue?s():setTimeout(s,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,s=this;return m(function*(){yield i().call(s,n,r),s.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return m(function*(){const s=yield r().call(i,n);return i.localCache[n]=JSON.stringify(s),s})()}_remove(n){var r=()=>super._remove,i=this;return m(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),aU=(()=>{class t extends oU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let Bse=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return m(function*(){const i=n,{eventId:s,eventType:o,data:a}=i.data,u=r.handlersMap[o];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const l=Array.from(u).map(function(){var d=m(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),c=yield function Use(t){return Promise.all(t.map(function(){var e=m(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(l);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:c})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function iD(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class $se{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return m(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((u,l)=>{const c=iD("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(f.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function It(){return window}function sD(){return typeof It().WorkerGlobalScope<"u"&&"function"==typeof It().importScripts}function oD(){return(oD=m(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const uU="firebaseLocalStorageDb",vg="firebaseLocalStorage",lU="fbase_key";class qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wg(t,e){return t.transaction([vg],e?"readwrite":"readonly").objectStore(vg)}function aD(){const t=indexedDB.open(uU,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vg,{keyPath:lU})}catch(i){n(i)}}),t.addEventListener("success",m(function*(){const r=t.result;r.objectStoreNames.contains(vg)?e(r):(r.close(),yield function zse(){const t=indexedDB.deleteDatabase(uU);return new qc(t).toPromise()}(),e(yield aD()))}))})}function cU(t,e,n){return uD.apply(this,arguments)}function uD(){return(uD=m(function*(t,e,n){const r=wg(t,!0).put({[lU]:e,value:n});return new qc(r).toPromise()})).apply(this,arguments)}function lD(){return(lD=m(function*(t,e){const n=wg(t,!1).get(e),r=yield new qc(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function dU(t,e){const n=wg(t,!0).delete(e);return new qc(n).toPromise()}const Zse=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return m(function*(){return n.db||(n.db=yield aD()),n.db})()}_withRetries(n){var r=this;return m(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield n(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return m(function*(){return sD()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return m(function*(){n.receiver=Bse._getInstance(function Wse(){return sD()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=m(function*(i,s){return{keyProcessed:(yield n._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=m(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return m(function*(){var r,i;if(n.activeServiceWorker=yield function Hse(){return oD.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new $se(n.activeServiceWorker);const s=yield n.sender._send("ping",{},800);!s||(null===(r=s[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=s[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return m(function*(){if(r.sender&&r.activeServiceWorker&&function Gse(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return m(function*(){try{if(!indexedDB)return!1;const n=yield aD();return yield cU(n,yg,"1"),yield dU(n,yg),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return m(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return m(function*(){return i._withPendingWrite(m(function*(){return yield i._withRetries(s=>cU(s,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return m(function*(){const i=yield r._withRetries(s=>function Kse(t,e){return lD.apply(this,arguments)}(s,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return m(function*(){return r._withPendingWrite(m(function*(){return yield r._withRetries(i=>dU(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return m(function*(){const r=yield n._withRetries(o=>{const a=wg(o,!1).getAll();return new qc(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(n.localCache[o])!==JSON.stringify(a)&&(n.notifyListeners(o,a),i.push(o));for(const o of Object.keys(n.localCache))n.localCache[o]&&!s.has(o)&&(n.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(m(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function fU(t){return`__${t}${Math.floor(1e6*Math.random())}`}function So(t,e){return e?Oi(e):(x(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}fU("rcb"),new Vc(3e4,6e4);class vD extends class tse{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,n){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function poe(t){return function iU(t,e){return xb.apply(this,arguments)}(t.auth,new vD(t),t.bypassAuthState)}function goe(t){const{auth:e,user:n}=t;return x(n,e,"internal-error"),function rU(t,e){return Ab.apply(this,arguments)}(n,new vD(t),t.bypassAuthState)}function moe(t){return wD.apply(this,arguments)}function wD(){return(wD=m(function*(t){const{auth:e,user:n}=t;return x(n,e,"internal-error"),Db(n,new vD(t),t.bypassAuthState)})).apply(this,arguments)}new Vc(2e3,1e4);const zc=new Map;class voe extends class _oe{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=m(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return m(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:u}=e;if(a)return void n.reject(a);const l={auth:n.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(u)(l))}catch(c){n.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return poe;case"linkViaPopup":case"linkViaRedirect":return moe;case"reauthViaPopup":case"reauthViaRedirect":return goe;default:kn(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return m(function*(){let r=zc.get(n.auth._key());if(!r){try{const s=(yield function woe(t,e){return DD.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}zc.set(n.auth._key(),r)}return n.bypassAuthState||zc.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return m(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return m(function*(){})()}cleanUp(){}}function DD(){return(DD=m(function*(t,e){const n=mU(e),r=gU(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function Ioe(t,e){zc.set(t._key(),e)}function gU(t){return Oi(t._redirectPersistence)}function mU(t){return cg("pendingRedirect",t.config.apiKey,t.name)}function _U(t,e){return RD.apply(this,arguments)}function RD(){return(RD=m(function*(t,e,n=!1){const r=Pn(t),i=So(r,e),o=yield new voe(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class Toe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Soe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wU(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wU(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vU(e))}saveEventToCache(e){this.cachedEventUids.add(vU(e)),this.lastProcessedEventTime=Date.now()}}function vU(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wU({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function Aoe(t){return PD.apply(this,arguments)}function PD(){return(PD=m(function*(t,e={}){return At(t,"GET","/v1/projects",e)})).apply(this,arguments)}const xoe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Moe=/^https?/;function OD(){return(OD=m(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield Aoe(t);for(const n of e)try{if(Roe(n))return}catch{}kn(t,"unauthorized-domain")})).apply(this,arguments)}function Roe(t){const e=Lc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return""===o.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!Moe.test(n))return!1;if(xoe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const koe=new Vc(3e4,6e4);function IU(){const t=It().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let Eg=null;function Ooe(t){return Eg=Eg||function Poe(t){return new Promise((e,n)=>{var r,i,s;function o(){IU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IU(),n(Yr(t,"network-request-failed"))},timeout:koe.get()})}if(null!==(i=null===(r=It().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=It().gapi)||void 0===s||!s.load){const a=fU("iframefcb");return It()[a]=()=>{gapi.load?o():n(Yr(t,"network-request-failed"))},function hU(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Yr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function toe(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}o()}}).catch(e=>{throw Eg=null,e})}(t),Eg}const Foe=new Vc(5e3,15e3),Uoe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Boe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $oe(t){const e=t.config;x(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?GC(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:_o},i=Boe.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Mc(r).slice(1)}`}function FD(){return FD=m(function*(t){const e=yield Ooe(t),n=It().gapi;return x(n,t,"internal-error"),e.open({where:document.body,url:$oe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uoe,dontclear:!0},r=>new Promise(function(){var i=m(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Yr(t,"network-request-failed"),u=It().setTimeout(()=>{o(a)},Foe.get());function l(){It().clearTimeout(u),s(r)}r.ping(l).then(l,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),FD.apply(this,arguments)}const Hoe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class EU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CU(t,e,n,r,i,s){x(t.config.authDomain,t,"auth-domain-config-required"),x(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_o,eventId:i};if(e instanceof fs){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,l]of Object.entries(s||{}))o[u]=l}if(e instanceof yse){const u=e.getScopes().filter(l=>""!==l);u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];return`${function Xoe({config:t}){return t.emulator?GC(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${Mc(a).slice(1)}`}const LD="webStorageSupport",eae=class Joe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aU,this._completeRedirectFn=_U,this._overrideRedirectResult=Ioe}_openPopup(e,n,r,i){var s=this;return m(function*(){var o;ds(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=CU(e,n,r,Lc(),i);return function Koe(t,e,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Hoe),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Tt().toLowerCase();n&&(a=BV(l)?"_blank":n),UV(l)&&(e=e||"http://localhost",u.scrollbars="yes");const c=Object.entries(u).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function Kie(t=Tt()){var e;return dg(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==a)return function Qoe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new EU(null);const d=window.open(e||"",a,c);x(d,t,"popup-blocked");try{d.focus()}catch{}return new EU(d)}(e,a,iD())})()}_openRedirect(e,n,r,i){var s=this;return m(function*(){return yield s._originValidation(e),function jse(t){It().location.href=t}(CU(e,n,r,Lc(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ds(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return m(function*(){const r=yield function joe(t){return FD.apply(this,arguments)}(e),i=new Toe(e);return r.register("authEvent",s=>(x(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(LD,{type:LD},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[LD];void 0!==o&&n(!!o),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Noe(t){return OD.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WV()||rb()||dg()}};var DU="@firebase/auth";class tae{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return m(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function iae(t=Hp()){const e=mo(t,"auth");return e.isInitialized()?e.getImmediate():function Mie(t,e){const n=mo(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Vp(n.getOptions(),e??{}))return i;kn(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:eae,persistence:[Zse,Vse,aU]})}!function rae(t){sn(new jt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,u)=>{x(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),x(!o?.includes(":"),"argument-error",{appName:a.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qV(t)},c=new Xie(a,u,l);return function Nie(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Oi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sn(new jt("auth-internal",e=>{const n=Pn(e.getProvider("auth").getImmediate());return new tae(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(DU,"0.20.6",function nae(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),Ve(DU,"0.20.6","esm2017")}("Browser");class VD{constructor(e){return e}}class UD{constructor(){return Zp("auth")}}const BD=new U("angularfire2.auth-instances");function oae(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new VD(r)}}const aae={provide:UD,deps:[[new lt,BD]]},uae={provide:VD,useFactory:function sae(t,e){const n=Yp("auth",t,e);return n&&new VD(n)},deps:[[new lt,BD],bo]};let lae=(()=>{class t{constructor(){Ve("angularfire",Pc.full,"auth")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({providers:[uae,aae]}),t})();function cae(t,...e){return{ngModule:lae,providers:[{provide:BD,useFactory:oae(t),multi:!0,deps:[$e,tn,Xp,Jp,[new lt,ag],...e]}]}}const dae=cs(iae,!0);var F,hae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ui={},$D=$D||{},Y=hae||self;function Cg(){}function jD(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Kc(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var HD="closure_uid_"+(1e9*Math.random()>>>0),pae=0;function gae(t,e,n){return t.call.apply(t.bind,arguments)}function mae(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Wt(t,e,n){return(Wt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gae:mae).apply(null,arguments)}function bg(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function qt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ps(){this.s=this.s,this.o=this.o}var yae={};ps.prototype.s=!1,ps.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function fae(t){return Object.prototype.hasOwnProperty.call(t,HD)&&t[HD]||(t[HD]=++pae)}(this);delete yae[t]}},ps.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const AU=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},xU=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function MU(t){return Array.prototype.concat.apply([],arguments)}function GD(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Dg(t){return/^[\s\xa0]*$/.test(t)}var In,NU=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function wn(t,e){return-1!=t.indexOf(e)}function WD(t,e){return t<e?-1:t>e?1:0}e:{var RU=Y.navigator;if(RU){var kU=RU.userAgent;if(kU){In=kU;break e}}In=""}function qD(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function PU(t){const e={};for(const n in t)e[n]=t[n];return e}var OU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function FU(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<OU.length;s++)n=OU[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function zD(t){return zD[" "](t),t}zD[" "]=Cg;var Tg,t,Iae=wn(In,"Opera"),Iu=wn(In,"Trident")||wn(In,"MSIE"),LU=wn(In,"Edge"),KD=LU||Iu,VU=wn(In,"Gecko")&&!(wn(In.toLowerCase(),"webkit")&&!wn(In,"Edge"))&&!(wn(In,"Trident")||wn(In,"MSIE"))&&!wn(In,"Edge"),Eae=wn(In.toLowerCase(),"webkit")&&!wn(In,"Edge");function UU(){var t=Y.document;return t?t.documentMode:void 0}e:{var QD="",YD=(t=In,VU?/rv:([^\);]+)(\)|;)/.exec(t):LU?/Edge\/([\d\.]+)/.exec(t):Iu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Eae?/WebKit\/(\S+)/.exec(t):Iae?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(YD&&(QD=YD?YD[1]:""),Iu){var ZD=UU();if(null!=ZD&&ZD>parseFloat(QD)){Tg=String(ZD);break e}}Tg=QD}var Cae={};var Dae=Y.document&&Iu&&(UU()||parseInt(Tg,10))||void 0,Tae=function(){if(!Y.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Y.addEventListener("test",Cg,e),Y.removeEventListener("test",Cg,e)}catch{}return t}();function on(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Qc(t,e){if(on.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(VU){e:{try{zD(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Sae[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Qc.Z.h.call(this)}}on.prototype.h=function(){this.defaultPrevented=!0},qt(Qc,on);var Sae={2:"touch",3:"pen",4:"mouse"};Qc.prototype.h=function(){Qc.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Yc="closure_listenable_"+(1e6*Math.random()|0),Aae=0;function xae(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Aae,this.ca=this.fa=!1}function Sg(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ag(t){this.src=t,this.g={},this.h=0}function JD(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=AU(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Sg(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function eT(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}Ag.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=eT(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new xae(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var tT="closure_lm_"+(1e6*Math.random()|0),nT={};function $U(t,e,n,r,i){if(r&&r.once)return HU(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)$U(t,e[s],n,r,i);return null}return n=oT(n),t&&t[Yc]?t.N(e,n,Kc(r)?!!r.capture:!!r,i):jU(t,e,n,!1,r,i)}function jU(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Kc(i)?!!i.capture:!!i,a=iT(t);if(a||(t[tT]=a=new Ag(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function Mae(){var e=Nae;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Tae||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(WU(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function HU(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)HU(t,e[s],n,r,i);return null}return n=oT(n),t&&t[Yc]?t.O(e,n,Kc(r)?!!r.capture:!!r,i):jU(t,e,n,!0,r,i)}function GU(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)GU(t,e[s],n,r,i);else r=Kc(r)?!!r.capture:!!r,n=oT(n),t&&t[Yc]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=eT(s=t.g[e],n,r,i))&&(Sg(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=iT(t))&&(e=t.g[e.toString()],t=-1,e&&(t=eT(e,n,r,i)),(n=-1<t?e[t]:null)&&rT(n))}function rT(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Yc])JD(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(WU(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=iT(e))?(JD(n,t),0==n.h&&(n.src=null,e[tT]=null)):Sg(t)}}}function WU(t){return t in nT?nT[t]:nT[t]="on"+t}function Nae(t,e){if(t.ca)t=!0;else{e=new Qc(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&rT(t),t=n.call(r,e)}return t}function iT(t){return(t=t[tT])instanceof Ag?t:null}var sT="__closure_events_fn_"+(1e9*Math.random()>>>0);function oT(t){return"function"==typeof t?t:(t[sT]||(t[sT]=function(e){return t.handleEvent(e)}),t[sT])}function xt(){ps.call(this),this.i=new Ag(this),this.P=this,this.I=null}function zt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new on(e,t);else if(e instanceof on)e.target=e.target||t;else{var i=e;FU(e=new on(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=xg(o,r,!0,e)&&i}if(i=xg(o=e.g=t,r,!0,e)&&i,i=xg(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=xg(o=e.g=n[s],r,!1,e)&&i}function xg(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&JD(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}qt(xt,ps),xt.prototype[Yc]=!0,xt.prototype.removeEventListener=function(t,e,n,r){GU(this,t,e,n,r)},xt.prototype.M=function(){if(xt.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Sg(n[r]);delete t.g[e],t.h--}}this.I=null},xt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},xt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var aT=Y.JSON.stringify;function Rae(){var t=zU;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var lT,qU=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Pae,t=>t.reset());class Pae{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Oae(t){Y.setTimeout(()=>{throw t},0)}function uT(t,e){lT||function Fae(){var t=Y.Promise.resolve(void 0);lT=function(){t.then(Lae)}}(),cT||(lT(),cT=!0),zU.add(t,e)}var cT=!1,zU=new class kae{constructor(){this.h=this.g=null}add(e,n){const r=qU.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}};function Lae(){for(var t;t=Rae();){try{t.h.call(t.g)}catch(n){Oae(n)}var e=qU;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}cT=!1}function Mg(t,e){xt.call(this),this.h=t||1,this.g=e||Y,this.j=Wt(this.kb,this),this.l=Date.now()}function dT(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function hT(t,e,n){if("function"==typeof t)n&&(t=Wt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Wt(t.handleEvent,t)}return 2147483647<Number(e)?-1:Y.setTimeout(t,e||0)}function KU(t){t.g=hT(()=>{t.g=null,t.i&&(t.i=!1,KU(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}qt(Mg,xt),(F=Mg.prototype).da=!1,F.S=null,F.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),zt(this,"tick"),this.da&&(dT(this),this.start()))}},F.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},F.M=function(){Mg.Z.M.call(this),dT(this),delete this.g};class Vae extends ps{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:KU(this)}M(){super.M(),this.g&&(Y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zc(t){ps.call(this),this.h=t,this.g={}}qt(Zc,ps);var QU=[];function YU(t,e,n,r){Array.isArray(n)||(n&&(QU[0]=n.toString()),n=QU);for(var i=0;i<n.length;i++){var s=$U(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ZU(t){qD(t.g,function(e,n){this.g.hasOwnProperty(n)&&rT(e)},t),t.g={}}function Ng(){this.g=!0}function Eu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function jae(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return aT(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Zc.prototype.M=function(){Zc.Z.M.call(this),ZU(this)},Zc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ng.prototype.Aa=function(){this.g=!1},Ng.prototype.info=function(){};var Ao={},XU=null;function Rg(){return XU=XU||new xt}function JU(t){on.call(this,Ao.Ma,t)}function Xc(t){const e=Rg();zt(e,new JU(e,t))}function eB(t,e){on.call(this,Ao.STAT_EVENT,t),this.stat=e}function En(t){const e=Rg();zt(e,new eB(e,t))}function tB(t,e){on.call(this,Ao.Na,t),this.size=e}function Jc(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Y.setTimeout(function(){t()},e)}Ao.Ma="serverreachability",qt(JU,on),Ao.STAT_EVENT="statevent",qt(eB,on),Ao.Na="timingevent",qt(tB,on);var kg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nB={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function fT(){}function iB(){}fT.prototype.h=null;var mT,ed={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function pT(){on.call(this,"d")}function gT(){on.call(this,"c")}function Pg(){}function td(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Zc(this),this.P=Hae,this.W=new Mg(t=KD?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sB}function sB(){this.i=null,this.g="",this.h=!1}qt(pT,on),qt(gT,on),qt(Pg,fT),Pg.prototype.g=function(){return new XMLHttpRequest},Pg.prototype.i=function(){return{}},mT=new Pg;var Hae=45e3,_T={},Og={};function yT(t,e,n){t.K=1,t.v=Bg(Bi(e)),t.s=n,t.U=!0,oB(t,null)}function oB(t,e){t.F=Date.now(),nd(t),t.A=Bi(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),gB(n.h,"t",r),t.C=0,n=t.l.H,t.h=new sB,t.g=VB(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Vae(Wt(t.Ia,t,t.g),t.O)),YU(t.V,t.g,"readystatechange",t.gb),e=t.H?PU(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Xc(1),function Uae(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var d=c.split("_");o=2<=d.length&&"type"==d[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function aB(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function uB(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=Gae(t,n),i==Og){4==e&&(t.o=4,En(14),r=!1),Eu(t.j,t.m,null,"[Incomplete Response]");break}if(i==_T){t.o=4,En(15),Eu(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Eu(t.j,t.m,i,null),vT(t,i)}aB(t)&&i!=Og&&i!=_T&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,En(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),MT(e),e.L=!0,En(11))):(Eu(t.j,t.m,n,"[Invalid Chunked Response]"),xo(t),rd(t))}function Gae(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Og:(n=Number(e.substring(n,r)),isNaN(n)?_T:(r+=1)+n>e.length?Og:(e=e.substr(r,n),t.C=r+n,e))}function nd(t){t.Y=Date.now()+t.P,lB(t,t.P)}function lB(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Jc(Wt(t.eb,t),e)}function Fg(t){t.B&&(Y.clearTimeout(t.B),t.B=null)}function rd(t){0==t.l.G||t.I||PB(t.l,t)}function xo(t){Fg(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,dT(t.W),ZU(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function vT(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||ET(n.i,t)))if(n.I=t.N,!t.J&&ET(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break e;qg(n),Gg(n)}xT(n),En(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Jc(Wt(n.ab,n),6e3));if(1>=yB(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Ro(n,11)}else if((t.J||n.g==t)&&qg(n),!Dg(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const c=l[3];null!=c&&(n.ma=c,n.h.info("VER="+n.ma));const d=l[4];null!=d&&(n.za=d,n.h.info("SVER="+n.za));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(n.K=r=1.5*h,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;!s.g&&(wn(p,"spdy")||wn(p,"quic")||wn(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(CT(s,s.h),s.h=null))}if(r.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.sa=g,je(r.F,r.D,g))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((r=n).oa=LB(r,r.H?r.la:null,r.W),o.J){vB(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(Fg(a),nd(a)),r.g=o}else RB(r);0<n.l.length&&Wg(n)}else"stop"!=l[0]&&"close"!=l[0]||Ro(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Ro(n,7):ST(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}Xc(4)}catch{}}function wT(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(jD(t)||"string"==typeof t)xU(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(jD(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function Wae(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(jD(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Cu(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Cu)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function IT(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Mo(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Mo(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Mo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(F=td.prototype).setTimeout=function(t){this.P=t},F.gb=function(t){t=t.target;const e=this.L;e&&3==$i(t)?e.l():this.Ia(t)},F.Ia=function(t){try{if(t==this.g)e:{const c=$i(this.g);var e=this.g.Da();const d=this.g.ba();if(!(3>c)&&(3!=c||KD||this.g&&(this.h.h||this.g.ga()||SB(this.g)))){this.I||4!=c||7==e||Xc(8==e||0>=d?3:2),Fg(this);var n=this.g.ba();this.N=n;t:if(aB(this)){var r=SB(this.g);t="";var i=r.length,s=4==$i(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){xo(this),rd(this);var o="";break t}this.h.i=new Y.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function Bae(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dg(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,En(12),xo(this),rd(this);break e}Eu(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vT(this,n)}this.U?(uB(this,c,o),KD&&this.i&&3==c&&(YU(this.V,this.W,"tick",this.fb),this.W.start())):(Eu(this.j,this.m,o,null),vT(this,o)),4==c&&xo(this),this.i&&!this.I&&(4==c?PB(this.l,this):(this.i=!1,nd(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,En(12)):(this.o=0,En(13)),xo(this),rd(this)}}}catch{}},F.fb=function(){if(this.g){var t=$i(this.g),e=this.g.ga();this.C<e.length&&(Fg(this),uB(this,t,e),this.i&&4!=t&&nd(this))}},F.cancel=function(){this.I=!0,xo(this)},F.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function $ae(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xc(3),En(17)),xo(this),this.o=2,rd(this)):lB(this,this.Y-t)},(F=Cu.prototype).R=function(){IT(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},F.T=function(){return IT(this),this.g.concat()},F.get=function(t,e){return Mo(this.h,t)?this.h[t]:e},F.set=function(t,e){Mo(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},F.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var cB=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function No(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof No){this.g=void 0!==e?e:t.g,Lg(this,t.j),this.s=t.s,Vg(this,t.i),Ug(this,t.m),this.l=t.l,e=t.h;var n=new od;n.i=e.i,e.g&&(n.g=new Cu(e.g),n.h=e.h),dB(this,n),this.o=t.o}else t&&(n=String(t).match(cB))?(this.g=!!e,Lg(this,n[1]||"",!0),this.s=id(n[2]||""),Vg(this,n[3]||"",!0),Ug(this,n[4]),this.l=id(n[5]||"",!0),dB(this,n[6]||"",!0),this.o=id(n[7]||"")):(this.g=!!e,this.h=new od(null,this.g))}function Bi(t){return new No(t)}function Lg(t,e,n){t.j=n?id(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Vg(t,e,n){t.i=n?id(e,!0):e}function Ug(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function dB(t,e,n){e instanceof od?(t.h=e,function eue(t,e){e&&!t.j&&(gs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(fB(this,r),gB(this,i,n))},t)),t.j=e}(t.h,t.g)):(n||(e=sd(e,Xae)),t.h=new od(e,t.g))}function je(t,e,n){t.h.set(e,n)}function Bg(t){return je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function id(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sd(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Qae),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Qae(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}No.prototype.toString=function(){var t=[],e=this.j;e&&t.push(sd(e,hB,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(sd(e,hB,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(sd(n,"/"==n.charAt(0)?Zae:Yae,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",sd(n,Jae)),t.join("")};var hB=/[#\/\?@]/g,Yae=/[#\?:]/g,Zae=/[#\?]/g,Xae=/[#\?@]/g,Jae=/#/g;function od(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function gs(t){t.g||(t.g=new Cu,t.h=0,t.i&&function qae(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function fB(t,e){gs(t),e=bu(t,e),Mo(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Mo((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&IT(t)))}function pB(t,e){return gs(t),e=bu(t,e),Mo(t.g.h,e)}function gB(t,e,n){fB(t,e),0<n.length&&(t.i=null,t.g.set(bu(t,e),GD(n)),t.h+=n.length)}function bu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function mB(t){this.l=t||nue,t=Y.PerformanceNavigationTiming?0<(t=Y.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Y.g&&Y.g.Ea&&Y.g.Ea()&&Y.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(F=od.prototype).add=function(t,e){gs(this),this.i=null,t=bu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},F.forEach=function(t,e){gs(this),this.g.forEach(function(n,r){xU(n,function(i){t.call(e,i,r,this)},this)},this)},F.T=function(){gs(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},F.R=function(t){gs(this);var e=[];if("string"==typeof t)pB(this,t)&&(e=MU(e,this.g.get(bu(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=MU(e,t[n])}return e},F.set=function(t,e){return gs(this),this.i=null,pB(this,t=bu(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},F.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},F.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var nue=10;function _B(t){return!!t.h||!!t.g&&t.g.size>=t.j}function yB(t){return t.h?1:t.g?t.g.size:0}function ET(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function CT(t,e){t.g?t.g.add(e):t.h=e}function vB(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function wB(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return GD(t.i)}function bT(){}function rue(){this.g=new bT}function iue(t,e,n){const r=n||"";try{wT(t,function(i,s){let o=i;Kc(i)&&(o=aT(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function $g(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ad(t){this.l=t.$b||null,this.j=t.ib||!1}function jg(t,e){xt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=DT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mB.prototype.cancel=function(){if(this.i=wB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},bT.prototype.stringify=function(t){return Y.JSON.stringify(t,void 0)},bT.prototype.parse=function(t){return Y.JSON.parse(t,void 0)},qt(ad,fT),ad.prototype.g=function(){return new jg(this.l,this.j)},ad.prototype.i=function(t){return function(){return t}}({}),qt(jg,xt);var DT=0;function IB(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function ud(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ld(t)}function ld(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(F=jg.prototype).open=function(t,e){if(this.readyState!=DT)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ld(this)},F.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Y).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},F.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ud(this)),this.readyState=DT},F.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ld(this)),this.g&&(this.readyState=3,ld(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Y.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;IB(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},F.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ud(this):ld(this),3==this.readyState&&IB(this)}},F.Ua=function(t){this.g&&(this.response=this.responseText=t,ud(this))},F.Ta=function(t){this.g&&(this.response=t,ud(this))},F.ha=function(){this.g&&ud(this)},F.setRequestHeader=function(t,e){this.v.append(t,e)},F.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},F.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(jg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var oue=Y.JSON.parse;function ft(t){xt.call(this),this.headers=new Cu,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=EB,this.K=this.L=!1}qt(ft,xt);var EB="",aue=/^https?$/i,uue=["POST","PUT"];function cue(t){return"content-type"==t.toLowerCase()}function CB(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,bB(t),Hg(t)}function bB(t){t.D||(t.D=!0,zt(t,"complete"),zt(t,"error"))}function DB(t){if(t.h&&typeof $D<"u"&&(!t.C[1]||4!=$i(t)||2!=t.ba()))if(t.v&&4==$i(t))hT(t.Fa,0,t);else if(zt(t,"readystatechange"),4==$i(t)){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.H).match(cB)[1]||null;if(!i&&Y.self&&Y.self.location){var s=Y.self.location.protocol;i=s.substr(0,s.length-1)}r=!aue.test(i?i.toLowerCase():"")}n=r}if(n)zt(t,"complete"),zt(t,"success");else{t.m=6;try{var o=2<$i(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",bB(t)}}finally{Hg(t)}}}function Hg(t,e){if(t.g){TB(t);const n=t.g,r=t.C[0]?Cg:null;t.g=null,t.C=null,e||zt(t,"ready");try{n.onreadystatechange=r}catch{}}}function TB(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Y.clearTimeout(t.A),t.A=null)}function $i(t){return t.g?t.g.readyState:0}function SB(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case EB:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function TT(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function due(t){let e="";return qD(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):je(t,e,n))}function cd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function AB(t){this.za=0,this.l=[],this.h=new Ng,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=cd("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=cd("baseRetryDelayMs",5e3,t),this.$a=cd("retryDelaySeedMs",1e4,t),this.Ya=cd("forwardChannelMaxRetries",2,t),this.ra=cd("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new mB(t&&t.concurrentRequestLimit),this.Ca=new rue,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function ST(t){if(xB(t),3==t.G){var e=t.V++,n=Bi(t.F);je(n,"SID",t.J),je(n,"RID",e),je(n,"TYPE","terminate"),dd(t,n),(e=new td(t,t.h,e,void 0)).K=2,e.v=Bg(Bi(n)),n=!1,Y.navigator&&Y.navigator.sendBeacon&&(n=Y.navigator.sendBeacon(e.v.toString(),"")),!n&&Y.Image&&((new Image).src=e.v,n=!0),n||(e.g=VB(e.l,null),e.g.ea(e.v)),e.F=Date.now(),nd(e)}FB(t)}function Gg(t){t.g&&(MT(t),t.g.cancel(),t.g=null)}function xB(t){Gg(t),t.u&&(Y.clearTimeout(t.u),t.u=null),qg(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Y.clearTimeout(t.m),t.m=null)}function AT(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&Wg(t)}function Wg(t){_B(t.i)||t.m||(t.m=!0,uT(t.Ha,t),t.C=0)}function MB(t,e){var n;n=e?e.m:t.V++;const r=Bi(t.F);je(r,"SID",t.J),je(r,"RID",n),je(r,"AID",t.U),dd(t,r),t.o&&t.s&&TT(r,t.o,t.s),n=new td(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=NB(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),CT(t.i,n),yT(n,r,e)}function dd(t,e){t.j&&wT({},function(n,r){je(e,r,n)})}function NB(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Wt(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].h;const c=i[u].g;if(l-=s,0>l)s=Math.max(0,i[u].h-100),a=!1;else try{iue(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function RB(t){t.g||t.u||(t.Y=1,uT(t.Ga,t),t.A=0)}function xT(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Jc(Wt(t.Ga,t),OB(t,t.A)),t.A++,0))}function MT(t){null!=t.B&&(Y.clearTimeout(t.B),t.B=null)}function kB(t){t.g=new td(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Bi(t.oa);je(e,"RID","rpc"),je(e,"SID",t.J),je(e,"CI",t.N?"0":"1"),je(e,"AID",t.U),dd(t,e),je(e,"TYPE","xmlhttp"),t.o&&t.s&&TT(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Bg(Bi(e)),n.s=null,n.U=!0,oB(n,t)}function qg(t){null!=t.v&&(Y.clearTimeout(t.v),t.v=null)}function PB(t,e){var n=null;if(t.g==e){qg(t),MT(t),t.g=null;var r=2}else{if(!ET(t.i,e))return;n=e.D,vB(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;zt(r=Rg(),new tB(r,n,e,i)),Wg(t)}else RB(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function hue(t,e){return!(yB(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Jc(Wt(t.Ha,t,e),OB(t,t.C)),t.C++,0)))}(t,e)||2==r&&xT(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ro(t,5);break;case 4:Ro(t,10);break;case 3:Ro(t,6);break;default:Ro(t,2)}}function OB(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ro(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Wt(t.jb,t);n||(n=new No("//www.google.com/images/cleardot.gif"),Y.location&&"http"==Y.location.protocol||Lg(n,"https"),Bg(n)),function sue(t,e){const n=new Ng;if(Y.Image){const r=new Image;r.onload=bg($g,n,r,"TestLoadImage: loaded",!0,e),r.onerror=bg($g,n,r,"TestLoadImage: error",!1,e),r.onabort=bg($g,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=bg($g,n,r,"TestLoadImage: timeout",!1,e),Y.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else En(2);t.G=0,t.j&&t.j.va(e),FB(t),xB(t)}function FB(t){t.G=0,t.I=-1,t.j&&((0!=wB(t.i).length||0!=t.l.length)&&(t.i.i.length=0,GD(t.l),t.l.length=0),t.j.ua())}function LB(t,e,n){let r=function zae(t){return t instanceof No?Bi(t):new No(t,void 0)}(n);if(""!=r.i)e&&Vg(r,e+"."+r.i),Ug(r,r.m);else{const i=Y.location;r=function Kae(t,e,n,r){var i=new No(null,void 0);return t&&Lg(i,t),e&&Vg(i,e),n&&Ug(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&qD(t.aa,function(i,s){je(r,s,i)}),n=t.sa,(e=t.D)&&n&&je(r,e,n),je(r,"VER",t.ma),dd(t,r),r}function VB(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ft(n&&t.Ba&&!t.qa?new ad({ib:!0}):t.qa)).L=t.H,e}function UB(){}function zg(){if(Iu&&!(10<=Number(Dae)))throw Error("Environmental error: no available transport.")}function Xn(t,e){xt.call(this),this.g=new AB(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Dg(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dg(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Du(this)}function BB(t){pT.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function $B(){gT.call(this),this.status=1}function Du(t){this.g=t}(F=ft.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mT.g(),this.C=function rB(t){return t.h||(t.h=t.i())}(this.u?this.u:mT),this.g.onreadystatechange=Wt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void CB(this,s)}t=n||"";const i=new Cu(this.headers);r&&wT(r,function(s,o){i.set(o,s)}),r=function vae(t){e:{var e=cue;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Y.FormData&&t instanceof Y.FormData,!(0<=AU(uue,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{TB(this),0<this.B&&((this.K=function lue(t){return Iu&&function bae(){return function wae(t){var e=Cae;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}(function(){let t=0;const e=NU(String(Tg)).split("."),n=NU("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=WD(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||WD(0==i[2].length,0==s[2].length)||WD(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wt(this.pa,this)):this.A=hT(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){CB(this,s)}},F.pa=function(){typeof $D<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zt(this,"timeout"),this.abort(8))},F.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,zt(this,"complete"),zt(this,"abort"),Hg(this))},F.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hg(this,!0)),ft.Z.M.call(this)},F.Fa=function(){this.s||(this.F||this.v||this.l?DB(this):this.cb())},F.cb=function(){DB(this)},F.ba=function(){try{return 2<$i(this)?this.g.status:-1}catch{return-1}},F.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},F.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),oue(e)}},F.Da=function(){return this.m},F.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(F=AB.prototype).ma=8,F.G=1,F.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}},F.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new td(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=PU(s),FU(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=NB(this,i,e),je(n=Bi(this.F),"RID",t),je(n,"CVER",22),this.D&&je(n,"X-HTTP-Session-Id",this.D),dd(this,n),this.o&&s&&TT(n,this.o,s),CT(this.i,i),this.Ra&&je(n,"TYPE","init"),this.ja?(je(n,"$req",e),je(n,"SID","null"),i.$=!0,yT(i,n,null)):yT(i,n,e),this.G=2}}else 3==this.G&&(t?MB(this,t):0==this.l.length||_B(this.i)||MB(this))},F.Ga=function(){if(this.u=null,kB(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Jc(Wt(this.bb,this),t)}},F.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,En(10),Gg(this),kB(this))},F.ab=function(){null!=this.v&&(this.v=null,Gg(this),xT(this),En(19))},F.jb=function(t){t?(this.h.info("Successfully pinged google.com"),En(2)):(this.h.info("Failed to ping google.com"),En(1))},(F=UB.prototype).xa=function(){},F.wa=function(){},F.va=function(){},F.ua=function(){},F.Oa=function(){},zg.prototype.g=function(t,e){return new Xn(t,e)},qt(Xn,xt),Xn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),uT(Wt(t.hb,t,e))),En(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=LB(t,null,t.W),Wg(t)},Xn.prototype.close=function(){ST(this.g)},Xn.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,AT(this.g,e)}else this.v?((e={}).__data__=aT(t),AT(this.g,e)):AT(this.g,t)},Xn.prototype.M=function(){this.g.j=null,delete this.j,ST(this.g),delete this.g,Xn.Z.M.call(this)},qt(BB,pT),qt($B,gT),qt(Du,UB),Du.prototype.xa=function(){zt(this.g,"a")},Du.prototype.wa=function(t){zt(this.g,new BB(t))},Du.prototype.va=function(t){zt(this.g,new $B(t))},Du.prototype.ua=function(){zt(this.g,"b")},zg.prototype.createWebChannel=zg.prototype.g,Xn.prototype.send=Xn.prototype.u,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,kg.NO_ERROR=0,kg.TIMEOUT=8,kg.HTTP_ERROR=6,nB.COMPLETE="complete",iB.EventType=ed,ed.OPEN="a",ed.CLOSE="b",ed.ERROR="c",ed.MESSAGE="d",xt.prototype.listen=xt.prototype.N,ft.prototype.listenOnce=ft.prototype.O,ft.prototype.getLastError=ft.prototype.La,ft.prototype.getLastErrorCode=ft.prototype.Da,ft.prototype.getStatus=ft.prototype.ba,ft.prototype.getResponseJson=ft.prototype.Qa,ft.prototype.getResponseText=ft.prototype.ga,ft.prototype.send=ft.prototype.ea;var fue=Ui.createWebChannelTransport=function(){return new zg},pue=Ui.getStatEventTarget=function(){return Rg()},NT=Ui.ErrorCode=kg,gue=Ui.EventType=nB,mue=Ui.Event=Ao,jB=Ui.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_ue=Ui.FetchXmlHttpFactory=ad,Kg=Ui.WebChannel=iB,yue=Ui.XhrIo=ft;const HB="@firebase/firestore";class Mt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");let Tu="9.9.4";const ms=new fo("@firebase/firestore");function RT(){return ms.logLevel}function T(t,...e){if(ms.logLevel<=fe.DEBUG){const n=e.map(kT);ms.debug(`Firestore (${Tu}): ${t}`,...n)}}function it(t,...e){if(ms.logLevel<=fe.ERROR){const n=e.map(kT);ms.error(`Firestore (${Tu}): ${t}`,...n)}}function Su(t,...e){if(ms.logLevel<=fe.WARN){const n=e.map(kT);ms.warn(`Firestore (${Tu}): ${t}`,...n)}}function kT(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function L(t="Unexpected state"){const e=`FIRESTORE (${Tu}) INTERNAL ASSERTION FAILED: `+t;throw it(e),new Error(e)}function K(t,e){t||L()}function R(t,e){return t}const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class GB{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class Iue{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let o=new Nt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Nt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable(m(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Nt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K("string"==typeof r.accessToken),new GB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return K(null===e||"string"==typeof e),new Mt(e)}}class Eue{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(K(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Cue{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new Eue(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bue{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{null!=s.error&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,T("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(K("string"==typeof n.token),this.A=n.token,new WB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Due(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class qB{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Due(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Z(t,e){return t<e?-1:t>e?1:0}function Au(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class Ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new D(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new D(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class G{constructor(e){this.timestamp=e}static fromTimestamp(e){return new G(e)}static min(){return new G(new Ke(0,0))}static max(){return new G(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hd{constructor(e,n,r){void 0===n?n=0:n>e.length&&L(),void 0===r?r=e.length-n:r>e.length-n&&L(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===hd.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ge extends hd{construct(e,n,r){return new ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new D(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const Tue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends hd{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return Tue.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new D(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new D(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new D(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new D(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}class M{constructor(e){this.path=e}static fromPath(e){return new M(ge.fromString(e))}static fromName(e){return new M(ge.fromString(e).popFirst(5))}static empty(){return new M(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ge.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new M(new ge(e.slice()))}}function QB(t){return new Jn(t.readTime,t.key,-1)}class Jn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jn(G.min(),M.empty(),-1)}static max(){return new Jn(G.max(),M.empty(),-1)}}function OT(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=M.comparator(t.documentKey,e.documentKey),0!==n?n:Z(t.largestBatchId,e.largestBatchId))}const YB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";function _s(t){return FT.apply(this,arguments)}function FT(){return FT=m(function*(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==YB)throw t;T("LocalStore","Unexpectedly lost primary lease")}),FT.apply(this,arguments)}class v{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&L(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new v((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof v?n:v.resolve(n)}catch(n){return v.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):v.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):v.reject(n)}static resolve(e){return new v((n,r)=>{n(e)})}static reject(e){return new v((n,r)=>{r(e)})}static waitFor(e){return new v((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=v.resolve(!1);for(const r of e)n=n.next(i=>i?v.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new v((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(e[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new v((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function ys(t){return"IndexedDbTransactionError"===t.name}class On{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function XB(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}On.at=-1;class Je{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xg(this.root,e,this.comparator,!0)}}class Xg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=i??Kt.EMPTY,this.right=s??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw L();const e=this.left.check();if(e!==this.right.check())throw L();return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1,Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw L()}get value(){throw L()}get color(){throw L()}get left(){throw L()}get right(){throw L()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Kt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class De{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new e2(this.data.getIterator())}getIteratorFrom(e){return new e2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof De)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new De(this.comparator);return n.data=e,n}}class e2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class er{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new er([])}unionWith(e){let n=new De(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Au(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Et(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const Pue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(t){if(K(!!t),"string"==typeof t){let e=0;const n=Pue.exec(t);if(K(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Fo(t){return"string"==typeof t?Et.fromBase64String(t):Et.fromUint8Array(t)}function VT(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function t2(t){const e=t.mapValue.fields.__previous_value__;return VT(e)?t2(e):e}function gd(t){const e=vs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}class Oue{constructor(e,n,r,i,s,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class Lo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Lo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Lo&&e.projectId===this.projectId&&e.database===this.database}}function md(t){return null==t}function _d(t){return 0===t&&1/t==-1/0}const ws_mapValue={fields:{__type__:{stringValue:"__max__"}}};function Vo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?VT(t)?4:o2(t)?9007199254740991:10:L()}function Xr(t,e){if(t===e)return!0;const n=Vo(t);if(n!==Vo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gd(t).isEqual(gd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=vs(r.timestampValue),o=vs(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,Fo(t.bytesValue).isEqual(Fo(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return et(r.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return et(r.integerValue)===et(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=et(r.doubleValue),o=et(i.doubleValue);return s===o?_d(s)===_d(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Au(t.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(XB(s)!==XB(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!Xr(s[a],o[a])))return!1;return!0}(t,e);default:return L()}var i}function yd(t,e){return void 0!==(t.values||[]).find(n=>Xr(n,e))}function Is(t,e){if(t===e)return 0;const n=Vo(t),r=Vo(e);if(n!==r)return Z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=et(i.integerValue||i.doubleValue),a=et(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return r2(t.timestampValue,e.timestampValue);case 4:return r2(gd(t),gd(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Fo(i),a=Fo(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const l=Z(o[u],a[u]);if(0!==l)return l}return Z(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Z(et(i.latitude),et(s.latitude));return 0!==o?o:Z(et(i.longitude),et(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const l=Is(o[u],a[u]);if(l)return l}return Z(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===ws_mapValue&&s===ws_mapValue)return 0;if(i===ws_mapValue)return 1;if(s===ws_mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},l=Object.keys(u);a.sort(),l.sort();for(let c=0;c<a.length&&c<l.length;++c){const d=Z(a[c],l[c]);if(0!==d)return d;const h=Is(o[a[c]],u[l[c]]);if(0!==h)return h}return Z(a.length,l.length)}(t.mapValue,e.mapValue);default:throw L()}}function r2(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Z(t,e);const n=vs(t),r=vs(e),i=Z(n.seconds,r.seconds);return 0!==i?i:Z(n.nanos,r.nanos)}function Mu(t){return UT(t)}function UT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=vs(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Fo(t.bytesValue).toBase64():"referenceValue"in t?M.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=UT(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${UT(r.fields[a])}`;return s+"}"}(t.mapValue):L();var e}function BT(t){return!!t&&"integerValue"in t}function vd(t){return!!t&&"arrayValue"in t}function i2(t){return!!t&&"nullValue"in t}function s2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function em(t){return!!t&&"mapValue"in t}function wd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Oo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function o2(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!em(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wd(n)}setAll(e){let n=st.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=wd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());em(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];em(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Oo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Qt(wd(this.value))}}function l2(t){const e=[];return Oo(t.fields,(n,r)=>{const i=new st([n]);if(em(r)){const s=l2(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new er(e)}class Oe{constructor(e,n,r,i,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Oe(e,0,G.min(),G.min(),Qt.empty(),0)}static newFoundDocument(e,n,r){return new Oe(e,1,n,G.min(),r,0)}static newNoDocument(e,n){return new Oe(e,2,n,G.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Oe(e,3,n,G.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Oe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oe(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vue{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ht=null}}function c2(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Vue(t,e,n,r,i,s,o)}function Bo(t){const e=R(t);if(null===e.ht){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Mu(i.value);var i}).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),md(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mu(r)).join(",")),e.ht=n}return e.ht}function Id(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!zue(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if((n=t.filters[i]).op!==(r=e.filters[i]).op||!n.field.isEqual(r.field)||!Xr(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!g2(t.startAt,e.startAt)&&g2(t.endAt,e.endAt)}function tm(t){return M.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Yt extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.lt(e,n,r):new Bue(e,n,r):"array-contains"===n?new Hue(e,r):"in"===n?new Gue(e,r):"not-in"===n?new Wue(e,r):"array-contains-any"===n?new que(e,r):new Yt(e,n,r)}static lt(e,n,r){return"in"===n?new $ue(e,r):new jue(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.ft(Is(n,this.value)):null!==n&&Vo(this.value)===Vo(n)&&this.ft(Is(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return L()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Bue extends Yt{constructor(e,n,r){super(e,n,r),this.key=M.fromName(r.referenceValue)}matches(e){const n=M.comparator(e.key,this.key);return this.ft(n)}}class $ue extends Yt{constructor(e,n){super(e,"in",n),this.keys=f2(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jue extends Yt{constructor(e,n){super(e,"not-in",n),this.keys=f2(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function f2(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}class Hue extends Yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vd(n)&&yd(n.arrayValue,this.value)}}class Gue extends Yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&yd(this.value.arrayValue,n)}}class Wue extends Yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!yd(this.value.arrayValue,n)}}class que extends Yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yd(this.value.arrayValue,r))}}class Es{constructor(e,n){this.position=e,this.inclusive=n}}class Nu{constructor(e,n="asc"){this.field=e,this.dir=n}}function zue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function p2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?M.comparator(M.fromName(o.referenceValue),n.key):Is(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function g2(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xr(t.position[n],e.position[n]))return!1;return!0}class ji{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this._t=null,this.wt=null}}function Ru(t){return new ji(t)}function _2(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function ku(t){const e=R(t);if(null===e._t){e._t=[];const n=function jT(t){for(const e of t.filters)if(e.dt())return e.field;return null}(e),r=function $T(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==n&&null===r)n.isKeyField()||e._t.push(new Nu(n)),e._t.push(new Nu(st.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Nu(st.keyField(),s))}}}return e._t}function Fn(t){const e=R(t);if(!e.wt)if("F"===e.limitType)e.wt=c2(e.path,e.collectionGroup,ku(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of ku(e))n.push(new Nu(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Es(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Es(e.startAt.position,e.startAt.inclusive):null;e.wt=c2(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.wt}function rm(t,e,n){return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ed(t,e){return Id(Fn(t),Fn(e))&&t.limitType===e.limitType}function y2(t){return`${Bo(Fn(t))}|lt:${t.limitType}`}function GT(t){return`Query(target=${function Uue(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Mu(r.value)}`;var r}).join(", ")}]`),md(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>{return`${(r=n).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Mu(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Mu(n)).join(",")),`Target(${e})`}(Fn(t))}; limitType=${t.limitType})`}function WT(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):M.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of n.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=p2(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,ku(n),r)||n.endAt&&!function(i,s,o){const a=p2(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,ku(n),r)));var n,r}function w2(t){return(e,n)=>{let r=!1;for(const i of ku(t)){const s=Kue(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Kue(t,e,n){const r=t.field.isKeyField()?M.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?Is(a,u):L()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return L()}}function I2(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(e)?"-0":e}}function E2(t){return{integerValue:""+t}}function C2(t,e){return function n2(t){return"number"==typeof t&&Number.isInteger(t)&&!_d(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?E2(e):I2(t,e)}class im{constructor(){this._=void 0}}function Que(t,e,n){return t instanceof Pu?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof $o?D2(t,e):t instanceof jo?T2(t,e):function(r,i){const s=b2(r,i),o=S2(s)+S2(r.yt);return BT(s)&&BT(r.yt)?E2(o):I2(r.It,o)}(t,e)}function Yue(t,e,n){return t instanceof $o?D2(t,e):t instanceof jo?T2(t,e):n}function b2(t,e){return t instanceof Ou?BT(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class Pu extends im{}class $o extends im{constructor(e){super(),this.elements=e}}function D2(t,e){const n=A2(e);for(const r of t.elements)n.some(i=>Xr(i,r))||n.push(r);return{arrayValue:{values:n}}}class jo extends im{constructor(e){super(),this.elements=e}}function T2(t,e){let n=A2(e);for(const r of t.elements)n=n.filter(i=>!Xr(i,r));return{arrayValue:{values:n}}}class Ou extends im{constructor(e,n){super(),this.It=e,this.yt=n}}function S2(t){return et(t.integerValue||t.doubleValue)}function A2(t){return vd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Xue{constructor(e,n){this.version=e,this.transformResults=n}}class He{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new He}static exists(e){return new He(void 0,e)}static updateTime(e){return new He(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sm(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class om{}function x2(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Lu(t.key,He.none()):new Fu(t.key,t.data,He.none());{const n=t.data,r=Qt.empty();let i=new De(st.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Hi(t.key,r,new er(i.toArray()),He.none())}}function Jue(t,e,n){t instanceof Fu?function(r,i,s){const o=r.value.clone(),a=R2(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(r,i,s){if(!sm(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=R2(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(N2(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function bd(t,e,n,r){return t instanceof Fu?function(i,s,o,a){if(!sm(i.precondition,s))return o;const u=i.value.clone(),l=k2(i.fieldTransforms,a,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hi?function(i,s,o,a){if(!sm(i.precondition,s))return o;const u=k2(i.fieldTransforms,a,s),l=s.data;return l.setAll(N2(i)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):(o=n,sm(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function ele(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=b2(r.transform,i||null);null!=s&&(null===n&&(n=Qt.empty()),n.set(r.field,s))}return n||null}function M2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&Au(n,r,(i,s)=>function Zue(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof $o&&r instanceof $o||n instanceof jo&&r instanceof jo?Au(n.elements,r.elements,Xr):n instanceof Ou&&r instanceof Ou?Xr(n.yt,r.yt):n instanceof Pu&&r instanceof Pu);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class Fu extends om{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hi extends om{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function N2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function R2(t,e,n){const r=new Map;K(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Yue(o,a,n[i]))}return r}function k2(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Que(s,o,e))}return r}class Lu extends om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qT extends om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tle{constructor(e){this.count=e}}var pt,me;function P2(t){switch(t){default:return L();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function O2(t){if(void 0===t)return it("GRPC error has no .code"),w.UNKNOWN;switch(t){case pt.OK:return w.OK;case pt.CANCELLED:return w.CANCELLED;case pt.UNKNOWN:return w.UNKNOWN;case pt.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case pt.INTERNAL:return w.INTERNAL;case pt.UNAVAILABLE:return w.UNAVAILABLE;case pt.UNAUTHENTICATED:return w.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case pt.NOT_FOUND:return w.NOT_FOUND;case pt.ALREADY_EXISTS:return w.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return w.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case pt.ABORTED:return w.ABORTED;case pt.OUT_OF_RANGE:return w.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return w.UNIMPLEMENTED;case pt.DATA_LOSS:return w.DATA_LOSS;default:return L()}}(me=pt||(pt={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";class Cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return JB(this.inner)}size(){return this.innerSize}}const nle=new Je(M.comparator);function Ln(){return nle}const F2=new Je(M.comparator);function Dd(...t){let e=F2;for(const n of t)e=e.insert(n.key,n);return e}function L2(t){let e=F2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Jr(){return Td()}function V2(){return Td()}function Td(){return new Cs(t=>t.toString(),(t,e)=>t.isEqual(e))}const rle=new Je(M.comparator),ile=new De(M.comparator);function re(...t){let e=ile;for(const n of t)e=e.add(n);return e}const sle=new De(Z);function am(){return sle}class Sd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Ad.createSynthesizedTargetChangeForCurrentChange(e,n)),new Sd(G.min(),r,am(),Ln(),re())}}class Ad{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Ad(Et.EMPTY_BYTE_STRING,n,re(),re(),re())}}class um{constructor(e,n,r,i){this.Tt=e,this.removedTargetIds=n,this.key=r,this.Et=i}}class U2{constructor(e,n){this.targetId=e,this.At=n}}class B2{constructor(e,n,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $2{constructor(){this.Rt=0,this.bt=H2(),this.Pt=Et.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=re(),n=re(),r=re();return this.bt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:L()}}),new Ad(this.Pt,this.vt,e,n,r)}Nt(){this.Vt=!1,this.bt=H2()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class ole{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ln(),this.qt=j2(),this.Kt=new De(Z)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const r=this.zt(n);switch(e.state){case 0:this.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),r.Ct(e.resumeToken));break;default:L()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((r,i)=>{this.Ht(i)&&n(i)})}Yt(e){const n=e.targetId,r=e.At.count,i=this.Xt(n);if(i){const s=i.target;if(tm(s))if(0===r){const o=new M(s.path);this.jt(n,o,Oe.newNoDocument(o,G.min()))}else K(1===r);else this.Zt(n)!==r&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&tm(a.target)){const u=new M(a.target.path);null!==this.Ut.get(u)||this.ee(o,u)||this.jt(o,u,Oe.newNoDocument(u,e))}s.Dt&&(n.set(o,s.xt()),s.Nt())}});let r=re();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Xt(u);return!l||2===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const i=new Sd(e,n,this.Kt,this.Ut,r);return this.Ut=Ln(),this.qt=j2(),this.Kt=new De(Z),i}Qt(e,n){if(!this.Ht(e))return;const r=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,n)?i.kt(n,1):i.Mt(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let n=this.Lt.get(e);return n||(n=new $2,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new De(Z),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=null!==this.Xt(e);return n||T("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new $2),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function j2(){return new Je(M.comparator)}function H2(){return new Je(M.comparator)}const ale={asc:"ASCENDING",desc:"DESCENDING"},ule={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class lle{constructor(e,n){this.databaseId=e,this.gt=n}}function xd(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function G2(t,e){return t.gt?e.toBase64():e.toUint8Array()}function cle(t,e){return xd(t,e.toTimestamp())}function Rt(t){return K(!!t),G.fromTimestamp(function(e){const n=vs(e);return new Ke(n.seconds,n.nanos)}(t))}function zT(t,e){return(n=t,new ge(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function W2(t){const e=ge.fromString(t);return K(e$(e)),e}function Md(t,e){return zT(t.databaseId,e.path)}function ei(t,e){const n=W2(e);if(n.get(1)!==t.databaseId.projectId)throw new D(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new D(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(z2(n))}function KT(t,e){return zT(t.databaseId,e)}function Nd(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function z2(t){return K(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function K2(t,e,n){return{name:Md(t,e),fields:n.value.mapValue.fields}}function Y2(t,e){return{documents:[KT(t,e.path)]}}function Z2(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=KT(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=KT(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0===u.length)return;const l=u.map(c=>function(d){if("=="===d.op){if(s2(d.value))return{unaryFilter:{field:Vu(d.field),op:"IS_NAN"}};if(i2(d.value))return{unaryFilter:{field:Vu(d.field),op:"IS_NULL"}}}else if("!="===d.op){if(s2(d.value))return{unaryFilter:{field:Vu(d.field),op:"IS_NOT_NAN"}};if(i2(d.value))return{unaryFilter:{field:Vu(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vu(d.field),op:mle(d.op),value:d.value}}}(c));return 1===l.length?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(l=>{return{field:Vu((c=l).field),direction:gle(c.dir)};var c})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=(l=e.limit,t.gt||md(l)?l:{value:l});var l,a,u;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),n}function X2(t){let e=function q2(t){const e=W2(t);return 4===e.length?ge.emptyPath():z2(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){K(1===r);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=J2(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>{return new Nu(Uu((d=c).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(c){let d;return d="object"==typeof c?c.value:c,md(d)?null:d}(n.limit));let u=null;var c;n.startAt&&(u=new Es((c=n.startAt).values||[],!!c.before));let l=null;return n.endAt&&(l=function(c){return new Es(c.values||[],!c.before)}(n.endAt)),function m2(t,e,n,r,i,s,o,a){return new ji(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,l)}function J2(t){return t?void 0!==t.unaryFilter?[yle(t)]:void 0!==t.fieldFilter?[_le(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(e=>J2(e)).reduce((e,n)=>e.concat(n)):L():[]}function gle(t){return ale[t]}function mle(t){return ule[t]}function Vu(t){return{fieldPath:t.canonicalString()}}function Uu(t){return st.fromServerFormat(t.fieldPath)}function _le(t){return Yt.create(Uu(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return L()}}(t.fieldFilter.op),t.fieldFilter.value)}function yle(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Uu(t.unaryFilter.field);return Yt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Uu(t.unaryFilter.field);return Yt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uu(t.unaryFilter.field);return Yt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Uu(t.unaryFilter.field);return Yt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return L()}}function vle(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function e$(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class ZT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Jue(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=V2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=x2(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Au(this.mutations,e.mutations,(n,r)=>M2(n,r))&&Au(this.baseMutations,e.baseMutations,(n,r)=>M2(n,r))}}class XT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){K(e.mutations.length===r.length);let i=rle;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new XT(e,n,r,i)}}class JT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class bs{constructor(e,n,r,i,s=G.min(),o=G.min(),a=Et.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class a${constructor(e){this.re=e}}function e0(t){const e=X2({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?rm(e,e.limit,"L"):e}class qo{constructor(){}ce(e,n){this.ae(e,n),n.he()}ae(e,n){if("nullValue"in e)this.le(n,5);else if("booleanValue"in e)this.le(n,10),n.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(n,15),n.fe(et(e.integerValue));else if("doubleValue"in e){const r=et(e.doubleValue);isNaN(r)?this.le(n,13):(this.le(n,15),_d(r)?n.fe(0):n.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(n,20),"string"==typeof r?n.de(r):(n.de(`${r.seconds||""}`),n.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,n),this.we(n);else if("bytesValue"in e)this.le(n,30),n.me(Fo(e.bytesValue)),this.we(n);else if("referenceValue"in e)this.ge(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(n,45),n.fe(r.latitude||0),n.fe(r.longitude||0)}else"mapValue"in e?o2(e)?this.le(n,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,n),this.we(n)):"arrayValue"in e?(this.pe(e.arrayValue,n),this.we(n)):L()}_e(e,n){this.le(n,25),this.Ie(e,n)}Ie(e,n){n.de(e)}ye(e,n){const r=e.fields||{};this.le(n,55);for(const i of Object.keys(r))this._e(i,n),this.ae(r[i],n)}pe(e,n){const r=e.values||[];this.le(n,50);for(const i of r)this.ae(i,n)}ge(e,n){this.le(n,37),M.fromName(e).path.forEach(r=>{this.le(n,60),this.Ie(r,n)})}le(e,n){e.fe(n)}we(e){e.fe(2)}}qo.Te=new qo;class Wle{constructor(){this.Ye=new n0}addToCollectionParentIndex(e,n){return this.Ye.add(n),v.resolve()}getCollectionParents(e,n){return v.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return v.resolve()}deleteFieldIndex(e,n){return v.resolve()}getDocumentsMatchingTarget(e,n){return v.resolve(null)}getIndexType(e,n){return v.resolve(0)}getFieldIndexes(e,n){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,n){return v.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,n){return v.resolve(Jn.min())}updateCollectionGroup(e,n,r){return v.resolve()}updateIndexEntries(e,n){return v.resolve()}}class n0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new De(ge.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new De(ge.comparator)).toArray()}}new Uint8Array(0);class Vn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(41943040,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);class Qo{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Qo(0)}static vn(){return new Qo(-1)}}class tce{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class A${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.getBaseDocument(e,n,r))).next(i=>(null!==r&&bd(r.mutation,i,er.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=Jr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Dd();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ln();const o=Td(),a=Td();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(void 0===c||c.mutation instanceof Hi)?s=s.insert(l.key,l):void 0!==c&&(o.set(l.key,c.mutation.getFieldMask()),bd(c.mutation,l,c.mutation.getFieldMask(),Ke.now()))}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var d;return a.set(l,new tce(c,null!==(d=o.get(l))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Td();let i=new Je((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let c=r.get(u)||er.empty();c=a.applyToLocalView(l,c),r.set(u,c);const d=(i.get(a.batchId)||re()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,d=V2();c.forEach(h=>{if(!s.has(h)){const f=x2(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return v.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return M.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function HT(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):v.resolve(Jr());let a=-1,u=s;return o.next(l=>v.forEach(l,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?v.resolve():this.getBaseDocument(e,c,d).next(h=>{u=u.insert(c,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,re())).next(c=>({batchId:a,changes:L2(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(r=>{let i=Dd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Dd();return this.indexManager.getCollectionParents(e,i).next(o=>v.forEach(o,a=>{const u=(l=n,c=a.child(i),new ji(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(l=>{l.forEach((c,d)=>{s=s.insert(c,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(s=>{s.forEach((a,u)=>{const l=u.getKey();null===i.get(l)&&(i=i.insert(l,Oe.newInvalidDocument(l)))});let o=Dd();return i.forEach((a,u)=>{const l=s.get(a);void 0!==l&&bd(l.mutation,u,er.empty(),Ke.now()),WT(n,u)&&(o=o.insert(a,u))}),o})}getBaseDocument(e,n,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,n):v.resolve(Oe.newInvalidDocument(n))}}class nce{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return v.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:Rt(r.createTime)}),v.resolve()}getNamedQuery(e,n){return v.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,{name:(r=n).name,query:e0(r.bundledQuery),readTime:Rt(r.readTime)}),v.resolve();var r}}class rce{constructor(){this.overlays=new Je(M.comparator),this.es=new Map}getOverlay(e,n){return v.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Jr();return v.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ue(e,n,s)}),v.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),v.resolve()}getOverlaysForCollection(e,n,r){const i=Jr(),s=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return v.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Je((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);null===c&&(c=Jr(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Jr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return v.resolve(a)}ue(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new JT(n,r));let s=this.es.get(n);void 0===s&&(s=re(),this.es.set(n,s)),this.es.set(n,s.add(r.key))}}class r0{constructor(){this.ns=new De(Pt.ss),this.rs=new De(Pt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new Pt(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new Pt(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new M(new ge([])),r=new Pt(n,e),i=new Pt(n,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new M(new ge([])),r=new Pt(n,e),i=new Pt(n,e+1);let s=re();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Pt(e,0),r=this.ns.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Pt{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return M.comparator(e.key,n.key)||Z(e._s,n._s)}static os(e,n){return Z(e._s,n._s)||M.comparator(e.key,n.key)}}class ice{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new De(Pt.ss)}checkEmpty(e){return v.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.ws;this.ws++;const o=new ZT(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new Pt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(o)}lookupMutationBatch(e,n){return v.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.ps(n+1),s=i<0?0:i;return v.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pt(n,0),i=new Pt(n,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const a=this.ys(o._s);s.push(a)}),v.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new De(Z);return n.forEach(i=>{const s=new Pt(i,0),o=new Pt(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{r=r.add(a._s)})}),v.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;M.isDocumentKey(s)||(s=s.child(""));const o=new Pt(new M(s),0);let a=new De(Z);return this.gs.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u._s)),!0)},o),v.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){K(0===this.Ts(n.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return v.forEach(n.mutations,i=>{const s=new Pt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new Pt(n,0),i=this.gs.firstAfterOrEqual(r);return v.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return v.resolve()}Ts(e,n){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class sce{constructor(e){this.Es=e,this.docs=new Je(M.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return v.resolve(r?r.document.mutableCopy():Oe.newInvalidDocument(n))}getEntries(e,n){let r=Ln();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Oe.newInvalidDocument(i))}),v.resolve(r)}getAllFromCollection(e,n,r){let i=Ln();const s=new M(n.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:u}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||OT(QB(u),r)<=0||(i=i.insert(u.key,u.mutableCopy()))}return v.resolve(i)}getAllFromCollectionGroup(e,n,r,i){L()}As(e,n){return v.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oce(this)}getSize(e){return v.resolve(this.size)}}class oce extends class Xle{constructor(){this.changes=new Cs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Oe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?v.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),v.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}class ace{constructor(e){this.persistence=e,this.Rs=new Cs(n=>Bo(n),Id),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.bs=0,this.Ps=new r0,this.targetCount=0,this.vs=Qo.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,i)=>n(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),v.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Qo(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,v.resolve()}updateTargetData(e,n){return this.Dn(n),v.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(s).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return v.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),v.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),v.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),v.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return v.resolve(r)}containsKey(e,n){return v.resolve(this.Ps.containsKey(n))}}class x${constructor(e,n){this.Vs={},this.overlays={},this.Ss=new On(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new ace(this),this.indexManager=new Wle,this.remoteDocumentCache=new sce(r=>this.referenceDelegate.xs(r)),this.It=new a$(n),this.Ns=new nce(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rce,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new ice(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){T("MemoryPersistence","Starting transaction:",e);const i=new uce(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Ms(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Os(e,n){return v.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class uce extends class xue{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}{constructor(e){super(),this.currentSequenceNumber=e}}class _m{constructor(e){this.persistence=e,this.Fs=new r0,this.$s=null}static Bs(e){return new _m(e)}get Ls(){if(this.$s)return this.$s;throw L()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),v.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),v.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Ms(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Ls,r=>{const i=M.fromPath(r);return this.Us(e,i).next(s=>{s||n.removeEntry(i,G.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return v.or([()=>v.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Os(e,n)])}}class u0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=i}static Ci(e,n){let r=re(),i=re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new u0(e,n.fromCache,r,i)}}class N${constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.ki(e,n).next(s=>s||this.Mi(e,n,i,r)).next(s=>s||this.Oi(e,n))}ki(e,n){if(_2(n))return v.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=rm(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=re(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Fi(n,a);return this.$i(n,l,o,u.readTime)?this.ki(e,rm(n,null,"F")):this.Bi(e,l,n,u)}))})))}Mi(e,n,r,i){return _2(n)||i.isEqual(G.min())?this.Oi(e,n):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(n,s);return this.$i(n,o,r,i)?this.Oi(e,n):(RT()<=fe.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),GT(n)),this.Bi(e,o,n,function KB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=G.fromTimestamp(1e9===r?new Ke(n+1,0):new Ke(n,r));return new Jn(i,M.empty(),e)}(i,-1)))})}Fi(e,n){let r=new De(w2(e));return n.forEach((i,s)=>{WT(e,s)&&(r=r.add(s))}),r}$i(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Oi(e,n){return RT()<=fe.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",GT(n)),this.Ni.getDocumentsMatchingQuery(e,n,Jn.min())}Bi(e,n,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class cce{constructor(e,n,r,i){this.persistence=e,this.Li=n,this.It=i,this.Ui=new Je(Z),this.qi=new Cs(s=>Bo(s),Id),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A$(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function k$(t,e){return l0.apply(this,arguments)}function l0(){return l0=m(function*(t,e){const n=R(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=re();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({ji:l,removedBatchIds:o,addedBatchIds:a}))})})}),l0.apply(this,arguments)}function dce(t,e){const n=R(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,l){const c=u.batch,d=c.keys();let h=v.resolve();return d.forEach(f=>{h=h.next(()=>l.getEntry(a,f)).next(p=>{const g=u.docVersions.get(f);K(null!==g),p.version.compareTo(g)<0&&(c.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),l.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=re();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function P$(t){const e=R(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function hce(t,e){const n=R(t),r=e.snapshotVersion;let i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.Cs.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Cs.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,_;e.targetMismatches.has(d)?f=f.withResumeToken(Et.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),g=f,_=c,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0)&&a.push(n.Cs.updateTargetData(s,f))});let u=Ln(),l=re();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(function O$(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ln();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(G.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):T("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Wi:o,zi:i}})}(s,o,e.documentUpdates).next(c=>{u=c.Wi,l=c.zi})),!r.isEqual(G.min())){const c=n.Cs.getLastRemoteSnapshotVersion(s).next(d=>n.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return v.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.Ui=i,s))}function fce(t,e){const n=R(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ju(t,e){const n=R(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Cs.getTargetData(r,e).next(s=>s?(i=s,v.resolve(i)):n.Cs.allocateTargetId(r).next(o=>(i=new bs(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(r.targetId,r),n.qi.set(e,r.targetId)),r})}function Hu(t,e,n){return c0.apply(this,arguments)}function c0(){return c0=m(function*(t,e,n){const r=R(t),i=r.Ui.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ys(o))throw o;T("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),c0.apply(this,arguments)}function vm(t,e,n){const r=R(t);let i=G.min(),s=re();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,l){const c=R(a),d=c.qi.get(l);return void 0!==d?v.resolve(c.Ui.get(d)):c.Cs.getTargetData(u,l)}(r,o,Fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?i:G.min(),n?s:re())).next(a=>(function V$(t,e,n){let r=G.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ki.set(e,r)}(r,function v2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,Hi:s})))}class g0{constructor(){this.activeTargetIds=am()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $${constructor(){this.Lr=new g0,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,r){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new g0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mce{qr(e){}shutdown(){}}class j${constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const _ce={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class yce{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class vce extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,r,i,s){const o=this.ao(e,n);T("RestConnection","Sending: ",o,r);const a={};return this.ho(a,i,s),this.lo(e,o,a,r).then(u=>(T("RestConnection","Received: ",u),u),u=>{throw Su("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}fo(e,n,r,i,s,o){return this.co(e,n,r,i,s)}ho(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ao(e,n){return`${this.oo}/v1/${n}:${_ce[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,n,r,i){return new Promise((s,o)=>{const a=new yue;a.listenOnce(gue.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case NT.NO_ERROR:const l=a.getResponseJson();T("Connection","XHR received:",JSON.stringify(l)),s(l);break;case NT.TIMEOUT:T("Connection",'RPC "'+e+'" timed out'),o(new D(w.DEADLINE_EXCEEDED,"Request time out"));break;case NT.HTTP_ERROR:const c=a.getStatus();if(T("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const d=a.getResponseJson().error;if(d&&d.status&&d.message){const h=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(p)>=0?p:w.UNKNOWN}(d.status);o(new D(h,d.message))}else o(new D(w.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new D(w.UNAVAILABLE,"Connection failed."));break;default:L()}}finally{T("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);a.send(n,"POST",u,r,15)})}_o(e,n,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fue(),o=pue(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new _ue({})),this.ho(a.initMessageHeaders,n,r),Pp()||TI()||function CJ(){return Tt().indexOf("Electron/")>=0}()||qF()||function bJ(){return Tt().indexOf("MSAppHost/")>=0}()||Op()||(a.httpHeadersOverwriteParam="$httpHeaders");const u=i.join("");T("Connection","Creating WebChannel: "+u,a);const l=s.createWebChannel(u,a);let c=!1,d=!1;const h=new yce({Hr:p=>{d?T("Connection","Not sending because WebChannel is closed:",p):(c||(T("Connection","Opening WebChannel transport."),l.open(),c=!0),T("Connection","WebChannel sending:",p),l.send(p))},Jr:()=>l.close()}),f=(p,g,_)=>{p.listen(g,I=>{try{_(I)}catch(E){setTimeout(()=>{throw E},0)}})};return f(l,Kg.EventType.OPEN,()=>{d||T("Connection","WebChannel transport opened.")}),f(l,Kg.EventType.CLOSE,()=>{d||(d=!0,T("Connection","WebChannel transport closed"),h.io())}),f(l,Kg.EventType.ERROR,p=>{d||(d=!0,Su("Connection","WebChannel transport errored:",p),h.io(new D(w.UNAVAILABLE,"The operation could not be completed")))}),f(l,Kg.EventType.MESSAGE,p=>{var g;if(!d){const _=p.data[0];K(!!_);const I=_,E=I.error||(null===(g=I[0])||void 0===g?void 0:g.error);if(E){T("Connection","WebChannel received error:",E);const y=E.status;let S=function(V){const Te=pt[V];if(void 0!==Te)return O2(Te)}(y),k=E.message;void 0===S&&(S=w.INTERNAL,k="Unknown error status: "+y+" with message "+E.message),d=!0,h.io(new D(S,k)),l.close()}else T("Connection","WebChannel received:",_),h.ro(_)}}),f(o,mue.STAT_EVENT,p=>{p.stat===jB.PROXY?T("Connection","Detected buffering proxy"):p.stat===jB.NOPROXY&&T("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function Em(){return typeof document<"u"?document:null}function $d(t){return new lle(t,!0)}class _0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=n,this.wo=r,this.mo=i,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&T("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class G${constructor(e,n,r,i,s,o,a,u){this.Hs=e,this.Po=r,this.vo=i,this.Vo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new _0(e,n)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return m(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return m(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,n){var r=this;return m(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(it(n.toString()),it("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):n&&n.code===w.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(n)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===n&&this.Go(r,i)},r=>{e(()=>{const i=new D(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao(m(function*(){e.state=0,e.start()}))}Qo(e){return T("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wce extends G${constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.It=s}jo(e,n){return this.Vo._o("Listen",e,n)}onMessage(e){this.xo.reset();const n=function hle(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:L(),i=e.targetChange.targetIds||[],s=function(u,l){return u.gt?(K(void 0===l||"string"==typeof l),Et.fromBase64String(l||"")):(K(void 0===l||l instanceof Uint8Array),Et.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const l=void 0===u.code?w.UNKNOWN:O2(u.code);return new D(l,u.message||"")}(o);n=new B2(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ei(t,r.document.name),s=Rt(r.document.updateTime),o=new Qt({mapValue:{fields:r.document.fields}}),a=Oe.newFoundDocument(i,s,o);n=new um(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const r=e.documentDelete,i=ei(t,r.document),s=r.readTime?Rt(r.readTime):G.min(),o=Oe.newNoDocument(i,s);n=new um([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ei(t,r.document);n=new um([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return L();{const r=e.filter,s=new tle(r.count||0);n=new U2(r.targetId,s)}}var u;return n}(this.It,e),r=function(i){if(!("targetChange"in i))return G.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?G.min():s.readTime?Rt(s.readTime):G.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=Nd(this.It),n.addTarget=function(i,s){let o;const a=s.target;return o=tm(a)?{documents:Y2(i,a)}:{query:Z2(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=G2(i,s.resumeToken):s.snapshotVersion.compareTo(G.min())>0&&(o.readTime=xd(i,s.snapshotVersion.toTimestamp())),o}(this.It,e);const r=function ple(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return L()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=Nd(this.It),n.removeTarget=e,this.Bo(n)}}class Ice extends G${constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.Vo._o("Write",e,n)}onMessage(e){if(K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=function fle(t,e){return t&&t.length>0?(K(void 0!==e),t.map(n=>function(r,i){let s=Rt(r.updateTime?r.updateTime:i);return s.isEqual(G.min())&&(s=Rt(i)),new Xue(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Rt(e.commitTime);return this.listener.Zo(r,n)}return K(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Nd(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Rd(t,e){let n;if(e instanceof Fu)n={update:K2(t,e.key,e.value)};else if(e instanceof Lu)n={delete:Md(t,e.key)};else if(e instanceof Hi)n={update:K2(t,e.key,e.data),updateMask:vle(e.fieldMask)};else{if(!(e instanceof qT))return L();n={verify:Md(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Pu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof $o)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof jo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ou)return{fieldPath:s.field.canonicalString(),increment:o.yt};throw L()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:cle(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:L()),n;var i}(this.It,r))};this.Bo(n)}}class Ece extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new D(w.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.Vo.co(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new D(w.UNKNOWN,i.toString())})}fo(e,n,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.Vo.fo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(w.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class Cce{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(it(n),this.ou=!1):T("OnlineStateTracker",n)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class bce{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(a=>{r.enqueueAndForget(m(function*(){var u;Ss(o)&&(T("RemoteStore","Restarting streams for network reachability change."),yield(u=m(function*(l){const c=R(l);c._u.add(4),yield Gu(c),c.gu.set("Unknown"),c._u.delete(4),yield jd(c)}),function(l){return u.apply(this,arguments)})(o))}))}),this.gu=new Cce(r,i)}}function jd(t){return y0.apply(this,arguments)}function y0(){return y0=m(function*(t){if(Ss(t))for(const e of t.wu)yield e(!0)}),y0.apply(this,arguments)}function Gu(t){return v0.apply(this,arguments)}function v0(){return v0=m(function*(t){for(const e of t.wu)yield e(!1)}),v0.apply(this,arguments)}function Cm(t,e){const n=R(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),E0(n)?I0(n):qu(n).ko()&&w0(n,e))}function Hd(t,e){const n=R(t),r=qu(n);n.du.delete(e),r.ko()&&W$(n,e),0===n.du.size&&(r.ko()?r.Fo():Ss(n)&&n.gu.set("Unknown"))}function w0(t,e){t.yu.Ot(e.targetId),qu(t).zo(e)}function W$(t,e){t.yu.Ot(e),qu(t).Ho(e)}function I0(t){t.yu=new ole({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),qu(t).start(),t.gu.uu()}function E0(t){return Ss(t)&&!qu(t).No()&&t.du.size>0}function Ss(t){return 0===R(t)._u.size}function q$(t){t.yu=void 0}function Dce(t){return C0.apply(this,arguments)}function C0(){return C0=m(function*(t){t.du.forEach((e,n)=>{w0(t,e)})}),C0.apply(this,arguments)}function Tce(t,e){return b0.apply(this,arguments)}function b0(){return b0=m(function*(t,e){q$(t),E0(t)?(t.gu.hu(e),I0(t)):t.gu.set("Unknown")}),b0.apply(this,arguments)}function Sce(t,e,n){return D0.apply(this,arguments)}function D0(){return D0=m(function*(t,e,n){if(t.gu.set("Online"),e instanceof B2&&2===e.state&&e.cause)try{yield(r=m(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.du.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.du.delete(a),i.yu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){T("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bm(t,r)}else if(e instanceof um?t.yu.Gt(e):e instanceof U2?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(G.min()))try{const r=yield P$(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.yu.te(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const l=i.du.get(u);l&&i.du.set(u,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.du.get(a);if(!u)return;i.du.set(a,u.withResumeToken(Et.EMPTY_BYTE_STRING,u.snapshotVersion)),W$(i,a);const l=new bs(u.target,a,1,u.sequenceNumber);w0(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){T("RemoteStore","Failed to raise snapshot:",r),yield bm(t,r)}var r}),D0.apply(this,arguments)}function bm(t,e,n){return T0.apply(this,arguments)}function T0(){return T0=m(function*(t,e,n){if(!ys(e))throw e;t._u.add(1),yield Gu(t),t.gu.set("Offline"),n||(n=()=>P$(t.localStore)),t.asyncQueue.enqueueRetryable(m(function*(){T("RemoteStore","Retrying IndexedDB access"),yield n(),t._u.delete(1),yield jd(t)}))}),T0.apply(this,arguments)}function z$(t,e){return e().catch(n=>bm(t,n,e))}function Wu(t){return S0.apply(this,arguments)}function S0(){return S0=m(function*(t){const e=R(t),n=As(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Ace(e);)try{const i=yield fce(e.localStore,r);if(null===i){0===e.fu.length&&n.Fo();break}r=i.batchId,xce(e,i)}catch(i){yield bm(e,i)}K$(e)&&Q$(e)}),S0.apply(this,arguments)}function Ace(t){return Ss(t)&&t.fu.length<10}function xce(t,e){t.fu.push(e);const n=As(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function K$(t){return Ss(t)&&!As(t).No()&&t.fu.length>0}function Q$(t){As(t).start()}function Mce(t){return A0.apply(this,arguments)}function A0(){return A0=m(function*(t){As(t).eu()}),A0.apply(this,arguments)}function Nce(t){return x0.apply(this,arguments)}function x0(){return x0=m(function*(t){const e=As(t);for(const n of t.fu)e.Xo(n.mutations)}),x0.apply(this,arguments)}function Rce(t,e,n){return M0.apply(this,arguments)}function M0(){return M0=m(function*(t,e,n){const r=t.fu.shift(),i=XT.from(r,e,n);yield z$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Wu(t)}),M0.apply(this,arguments)}function kce(t,e){return N0.apply(this,arguments)}function N0(){return N0=m(function*(t,e){var n;e&&As(t).Yo&&(yield(n=m(function*(r,i){if(P2(s=i.code)&&s!==w.ABORTED){const o=r.fu.shift();As(r).Oo(),yield z$(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Wu(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),K$(t)&&Q$(t)}),N0.apply(this,arguments)}function Y$(t,e){return R0.apply(this,arguments)}function R0(){return R0=m(function*(t,e){const n=R(t);n.asyncQueue.verifyOperationInProgress(),T("RemoteStore","RemoteStore received new credentials");const r=Ss(n);n._u.add(3),yield Gu(n),r&&n.gu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),yield jd(n)}),R0.apply(this,arguments)}function P0(){return P0=m(function*(t,e){const n=R(t);e?(n._u.delete(2),yield jd(n)):e||(n._u.add(2),yield Gu(n),n.gu.set("Unknown"))}),P0.apply(this,arguments)}function qu(t){return t.pu||(t.pu=function(e,n,r){const i=R(e);return i.su(),new wce(n,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(t.datastore,t.asyncQueue,{Yr:Dce.bind(null,t),Zr:Tce.bind(null,t),Wo:Sce.bind(null,t)}),t.wu.push(function(){var e=m(function*(n){n?(t.pu.Oo(),E0(t)?I0(t):t.gu.set("Unknown")):(yield t.pu.stop(),q$(t))});return function(n){return e.apply(this,arguments)}}())),t.pu}function As(t){return t.Iu||(t.Iu=function(e,n,r){const i=R(e);return i.su(),new Ice(n,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(t.datastore,t.asyncQueue,{Yr:Mce.bind(null,t),Zr:kce.bind(null,t),tu:Nce.bind(null,t),Zo:Rce.bind(null,t)}),t.wu.push(function(){var e=m(function*(n){n?(t.Iu.Oo(),yield Wu(t)):(yield t.Iu.stop(),t.fu.length>0&&(T("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Iu}class O0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new O0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zu(t,e){if(it("AsyncQueue",`${e}: ${t}`),ys(t))return new D(w.UNAVAILABLE,`${e}: ${t}`);throw t}class Ku{constructor(e){this.comparator=e?(n,r)=>e(n,r)||M.comparator(n.key,r.key):(n,r)=>M.comparator(n.key,r.key),this.keyedMap=Dd(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new Ku(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ku)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ku;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Z${constructor(){this.Tu=new Je(M.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(n,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(n):1===e.type&&2===r.type?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):L():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qu{constructor(e,n,r,i,s,o,a,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u}static fromInitialDocuments(e,n,r,i){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Qu(e,n,Ku.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Pce{constructor(){this.Au=void 0,this.listeners=[]}}class Oce{constructor(){this.queries=new Cs(e=>y2(e),Ed),this.onlineState="Unknown",this.Ru=new Set}}function L0(){return L0=m(function*(t,e){const n=R(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Pce),i)try{s.Au=yield n.onListen(r)}catch(o){const a=zu(o,`Initialization of query '${GT(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.bu(n.onlineState),s.Au&&e.Pu(s.Au)&&B0(n)}),L0.apply(this,arguments)}function U0(){return U0=m(function*(t,e){const n=R(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),U0.apply(this,arguments)}function Fce(t,e){const n=R(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.Pu(i)&&(r=!0);o.Au=i}}r&&B0(n)}function Lce(t,e,n){const r=R(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function B0(t){t.Ru.forEach(e=>{e.next()})}class $0{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Qu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){return!e.fromCache||!(this.options.Nu&&"Offline"!==n||e.docs.isEmpty()&&"Offline"!==n)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Qu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class ej{constructor(e){this.key=e}}class tj{constructor(e){this.key=e}}class nj{constructor(e,n){this.query=e,this.Lu=n,this.Uu=null,this.current=!1,this.qu=re(),this.mutatedKeys=re(),this.Ku=w2(e),this.Gu=new Ku(this.Ku)}get Qu(){return this.Lu}ju(e,n){const r=n?n.Wu:new Z$,i=n?n.Gu:this.Gu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=WT(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),_=!0):this.zu(h,f)||(r.track({type:2,doc:f}),_=!0,(u&&this.Ku(f,u)>0||l&&this.Ku(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(u||l)&&(a=!0)),_&&(f?(o=o.add(f),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Gu:o,Wu:r,$i:a,mutatedKeys:s}}zu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const s=e.Wu.Eu();s.sort((l,c)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return L()}};return f(d)-f(h)}(l.type,c.type)||this.Ku(l.doc,c.doc)),this.Hu(r);const o=n?this.Ju():[],a=0===this.qu.size&&this.current?1:0,u=a!==this.Uu;return this.Uu=a,0!==s.length||u?{snapshot:new Qu(this.query,e.Gu,i,s,e.mutatedKeys,0===a,u,!1),Yu:o}:{Yu:o}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Z$,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(n=>this.Lu=this.Lu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Lu=this.Lu.delete(n)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=re(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const n=[];return e.forEach(r=>{this.qu.has(r)||n.push(new tj(r))}),this.qu.forEach(r=>{e.has(r)||n.push(new ej(r))}),n}Zu(e){this.Lu=e.Hi,this.qu=re();const n=this.ju(e.documents);return this.applyChanges(n,!0)}tc(){return Qu.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class Bce{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $ce{constructor(e){this.key=e,this.ec=!1}}class jce{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new Cs(a=>y2(a),Ed),this.ic=new Map,this.rc=new Set,this.oc=new Je(M.comparator),this.uc=new Map,this.cc=new r0,this.ac={},this.hc=new Map,this.lc=Qo.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Hce(t,e){return j0.apply(this,arguments)}function j0(){return j0=m(function*(t,e){const n=dS(t);let r,i;const s=n.sc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.tc();else{const o=yield ju(n.localStore,Fn(e));n.isPrimaryClient&&Cm(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield H0(n,e,r,"current"===a)}return i}),j0.apply(this,arguments)}function H0(t,e,n,r){return G0.apply(this,arguments)}function G0(){return G0=m(function*(t,e,n,r){t.dc=(c,d,h)=>{return(f=m(function*(p,g,_,I){let E=g.view.ju(_);E.$i&&(E=yield vm(p.localStore,g.query,!1).then(({documents:k})=>g.view.ju(k,E)));const y=I&&I.targetChanges.get(g.targetId),S=g.view.applyChanges(E,p.isPrimaryClient,y);return eS(p,g.targetId,S.Yu),S.snapshot}),function(p,g,_,I){return f.apply(this,arguments)})(t,c,d,h);var f};const i=yield vm(t.localStore,e,!0),s=new nj(e,i.Hi),o=s.ju(i.documents),a=Ad.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a);eS(t,n,u.Yu);const l=new Bce(e,n,s);return t.sc.set(e,l),t.ic.has(n)?t.ic.get(n).push(e):t.ic.set(n,[e]),u.snapshot}),G0.apply(this,arguments)}function Gce(t,e){return W0.apply(this,arguments)}function W0(){return W0=m(function*(t,e){const n=R(t),r=n.sc.get(e),i=n.ic.get(r.targetId);if(i.length>1)return n.ic.set(r.targetId,i.filter(s=>!Ed(s,e))),void n.sc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Hu(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Hd(n.remoteStore,r.targetId),Yu(n,r.targetId)}).catch(_s))):(Yu(n,r.targetId),yield Hu(n.localStore,r.targetId,!0))}),W0.apply(this,arguments)}function q0(){return q0=m(function*(t,e,n){const r=hS(t);try{const i=yield function(s,o){const a=R(s),u=Ke.now(),l=o.reduce((h,f)=>h.add(f.key),re());let c,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Ln(),p=re();return a.Gi.getEntries(h,l).next(g=>{f=g,f.forEach((_,I)=>{I.isValidDocument()||(p=p.add(_))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{c=g;const _=[];for(const I of o){const E=ele(I,c.get(I.key).overlayedDocument);null!=E&&_.push(new Hi(I.key,E,l2(E.value.mapValue),He.exists(!0)))}return a.mutationQueue.addMutationBatch(h,u,_,o)}).next(g=>{d=g;const _=g.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,_)})}).then(()=>({batchId:d.batchId,changes:L2(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.ac[s.currentUser.toKey()];u||(u=new Je(Z)),u=u.insert(o,a),s.ac[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Gi(r,i.changes),yield Wu(r.remoteStore)}catch(i){const s=zu(i,"Failed to persist write");n.reject(s)}}),q0.apply(this,arguments)}function rj(t,e){return z0.apply(this,arguments)}function z0(){return z0=m(function*(t,e){const n=R(t);try{const r=yield hce(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.uc.get(s);o&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ec=!0:i.modifiedDocuments.size>0?K(o.ec):i.removedDocuments.size>0&&(K(o.ec),o.ec=!1))}),yield Gi(n,r,e)}catch(r){yield _s(r)}}),z0.apply(this,arguments)}function ij(t,e,n){const r=R(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.sc.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=R(s);a.onlineState=o;let u=!1;a.queries.forEach((l,c)=>{for(const d of c.listeners)d.bu(o)&&(u=!0)}),u&&B0(a)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qce(t,e,n){return K0.apply(this,arguments)}function K0(){return K0=m(function*(t,e,n){const r=R(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.uc.get(e),s=i&&i.key;if(s){let o=new Je(M.comparator);o=o.insert(s,Oe.newNoDocument(s,G.min()));const a=re().add(s),u=new Sd(G.min(),new Map,new De(Z),o,a);yield rj(r,u),r.oc=r.oc.remove(s),r.uc.delete(e),tS(r)}else yield Hu(r.localStore,e,!1).then(()=>Yu(r,e,n)).catch(_s)}),K0.apply(this,arguments)}function zce(t,e){return Q0.apply(this,arguments)}function Q0(){return Q0=m(function*(t,e){const n=R(t),r=e.batch.batchId;try{const i=yield dce(n.localStore,e);J0(n,r,null),X0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Gi(n,i)}catch(i){yield _s(i)}}),Q0.apply(this,arguments)}function Kce(t,e,n){return Y0.apply(this,arguments)}function Y0(){return Y0=m(function*(t,e,n){const r=R(t);try{const i=yield function(s,o){const a=R(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return a.mutationQueue.lookupMutationBatch(u,o).next(c=>(K(null!==c),l=c.keys(),a.mutationQueue.removeMutationBatch(u,c))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>a.localDocuments.getDocuments(u,l))})}(r.localStore,e);J0(r,e,n),X0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Gi(r,i)}catch(i){yield _s(i)}}),Y0.apply(this,arguments)}function X0(t,e){(t.hc.get(e)||[]).forEach(n=>{n.resolve()}),t.hc.delete(e)}function J0(t,e,n){const r=R(t);let i=r.ac[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function Yu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ic.get(e))t.sc.delete(r),n&&t.nc._c(r,n);t.ic.delete(e),t.isPrimaryClient&&t.cc.ls(e).forEach(r=>{t.cc.containsKey(r)||sj(t,r)})}function sj(t,e){t.rc.delete(e.path.canonicalString());const n=t.oc.get(e);null!==n&&(Hd(t.remoteStore,n),t.oc=t.oc.remove(e),t.uc.delete(n),tS(t))}function eS(t,e,n){for(const r of n)r instanceof ej?(t.cc.addReference(r.key,e),Yce(t,r)):r instanceof tj?(T("SyncEngine","Document no longer in limbo: "+r.key),t.cc.removeReference(r.key,e),t.cc.containsKey(r.key)||sj(t,r.key)):L()}function Yce(t,e){const n=e.key,r=n.path.canonicalString();t.oc.get(n)||t.rc.has(r)||(T("SyncEngine","New document in limbo: "+n),t.rc.add(r),tS(t))}function tS(t){for(;t.rc.size>0&&t.oc.size<t.maxConcurrentLimboResolutions;){const e=t.rc.values().next().value;t.rc.delete(e);const n=new M(ge.fromString(e)),r=t.lc.next();t.uc.set(r,new $ce(n)),t.oc=t.oc.insert(n,r),Cm(t.remoteStore,new bs(Fn(Ru(n.path)),r,2,On.at))}}function Gi(t,e,n){return nS.apply(this,arguments)}function nS(){return nS=m(function*(t,e,n){const r=R(t),i=[],s=[],o=[];var a;r.sc.isEmpty()||(r.sc.forEach((a,u)=>{o.push(r.dc(u,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l.fromCache?"not-current":"current"),i.push(l);const c=u0.Ci(u.targetId,l);s.push(c)}}))}),yield Promise.all(o),r.nc.Wo(i),yield(a=m(function*(u,l){const c=R(u);try{yield c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>v.forEach(l,h=>v.forEach(h.Si,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>v.forEach(h.Di,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ys(d))throw d;T("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const f=c.Ui.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);c.Ui=c.Ui.insert(h,g)}}}),function(u,l){return a.apply(this,arguments)})(r.localStore,s))}),nS.apply(this,arguments)}function Zce(t,e){return rS.apply(this,arguments)}function rS(){return rS=m(function*(t,e){const n=R(t);if(!n.currentUser.isEqual(e)){T("SyncEngine","User change. New user:",e.toKey());const r=yield k$(n.localStore,e);n.currentUser=e,(i=n).hc.forEach(o=>{o.forEach(a=>{a.reject(new D(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gi(n,r.ji)}var i}),rS.apply(this,arguments)}function Xce(t,e){const n=R(t),r=n.uc.get(e);if(r&&r.ec)return re().add(r.key);{let i=re();const s=n.ic.get(e);if(!s)return i;for(const o of s){const a=n.sc.get(o);i=i.unionWith(a.view.Qu)}return i}}function dS(t){const e=R(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xce.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qce.bind(null,e),e.nc.Wo=Fce.bind(null,e.eventManager),e.nc._c=Lce.bind(null,e.eventManager),e}function hS(t){const e=R(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zce.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kce.bind(null,e),e}class ade{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return m(function*(){n.It=$d(e.databaseInfo.databaseId),n.sharedClientState=n.mc(e),n.persistence=n.gc(e),yield n.persistence.start(),n.localStore=n.yc(e),n.gcScheduler=n.Ic(e,n.localStore),n.indexBackfillerScheduler=n.Tc(e,n.localStore)})()}Ic(e,n){return null}Tc(e,n){return null}yc(e){return function R$(t,e,n,r){return new cce(t,e,n,r)}(this.persistence,new N$,e.initialUser,this.It)}gc(e){return new x$(_m.Bs,this.It)}mc(e){return new $$}terminate(){var e=this;return m(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class fS{initialize(e,n){var r=this;return m(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>ij(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Zce.bind(null,r.syncEngine),yield function k0(t,e){return P0.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Oce}createDatastore(e){const n=$d(e.databaseInfo.databaseId),r=new vce(e.databaseInfo);return new Ece(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>ij(this.syncEngine,a,0),o=j$.C()?new j$:new mce,new bce(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,l){const c=new jce(r,i,s,o,a,u);return l&&(c.fc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=m(function*(n){const r=R(n);T("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Gu(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}class Dm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):it("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class fde{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mt.UNAUTHENTICATED,this.clientId=qB.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=m(function*(a){T("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(T("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return m(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=zu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function lj(t,e){return pS.apply(this,arguments)}function pS(){return pS=m(function*(t,e){t.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=m(function*(s){r.isEqual(s)||(yield k$(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}),pS.apply(this,arguments)}function cj(t,e){return gS.apply(this,arguments)}function gS(){return gS=m(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield mS(t);T("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>Y$(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Y$(e.remoteStore,s)),t.onlineComponents=e}),gS.apply(this,arguments)}function mS(t){return _S.apply(this,arguments)}function _S(){return _S=m(function*(t){return t.offlineComponents||(T("FirestoreClient","Using default OfflineComponentProvider"),yield lj(t,new ade)),t.offlineComponents}),_S.apply(this,arguments)}function Tm(t){return yS.apply(this,arguments)}function yS(){return yS=m(function*(t){return t.onlineComponents||(T("FirestoreClient","Using default OnlineComponentProvider"),yield cj(t,new fS)),t.onlineComponents}),yS.apply(this,arguments)}function Zu(t){return wS.apply(this,arguments)}function wS(){return wS=m(function*(t){const e=yield Tm(t),n=e.eventManager;return n.onListen=Hce.bind(null,e.syncEngine),n.onUnlisten=Gce.bind(null,e.syncEngine),n}),wS.apply(this,arguments)}const gj=new Map;function IS(t,e,n){if(!n)throw new D(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mj(t){if(!M.isDocumentKey(t))throw new D(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _j(t){if(M.isDocumentKey(t))throw new D(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Am(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":L()}function _e(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new D(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Am(t);throw new D(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class vj{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new D(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new D(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function Ede(t,e,n,r){if(!0===e&&!0===r)throw new D(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vj({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new D(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vj(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new vue;switch(n.type){case"gapi":return new Cue(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new D(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=gj.get(e);n&&(T("ComponentProvider","Removing Datastore"),gj.delete(e),n.terminate())}(this),Promise.resolve()}}class ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}}class an{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new an(this.firestore,e,this._query)}}class ni extends an{constructor(e,n,r){super(e,n,Ru(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new M(e))}withConverter(e){return new ni(this.firestore,e,this._path)}}function Cde(t,e,...n){if(t=Yn(t),IS("collection","path",e),t instanceof Gd){const r=ge.fromString(e,...n);return _j(r),new ni(t,null,r)}{if(!(t instanceof ot||t instanceof ni))throw new D(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return _j(r),new ni(t.firestore,null,r)}}function wj(t,e,...n){if(t=Yn(t),1===arguments.length&&(e=qB.R()),IS("doc","path",e),t instanceof Gd){const r=ge.fromString(e,...n);return mj(r),new ot(t,null,new M(r))}{if(!(t instanceof ot||t instanceof ni))throw new D(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return mj(r),new ot(t.firestore,t instanceof ni?t.converter:null,new M(r))}}class Dde{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new _0(this,"async_queue_retry"),this.jc=()=>{const n=Em();n&&T("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.bo()};const e=Em();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const n=Em();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const n=new Nt;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return m(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(n){if(!ys(n))throw n;T("AsyncQueue","Operation failed with retryable error: "+n)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const n=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,it("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=n,n}enqueueAfterDelay(e,n,r){this.Wc(),this.Qc.indexOf(e)>-1&&(n=0);const i=O0.createAndSchedule(this,e,n,r,s=>this.Jc(s));return this.Uc.push(i),i}Wc(){this.qc&&L()}verifyOperationInProgress(){}Yc(){var e=this;return m(function*(){let n;do{n=e.$c,yield n}while(n!==e.$c)})()}Xc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function ES(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class Ge extends Gd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Dde,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ij(this),this._firestoreClient.terminate()}}function Sde(t,e){const r="string"==typeof t?t:e||"(default)";return mo("object"==typeof t?t:Hp(),"firestore").getImmediate({identifier:r})}function Ct(t){return t._firestoreClient||Ij(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ij(t){var e;const n=t._freezeSettings(),r=(s=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Oue(t._databaseId,s,t._persistenceKey,(a=n).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;t._firestoreClient=new fde(t._authCredentials,t._appCheckCredentials,t._queue,r)}class Xu{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new D(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zo(Et.fromBase64String(e))}catch(n){throw new D(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zo(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bj{constructor(e){this._methodName=e}}class CS{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new D(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new D(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}}const Ade=/^__.*__$/;class xde{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fu(e,this.data,n,this.fieldTransforms)}}function Tj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw L()}}class xm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ea(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new xm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return Nm(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(Tj(this.na)&&Ade.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class Mde{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=r||$d(e)}fa(e,n,r,i=!1){return new xm({na:e,methodName:n,la:r,path:st.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ju(t){const e=t._freezeSettings(),n=$d(t._databaseId);return new Mde(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bS(t,e,n,r,i,s={}){const o=t.fa(s.merge||s.mergeFields?2:0,e,n,i);TS("Data must be an object, but it was:",o,r);const a=Nj(r,o);let u,l;if(s.merge)u=new er(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=SS(e,d,n);if(!o.contains(h))throw new D(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);kj(c,h)||c.push(h)}u=new er(c),l=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,l=o.fieldTransforms;return new xde(new Qt(a),u,l)}function Xo(t,e){if(Rj(t=Yn(t)))return TS("Unsupported field value:",e,t),Nj(t,e);if(t instanceof bj)return function(n,r){if(!Tj(r.na))throw r.aa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Xo(o,r.ca(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=Yn(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return C2(r.It,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=Ke.fromDate(n);return{timestampValue:xd(r.It,i)}}if(n instanceof Ke){const i=new Ke(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:xd(r.It,i)}}if(n instanceof CS)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Zo)return{bytesValue:G2(r.It,n._byteString)};if(n instanceof ot){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.aa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zT(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.aa(`Unsupported field value: ${Am(n)}`)}(t,e)}function Nj(t,e){const n={};return JB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(t,(r,i)=>{const s=Xo(i,e.ia(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function Rj(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof CS||t instanceof Zo||t instanceof ot||t instanceof bj)}function TS(t,e,n){if(!Rj(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Am(n);throw e.aa("an object"===r?t+" a custom object":t+" "+r)}var r}function SS(t,e,n){if((e=Yn(e))instanceof Xu)return e._internalPath;if("string"==typeof e)return Mm(t,e);throw Nm("Field path arguments must be of type string or ",t,!1,void 0,n)}const Pde=new RegExp("[~\\*/\\[\\]]");function Mm(t,e,n){if(e.search(Pde)>=0)throw Nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xu(...e.split("."))._internalPath}catch{throw Nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nm(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new D(w.INVALID_ARGUMENT,a+t+u)}function kj(t,e){return t.some(n=>n.isEqual(e))}class AS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ode(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Ode extends AS{data(){return super.data()}}function Rm(t,e){return"string"==typeof e?Mm(t,e):e instanceof Xu?e._internalPath:e._delegate._internalPath}class Jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class el extends AS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new km(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class km extends el{data(e={}){return super.data(e)}}class tl{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Jo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new km(this._firestore,this._userDataWriter,r.key,r,new Jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new D(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new km(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Jo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new km(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Jo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,l=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),l=s.indexOf(o.doc.key)),{type:Fde(o.type),doc:a,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Fde(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return L()}}class ea extends class Bde{convertValue(e,n="none"){switch(Vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw L()}}convertObject(e,n){const r={};return Oo(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new CS(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=t2(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gd(e));default:return null}}convertTimestamp(e){const n=vs(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ge.fromString(e);K(e$(r));const i=new Lo(r.get(1),r.get(3)),s=new M(r.popFirst(5));return i.isEqual(n)||it(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function jde(t,e,n){t=_e(t,ot);const r=_e(t.firestore,Ge),i=function xS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e,n);return function qd(t,e){return function(n,r){const i=new Nt;return n.asyncQueue.enqueueAndForget(m(function*(){return function Wce(t,e,n){return q0.apply(this,arguments)}(yield function vS(t){return Tm(t).then(e=>e.syncEngine)}(n),r,i)})),i.promise}(Ct(t),e)}(r,[bS(Ju(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,He.none())])}!function(t,e=!0){Tu="9.9.4",sn(new jt("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Ge(new Iue(n.getProvider("auth-internal")),new bue(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new D(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ve(HB,"3.4.15",t),Ve(HB,"3.4.15","esm2017")}();var Wde={includeMetadataChanges:!1};function NS(t,e){return void 0===e&&(e=Wde),new qe(function(n){var r=function Hde(t,...e){var n,r,i;t=Yn(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||ES(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(ES(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,l,c;if(t instanceof ot)l=_e(t.firestore,Ge),c=Ru(t._key.path),u={next:d=>{e[o]&&e[o](function MS(t,e,n){const r=n.docs.get(e._key),i=new ea(t);return new el(t,i,e._key,r,new Jo(n.hasPendingWrites,n.fromCache),e.converter)}(l,t,d))},error:e[o+1],complete:e[o+2]};else{const d=_e(t,an);l=_e(d.firestore,Ge),c=d._query;const h=new ea(l);u={next:f=>{e[o]&&e[o](new tl(l,h,d,f))},error:e[o+1],complete:e[o+2]},function Pj(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new D(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(d,h,f,p){const g=new Dm(p),_=new $0(h,g,f);return d.asyncQueue.enqueueAndForget(m(function*(){return function F0(t,e){return L0.apply(this,arguments)}(yield Zu(d),_)})),()=>{g.Rc(),d.asyncQueue.enqueueAndForget(m(function*(){return function V0(t,e){return U0.apply(this,arguments)}(yield Zu(d),_)}))}}(Ct(l),c,a,u)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Xde(t,e){return void 0===e&&(e={}),function Zde(t){return NS(t,{includeMetadataChanges:!0}).pipe(he(function(e){return e.docs}))}(t).pipe(he(function(n){return n.map(function(r){return function Hj(t,e){void 0===e&&(e={});var n=t.data();return!t.exists()||"object"!=typeof n||null===n||e.idField&&(n[e.idField]=t.id),n}(r,e)})}))}class Om{constructor(e){return e}}const zj="firestore",PS=new U("angularfire2.firestore-instances");function the(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Om(r)}}const nhe={provide:class Jde{constructor(){return Zp(zj)}},deps:[[new lt,PS]]},rhe={provide:Om,useFactory:function ehe(t,e){const n=Yp(zj,t,e);return n&&new Om(n)},deps:[[new lt,PS],bo]};let ihe=(()=>{class t{constructor(){Ve("angularfire",Pc.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({providers:[rhe,nhe]}),t})();function she(t,...e){return{ngModule:ihe,providers:[{provide:PS,useFactory:the(t),multi:!0,deps:[$e,tn,Xp,Jp,[new lt,UD],[new lt,ag],...e]}]}}const ohe=cs(Xde,!0),Kj=cs(Cde,!0),ahe=cs(wj,!0),uhe=cs(Sde,!0),lhe=cs(jde,!0);let Qj=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(b(mi),b(Kn))},t.\u0275dir=z({type:t}),t})(),ta=(()=>{class t extends Qj{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=function Jt(t){return zi(()=>{const e=t.prototype.constructor,n=e[hi]||ly(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[hi]||ly(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(t)))(r||t)}}(),t.\u0275dir=z({type:t,features:[be]}),t})();const ri=new U("NgValueAccessor"),hhe={provide:ri,useExisting:Re(()=>Fm),multi:!0},phe=new U("CompositionEventMode");let Fm=(()=>{class t extends Qj{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fhe(){const t=qr()?qr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(b(mi),b(Kn),b(phe,8))},t.\u0275dir=z({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&mn("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Be([hhe]),be]}),t})();const un=new U("NgValidators"),Ms=new U("NgAsyncValidators");function oH(t){return null!=t}function aH(t){return Zl(t)?at(t):t}function uH(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function lH(t,e){return e.map(n=>n(t))}function cH(t){return t.map(e=>function _he(t){return!t.validate}(e)?e:n=>e.validate(n))}function OS(t){return null!=t?function dH(t){if(!t)return null;const e=t.filter(oH);return 0==e.length?null:function(n){return uH(lH(n,e))}}(cH(t)):null}function FS(t){return null!=t?function hH(t){if(!t)return null;const e=t.filter(oH);return 0==e.length?null:function(n){return function che(...t){const e=jx(t),{args:n,keys:r}=D1(t),i=new qe(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let c=0;c<o;c++){let d=!1;mr(n[c]).subscribe(gt(s,h=>{d||(d=!0,l--),a[c]=h},()=>u--,void 0,()=>{(!u||!d)&&(l||s.next(r?S1(r,a):a),s.complete())}))}});return e?i.pipe(T1(e)):i}(lH(n,e).map(aH)).pipe(he(uH))}}(cH(t)):null}function fH(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function LS(t){return t?Array.isArray(t)?t:[t]:[]}function Vm(t,e){return Array.isArray(t)?t.includes(e):t===e}function mH(t,e){const n=LS(e);return LS(t).forEach(i=>{Vm(n,i)||n.push(i)}),n}function _H(t,e){return LS(e).filter(n=>!Vm(t,n))}class yH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=OS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class bn extends yH{get formDirective(){return null}get path(){return null}}class Ns extends yH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let wH=(()=>{class t extends class vH{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(b(Ns,2))},t.\u0275dir=z({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&Af("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[be]}),t})();const zd="VALID",Bm="INVALID",nl="PENDING",Kd="DISABLED";function EH(t){return Array.isArray(t)?OS(t):t||null}function CH(t){return Array.isArray(t)?FS(t):t||null}function $m(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function Qd(t,e){(function GS(t,e){const n=function pH(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(fH(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function gH(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(fH(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Gm(e._rawValidators,i),Gm(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),t.disabled&&e.valueAccessor.setDisabledState?.(!0),function She(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&SH(t,e)})}(t,e),function xhe(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Ahe(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&SH(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function The(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Gm(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function SH(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function NH(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function RH(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Lhe={provide:Ns,useExisting:Re(()=>KS)},FH=(()=>Promise.resolve())();let KS=(()=>{class t extends Ns{constructor(n,r,i,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class TH{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=n,this._composedValidatorFn=EH(this._rawValidators),this._composedAsyncValidatorFn=CH(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zd}get invalid(){return this.status===Bm}get pending(){return this.status==nl}get disabled(){return this.status===Kd}get enabled(){return this.status!==Kd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=EH(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=CH(e)}addValidators(e){this.setValidators(mH(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mH(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_H(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_H(e,this._rawAsyncValidators))}hasValidator(e){return Vm(this._rawValidators,e)}hasAsyncValidator(e){return Vm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=nl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Kd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=zd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zd||this.status===nl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kd:zd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=nl,this._hasOwnPendingAsyncValidator=!0;const n=aH(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?Kd:this.errors?Bm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nl)?nl:this._anyControlsHaveStatus(Bm)?Bm:zd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$m(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,n,r){super(function $S(t){return($m(t)?t.validators:t)||null}(n),function jS(t,e){return($m(e)?e.asyncValidators:t)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$m(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=RH(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){RH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new Xe,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function qS(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Fm?n=s:function Rhe(t){return Object.getPrototypeOf(t.constructor)===ta}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function WS(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Qd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){FH.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function Ci(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);FH.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function jm(t,e){return[...e.path,t]}(n,this._parent):[n]}}return t.\u0275fac=function(n){return new(n||t)(b(bn,9),b(un,10),b(Ms,10),b(ri,10),b(Wf,8))},t.\u0275dir=z({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Be([Lhe]),be,sr]}),t})(),VH=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({}),t})(),ufe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({imports:[VH]}),t})(),lfe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({imports:[ufe]}),t})();function dfe(t,e){if(1&t&&(ts(0,"li"),Mf(1),ns()),2&t){const n=e.$implicit;gf(1),Fv(n.name)}}let hfe=(()=>{class t{constructor(n){this.firestore=n,this.todoText="";const r=Kj(n,"todos");this.todos$=ohe(r),this.todos$.subscribe(i=>{console.log("neue Todos sind:",i),this.todos=i,alert("New Todo UPDATE")})}addTodo(){const n=Kj(this.firestore,"todos");lhe(ahe(n),{name:this.todoText})}}return t.\u0275fac=function(n){return new(n||t)(b(Om))},t.\u0275cmp=Oh({type:t,selectors:[["app-root"]],decls:8,vars:4,consts:[["type","text",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(n,r){1&n&&(ts(0,"h1"),Mf(1,"hello world"),ns(),ts(2,"input",0),mn("ngModelChange",function(s){return r.todoText=s}),ns(),ts(3,"button",1),mn("click",function(){return r.addTodo}),Mf(4,"Hinzuf\xfcgen"),ns(),ts(5,"ul"),function zR(t,e,n,r,i,s,o,a){const u=C(),l=pe(),c=t+22,d=l.firstCreatePass?function R8(t,e,n,r,i,s,o,a,u){const l=e.consts,c=ja(e,t,4,o||null,Ki(l,a));vv(e,n,c,Ki(l,u)),Gh(e,c);const d=c.tViews=yv(2,c,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,l,u,e,n,r,i,s,o):l.data[c];Vr(d,!1);const h=u[11].createComment("");ff(l,u,h,d),en(h,u),Ef(u,u[c]=MR(h,u,h,d)),Bh(d)&&mv(l,u,d),null!=o&&_v(u,d,a)}(6,dfe,2,1,"li",2),function MP(t,e){const n=pe();let r;const i=t+22;n.firstCreatePass?(r=function q7(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Qs(r.type)),o=rr(b);try{const a=Qh(!1),u=s();return Qh(a),function k8(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,C(),i,u),u}finally{rr(o)}}(7,"async"),ns()),2&n&&(gf(2),Sf("ngModel",r.todoText),gf(4),Sf("ngForOf",NP(7,2,r.todos$)))},dependencies:[YO,Fm,wH,KS,e1]}),t})();const nG_firebase={projectId:"ps-firebase-todolist",appId:"1:219288284821:web:31f747e5feeaa1f4c7f59c",storageBucket:"ps-firebase-todolist.appspot.com",apiKey:"AIzaSyALsyUgvClE6qfCHB24JInCQTrYl8N4zhk",authDomain:"ps-firebase-todolist.firebaseapp.com",messagingSenderId:"219288284821",measurementId:"G-EY4ZQ9BYQB"},rG="@firebase/database";let tA="";class pfe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$t(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:xc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class gfe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return xi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const sG=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pfe(e)}}catch{}return new gfe},ra=sG("localStorage"),nA=sG("sessionStorage"),rl=new fo("@firebase/database"),oG=function(){let t=1;return function(){return t++}}(),aG=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,N(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new MJ;n.update(e);const r=n.digest();return Rp.encodeByteArray(r)},Zd=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Zd.apply(null,r):e+="object"==typeof r?$t(r):r,e+=" "}return e};let ia=null,uG=!0;const Ot=function(...t){if(!0===uG&&(uG=!1,null===ia&&!0===nA.get("logging_enabled")&&function(t,e){N(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(rl.logLevel=fe.VERBOSE,ia=rl.log.bind(rl),e&&nA.set("logging_enabled",!0)):"function"==typeof t?ia=t:(ia=null,nA.remove("logging_enabled"))}(!0)),ia){const e=Zd.apply(null,t);ia(e)}},Xd=function(t){return function(...e){Ot(t,...e)}},rA=function(...t){const e="FIREBASE INTERNAL ERROR: "+Zd(...t);rl.error(e)},ii=function(...t){const e=`FIREBASE FATAL ERROR: ${Zd(...t)}`;throw rl.error(e),new Error(e)},ln=function(...t){const e="FIREBASE WARNING: "+Zd(...t);rl.warn(e)},qm=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Wi="[MIN_NAME]",si="[MAX_NAME]",sa=function(t,e){if(t===e)return 0;if(t===Wi||e===si)return-1;if(e===Wi||t===si)return 1;{const n=zm(t),r=zm(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},yfe=function(t,e){return t===e?0:t<e?-1:1},Jd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+$t(e))},iA=function(t){if("object"!=typeof t||null===t)return $t(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=$t(e[r]),n+=":",n+=iA(t[e[r]]);return n+="}",n},cG=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function Ft(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const dG=function(t){N(!qm(t),"Invalid JSON number");const r=1023;let i,s,o,a,u;0===t?(s=0,o=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(t/Math.pow(2,-1074))));const l=[];for(u=52;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(u=11;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const c=l.join("");let d="";for(u=0;u<64;u+=8){let h=parseInt(c.substr(u,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},Efe=new RegExp("^-?(0*)\\d{1,10}$"),zm=function(t){if(Efe.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},il=function(t){try{t()}catch(e){setTimeout(()=>{throw ln("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},eh=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class bfe{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ln(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Dfe{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(Ot("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ln(e)}}let th=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const _G=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wG="websocket",IG="long_polling";class aA{constructor(e,n,r,i,s=!1,o="",a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ra.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ra.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function EG(t,e,n){let r;if(N("string"==typeof e,"typeof type must == string"),N("object"==typeof n,"typeof params must == object"),e===wG)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==IG)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function Tfe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return Ft(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Sfe{constructor(){this.counters_={}}incrementCounter(e,n=1){xi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return wJ(this.counters_)}}const uA={},lA={};function cA(t){const e=t.toString();return uA[e]||(uA[e]=new Sfe),uA[e]}class xfe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&il(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Rs{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xd(e),this.stats_=cA(n),this.urlFn=u=>(this.appCheckToken&&(u.ac=this.appCheckToken),EG(n,IG,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new xfe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dA((...s)=>{const[o,a,u,l,c]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=u;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&_G.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Rs.forceAllow_=!0}static forceDisallow(){Rs.forceDisallow_=!0}static isAvailable(){return!(!Rs.forceAllow_&&(Rs.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=$t(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=GF(n),i=cG(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=$t(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class dA{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=oG(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=dA.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ot("frame writing exception"),a.stack&&Ot(a.stack),Ot(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ot("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ot("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Qm=null;typeof MozWebSocket<"u"?Qm=MozWebSocket:typeof WebSocket<"u"&&(Qm=WebSocket);let sl=(()=>{class t{constructor(n,r,i,s,o,a,u){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xd(this.connId),this.stats_=cA(r),this.connURL=t.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&_G.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),EG(n,wG,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ra.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Qm(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==Qm&&!t.forceDisallow_}static previouslyFailed(){return ra.isInMemoryStorage||!0===ra.get("previous_websocket_failure")}markConnectionHealthy(){ra.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=xc(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(N(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=$t(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=cG(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),xG=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Rs,sl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=sl&&sl.isAvailable();let i=r&&!sl.previouslyFailed();if(n.webSocketOnly&&(r||ln("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[sl];else{const s=this.transports_=[];for(const o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class FG{constructor(e,n,r,i,s,o,a,u,l,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xd("c:"+this.id+":"),this.transportManager_=new xG(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=eh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Jd("t",e),r=Jd("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Jd("t",e),r=Jd("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Jd("t",e);if("d"in e){const r=e.d;if("h"===n)this.onHandshake_(r);else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?rA("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rA("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&ln("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),eh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ra.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class LG{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class VG{constructor(e){this.allowedEvents_=e,this.listeners_={},N(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){N(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class Ym extends VG{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Pp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ym}getInitialEvent(e){return N("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ee{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function ye(){return new Ee("")}function ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ks(t){return t.pieces_.length-t.pieceNum_}function Me(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ee(t.pieces_,e)}function fA(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function nh(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function $G(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ee(e,0)}function We(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ee)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ee(n,0)}function ue(t){return t.pieceNum_>=t.pieces_.length}function Dn(t,e){const n=ae(t),r=ae(e);if(null===n)return e;if(n===r)return Dn(Me(t),Me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pA(t,e){if(ks(t)!==ks(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function pr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ks(t)>ks(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Xfe{constructor(e,n){this.errorPrefix_=n,this.parts_=nh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Bp(this.parts_[r]);jG(this)}}function jG(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+oa(t))}function oa(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class gA extends VG{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new gA}getInitialEvent(e){return N("visible"===e,"Unknown event type: "+e),[this.visible_]}}const rh=1e3;let Xm,aa=(()=>{class t extends LG{constructor(n,r,i,s,o,a,u,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Xd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gA.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&Ym.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_($t(o)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();const r=new fu,i={p:n._path.toString(),q:n._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:a=>{const u=a.d;"ok"===a.s?r.resolve(u):r.reject(u)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),N(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,u=>{const l=u.d,c=u.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",u),"ok"!==c&&this.removeListen_(i,s),n.onComplete&&n.onComplete(c,l))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&xi(n,"w")){const i=pu(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();ln(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=Fp(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=Fp(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),N(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);const o={p:n};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+$t(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):rA("Unrecognized action received from server: "+$t(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rh,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=rh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return m(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let u=!1,l=null;const c=function(){l?l.close():(u=!0,s())};n.realtime_={close:c,sendRequest:function(f){N(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);u?Ot("getToken() completed but was canceled"):(Ot("getToken() completed. Creating connection."),n.authToken_=f&&f.accessToken,n.appCheckToken_=p&&p.token,l=new FG(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,s,g=>{ln(g+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(f){n.log_("Failed to get token: "+f),u||(n.repoInfo_.nodeAdmin&&ln(f),c())}}})()}interrupt(n){Ot("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ot("Resuming connection for reason: "+n),delete this.interruptReasons_[n],AI(this.interruptReasons_)&&(this.reconnectDelay_=rh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(o=>iA(o)).join("$"):"default";const s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){const i=new Ee(n).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Ot("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ot("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+tA.replace(/\./g,"-")]=1,Pp()?n["framework.cordova"]=1:TI()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Ym.getInstance().currentlyOnline();return AI(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class ce{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ce(e,n)}}class Zm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ce(Wi,e),i=new ce(Wi,n);return 0!==this.compare(r,i)}minPost(){return ce.MIN}}class WG extends Zm{static get __EMPTY_NODE(){return Xm}static set __EMPTY_NODE(e){Xm=e}compare(e,n){return sa(e.name,n.name)}isDefinedOn(e){throw hu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ce.MIN}maxPost(){return new ce(si,Xm)}makePost(e,n){return N("string"==typeof e,"KeyIndex indexValue must always be a string."),new ce(e,Xm)}toString(){return".key"}}const oi=new WG;class Jm{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let _A,Rr=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Un.EMPTY_NODE,this.right=o??Un.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this;const o=i(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Un.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return Un.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class Un{constructor(e,n=Un.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Un(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rr.BLACK,null,null))}remove(e){return new Un(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Jm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Jm(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Jm(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Jm(this.root_,null,this.comparator_,!0,e)}}function ope(t,e){return sa(t.name,e.name)}function mA(t,e){return sa(t,e)}Un.EMPTY_NODE=new class spe{copy(e,n,r,i,s){return this}insert(e,n,r){return new Rr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const qG=function(t){return"number"==typeof t?"number:"+dG(t):"string:"+t},zG=function(t){if(t.isLeafNode()){const e=t.val();N("string"==typeof e||"number"==typeof e||"object"==typeof e&&xi(e,".sv"),"Priority must be a string or number.")}else N(t===_A||t.isEmpty(),"priority of unexpected type.");N(t===_A||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let KG,QG,YG,ol=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,N(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),zG(this.priorityNode_)}static set __childrenNodeConstructor(n){KG=n}static get __childrenNodeConstructor(){return KG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ue(n)?this:".priority"===ae(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=ae(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(N(".priority"!==i||1===ks(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Me(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+qG(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?dG(this.value_):this.value_,this.lazyHash_=aG(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(N(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return N(s>=0,"Unknown leaf type: "+r),N(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const Fe=new class cpe extends Zm{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return 0===s?sa(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ce.MIN}maxPost(){return new ce(si,new ol("[PRIORITY-POST]",YG))}makePost(e,n){const r=QG(e);return new ce(n,new ol("[PRIORITY-POST]",r))}toString(){return".priority"}},dpe=Math.log(2);class hpe{constructor(e){this.count=parseInt(Math.log(e+1)/dpe,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const e_=function(t,e,n,r){t.sort(e);const i=function(u,l){const c=l-u;let d,h;if(0===c)return null;if(1===c)return d=t[u],h=n?n(d):d,new Rr(h,d.node,Rr.BLACK,null,null);{const f=parseInt(c/2,10)+u,p=i(u,f),g=i(f+1,l);return d=t[f],h=n?n(d):d,new Rr(h,d.node,Rr.BLACK,p,g)}},a=function(u){let l=null,c=null,d=t.length;const h=function(p,g){const _=d-p,I=d;d-=p;const E=i(_+1,I),y=t[_],S=n?n(y):y;f(new Rr(S,y.node,g,null,E))},f=function(p){l?(l.left=p,l=p):(c=p,l=p)};for(let p=0;p<u.count;++p){const g=u.nextBitIsOne(),_=Math.pow(2,u.count-(p+1));g?h(_,Rr.BLACK):(h(_,Rr.BLACK),h(_,Rr.RED))}return c}(new hpe(t.length));return new Un(r||e,a)};let yA;const al={};class qi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return N(al&&Fe,"ChildrenNode.ts has not been loaded"),yA=yA||new qi({".priority":al},{".priority":Fe}),yA}get(e){const n=pu(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Un?n:null}hasIndex(e){return xi(this.indexSet_,e.toString())}addIndex(e,n){N(e!==oi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ce.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?e_(r,e.getCompare()):al;const u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;const c=Object.assign({},this.indexes_);return c[u]=a,new qi(c,l)}addToIndexes(e,n){const r=Lp(this.indexes_,(i,s)=>{const o=pu(this.indexSet_,s);if(N(o,"Missing index implementation for "+s),i===al){if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(ce.Wrap);let l=u.getNext();for(;l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),e_(a,o.getCompare())}return al}{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new ce(e.name,a))),u.insert(e,e.node)}});return new qi(r,this.indexSet_)}removeFromIndexes(e,n){const r=Lp(this.indexes_,i=>{if(i===al)return i;{const s=n.get(e.name);return s?i.remove(new ce(e.name,s)):i}});return new qi(r,this.indexSet_)}}let ih,ee=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&zG(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ih||(ih=new t(new Un(mA),null,qi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ih}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?ih:r}}getChild(n){const r=ae(n);return null===r?this:this.getImmediateChild(r).getChild(Me(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(N(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new ce(n,r);let s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?ih:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){const i=ae(n);if(null===i)return r;{N(".priority"!==ae(n)||1===ks(n),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Me(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Fe,(a,u)=>{r[a]=u.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){const a=[];for(const u in r)a[u]=r[u];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+qG(this.getPriority().val())+":"),this.forEachChild(Fe,(r,i)=>{const s=i.hash();""!==s&&(n+=":"+r+":"+s)}),this.lazyHash_=""===n?"":aG(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new ce(n,r));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new ce(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new ce(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,ce.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,ce.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===sh?-1:0}withIndex(n){if(n===oi||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===oi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Fe),s=r.getIterator(Fe);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===oi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const sh=new class fpe extends ee{constructor(){super(new Un(mA),ee.EMPTY_NODE,qi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}};function Qe(t,e=null){if(null===t)return ee.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),N(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new ol(t,Qe(e));if(t instanceof Array){let n=ee.EMPTY_NODE;return Ft(t,(r,i)=>{if(xi(t,r)&&"."!==r.substring(0,1)){const s=Qe(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Qe(e))}{const n=[];let r=!1;if(Ft(t,(o,a)=>{if("."!==o.substring(0,1)){const u=Qe(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new ce(o,u)))}}),0===n.length)return ee.EMPTY_NODE;const s=e_(n,ope,o=>o.name,mA);if(r){const o=e_(n,Fe.getCompare());return new ee(s,Qe(e),new qi({".priority":o},{".priority":Fe}))}return new ee(s,Qe(e),qi.Default)}}Object.defineProperties(ce,{MIN:{value:new ce(Wi,ee.EMPTY_NODE)},MAX:{value:new ce(si,sh)}}),WG.__EMPTY_NODE=ee.EMPTY_NODE,ol.__childrenNodeConstructor=ee,function ape(t){_A=t}(sh),function lpe(t){YG=t}(sh),function upe(t){QG=t}(Qe);class vA extends Zm{constructor(e){super(),this.indexPath_=e,N(!ue(e)&&".priority"!==ae(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return 0===s?sa(e.name,n.name):s}makePost(e,n){const r=Qe(e),i=ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new ce(n,i)}maxPost(){const e=ee.EMPTY_NODE.updateChild(this.indexPath_,sh);return new ce(si,e)}toString(){return nh(this.indexPath_,0).join("/")}}const wA=new class gpe extends Zm{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?sa(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ce.MIN}maxPost(){return ce.MAX}makePost(e,n){const r=Qe(e);return new ce(n,r)}toString(){return".value"}};function ah(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class CA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fe}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wi}hasEnd(){return this.endSet_}getIndexEndValue(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:si}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fe}copy(){const e=new CA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nW(t){const e={};if(t.isDefault())return e;let n;return t.index_===Fe?n="$priority":t.index_===wA?n="$value":t.index_===oi?n="$key":(N(t.index_ instanceof vA,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=$t(n),t.startSet_&&(e.startAt=$t(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+$t(t.indexStartName_))),t.endSet_&&(e.endAt=$t(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+$t(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function rW(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Fe&&(e.i=t.index_.toString()),e}class n_ extends LG{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Xd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(N(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=n_.getListenId_(e,r),a={};this.listens_[o]=a;const u=nW(e._queryParams);this.restRequest_(s+".json",u,(l,c)=>{let d=c;if(404===l&&(d=null,l=null),null===l&&this.onDataUpdate_(s,d,!1,r),pu(this.listens_,o)===a){let h;h=l?401===l?"permission_denied":"rest_error:"+l:"ok",i(h,null)}})}unlisten(e,n){const r=n_.getListenId_(e,n);delete this.listens_[r]}get(e){const n=nW(e._queryParams),r=e._path.toString(),i=new fu;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Mc(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=xc(a.responseText)}catch{ln("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else 401!==a.status&&404!==a.status&&ln("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class bpe{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function r_(){return{value:null,children:new Map}}function cl(t,e,n){if(ue(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=ae(e);t.children.has(r)||t.children.set(r,r_()),cl(t.children.get(r),e=Me(e),n)}}function SA(t,e,n){null!==t.value?n(e,t.value):function Dpe(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{SA(i,new Ee(e.toString()+"/"+r),n)})}class Tpe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ft(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class xpe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Tpe(e);const r=1e4+2e4*Math.random();eh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ft(e,(i,s)=>{s>0&&xi(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),eh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var gr=(()=>(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(gr||(gr={})),gr))();function MA(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class i_{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=gr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ue(this.path)){if(null!=this.affectedTree.value)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ee(e));return new i_(ye(),n,this.revert)}}return N(ae(this.path)===e,"operationForChild called for unrelated child."),new i_(Me(this.path),this.affectedTree,this.revert)}}class ua{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=gr.OVERWRITE}operationForChild(e){return ue(this.path)?new ua(this.source,ye(),this.snap.getImmediateChild(e)):new ua(this.source,Me(this.path),this.snap)}}class dl{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=gr.MERGE}operationForChild(e){if(ue(this.path)){const n=this.children.subtree(new Ee(e));return n.isEmpty()?null:n.value?new ua(this.source,ye(),n.value):new dl(this.source,ye(),n)}return N(ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new dl(this.source,Me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ps{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ue(e))return this.isFullyInitialized()&&!this.filtered_;const n=ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function ch(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>function kpe(t,e,n){if(null==e.childName||null==n.childName)throw hu("Should only compare child_ events.");const r=new ce(e.childName,e.snapshotNode),i=new ce(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,u)),o.forEach(a=>{const u=function Rpe(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(u,t.query_))})})}function s_(t,e){return{eventCache:t,serverCache:e}}function dh(t,e,n,r){return s_(new Ps(e,n,r),t.serverCache)}function sW(t,e,n,r){return s_(t.eventCache,new Ps(e,n,r))}function o_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function la(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let NA;class Le{constructor(e,n=(()=>(NA||(NA=new Un(yfe)),NA))()){this.value=e,this.children=n}static fromObject(e){let n=new Le(null);return Ft(e,(r,i)=>{n=n.set(new Ee(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:ye(),value:this.value};if(ue(e))return null;{const r=ae(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Me(e),n);return null!=s?{path:We(new Ee(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ue(e))return this;{const n=ae(e),r=this.children.get(n);return null!==r?r.subtree(Me(e)):new Le(null)}}set(e,n){if(ue(e))return new Le(n,this.children);{const r=ae(e),s=(this.children.get(r)||new Le(null)).set(Me(e),n),o=this.children.insert(r,s);return new Le(this.value,o)}}remove(e){if(ue(e))return this.children.isEmpty()?new Le(null):new Le(null,this.children);{const n=ae(e),r=this.children.get(n);if(r){const i=r.remove(Me(e));let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&s.isEmpty()?new Le(null):new Le(this.value,s)}return this}}get(e){if(ue(e))return this.value;{const n=ae(e),r=this.children.get(n);return r?r.get(Me(e)):null}}setTree(e,n){if(ue(e))return n;{const r=ae(e),s=(this.children.get(r)||new Le(null)).setTree(Me(e),n);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Le(this.value,o)}}fold(e){return this.fold_(ye(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(We(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ye(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(ue(e))return null;{const s=ae(e),o=this.children.get(s);return o?o.findOnPath_(Me(e),We(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ye(),n)}foreachOnPath_(e,n,r){if(ue(e))return this;{this.value&&r(n,this.value);const i=ae(e),s=this.children.get(i);return s?s.foreachOnPath_(Me(e),We(n,i),r):new Le(null)}}foreach(e){this.foreach_(ye(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(We(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class kr{constructor(e){this.writeTree_=e}static empty(){return new kr(new Le(null))}}function hh(t,e,n){if(ue(e))return new kr(new Le(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Dn(i,e);return s=s.updateChild(o,n),new kr(t.writeTree_.set(i,s))}{const i=new Le(n),s=t.writeTree_.setTree(e,i);return new kr(s)}}}function RA(t,e,n){let r=t;return Ft(n,(i,s)=>{r=hh(r,We(e,i),s)}),r}function oW(t,e){if(ue(e))return kr.empty();{const n=t.writeTree_.setTree(e,new Le(null));return new kr(n)}}function kA(t,e){return null!=ca(t,e)}function ca(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Dn(n.path,e)):null}function aW(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Fe,(r,i)=>{e.push(new ce(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new ce(r,i.value))}),e}function Os(t,e){if(ue(e))return t;{const n=ca(t,e);return new kr(null!=n?new Le(n):t.writeTree_.subtree(e))}}function PA(t){return t.writeTree_.isEmpty()}function hl(t,e){return uW(ye(),t.writeTree_,e)}function uW(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(N(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=uW(We(t,i),s,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(We(t,".priority"),r)),n}}function a_(t,e){return fW(e,t)}function Upe(t,e){if(t.snap)return pr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&pr(We(t.path,n),e))return!0;return!1}function $pe(t){return t.visible}function lW(t,e,n){let r=kr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)pr(n,o)?(a=Dn(n,o),r=hh(r,a,s.snap)):pr(o,n)&&(a=Dn(o,n),r=hh(r,ye(),s.snap.getChild(a)));else{if(!s.children)throw hu("WriteRecord should have .snap or .children");if(pr(n,o))a=Dn(n,o),r=RA(r,a,s.children);else if(pr(o,n))if(a=Dn(o,n),ue(a))r=RA(r,ye(),s.children);else{const u=pu(s.children,ae(a));if(u){const l=u.getChild(Me(a));r=hh(r,ye(),l)}}}}}return r}function cW(t,e,n,r,i){if(r||i){const s=Os(t.visibleWrites,e);return!i&&PA(s)?n:i||null!=n||kA(s,ye())?hl(lW(t.allWrites,function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(pr(l.path,e)||pr(e,l.path))},e),n||ee.EMPTY_NODE):null}{const s=ca(t.visibleWrites,e);if(null!=s)return s;{const o=Os(t.visibleWrites,e);return PA(o)?n:null!=n||kA(o,ye())?hl(o,n||ee.EMPTY_NODE):null}}}function u_(t,e,n,r){return cW(t.writeTree,t.treePath,e,n,r)}function OA(t,e){return function jpe(t,e,n){let r=ee.EMPTY_NODE;const i=ca(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Fe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Os(t.visibleWrites,e);return n.forEachChild(Fe,(o,a)=>{const u=hl(Os(s,new Ee(o)),a);r=r.updateImmediateChild(o,u)}),aW(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return aW(Os(t.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(t.writeTree,t.treePath,e)}function dW(t,e,n,r){return function Hpe(t,e,n,r,i){N(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=We(e,n);if(kA(t.visibleWrites,s))return null;{const o=Os(t.visibleWrites,s);return PA(o)?i.getChild(n):hl(o,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function l_(t,e){return function Wpe(t,e){return ca(t.visibleWrites,e)}(t.writeTree,We(t.treePath,e))}function FA(t,e,n){return function Gpe(t,e,n,r){const i=We(e,n),s=ca(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?hl(Os(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function hW(t,e){return fW(We(t.treePath,e),t.writeTree)}function fW(t,e){return{treePath:t,writeTree:e}}class Qpe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;N("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),N(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(r,ah(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(r,function oh(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}(r,i.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(r,function ll(t,e){return{type:"child_added",snapshotNode:e,childName:t}}(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw hu("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ah(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const pW=new class Ype{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class LA{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ps(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return FA(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:la(this.viewCache_),s=function Kpe(t,e,n,r,i,s){return function qpe(t,e,n,r,i,s,o){let a;const u=Os(t.visibleWrites,e),l=ca(u,ye());if(null!=l)a=l;else{if(null==n)return[];a=hl(u,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const c=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&c.length<i;)0!==d(f,r)&&c.push(f),f=h.getNext();return c}}(t.writeTree,t.treePath,e,n,r,i,s)}(this.writes_,i,n,1,r,e);return 0===s.length?null:s[0]}}function gW(t,e,n,r,i,s){const o=e.eventCache;if(null!=l_(r,n))return e;{let a,u;if(ue(n))if(N(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=la(e),d=OA(r,l instanceof ee?l:ee.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=u_(r,la(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=ae(n);if(".priority"===l){N(1===ks(n),"Can't have a priority with additional path components");const c=o.getNode();u=e.serverCache.getNode();const d=dW(r,n,c,u);a=null!=d?t.filter.updatePriority(c,d):o.getNode()}else{const c=Me(n);let d;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();const h=dW(r,n,o.getNode(),u);d=null!=h?o.getNode().getImmediateChild(l).updateChild(c,h):o.getNode().getImmediateChild(l)}else d=FA(r,l,e.serverCache);a=null!=d?t.filter.updateChild(o.getNode(),l,d,c,i,s):o.getNode()}}return dh(e,a,o.isFullyInitialized()||ue(n),t.filter.filtersNodes())}}function c_(t,e,n,r,i,s,o,a){const u=e.serverCache;let l;const c=o?t.filter:t.filter.getIndexedFilter();if(ue(n))l=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered()){const f=u.getNode().updateChild(n,r);l=c.updateFullNode(u.getNode(),f,null)}else{const f=ae(n);if(!u.isCompleteForPath(n)&&ks(n)>1)return e;const p=Me(n),_=u.getNode().getImmediateChild(f).updateChild(p,r);l=".priority"===f?c.updatePriority(u.getNode(),_):c.updateChild(u.getNode(),f,_,p,pW,null)}const d=sW(e,l,u.isFullyInitialized()||ue(n),c.filtersNodes());return gW(t,d,n,i,new LA(i,d,s),a)}function VA(t,e,n,r,i,s,o){const a=e.eventCache;let u,l;const c=new LA(i,e,s);if(ue(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=dh(e,l,!0,t.filter.filtersNodes());else{const d=ae(n);if(".priority"===d)l=t.filter.updatePriority(e.eventCache.getNode(),r),u=dh(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=Me(n),f=a.getNode().getImmediateChild(d);let p;if(ue(h))p=r;else{const g=c.getCompleteChild(d);p=null!=g?".priority"===fA(h)&&g.getChild($G(h)).isEmpty()?g:g.updateChild(h,r):ee.EMPTY_NODE}u=f.equals(p)?e:dh(e,t.filter.updateChild(a.getNode(),d,p,h,c,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return u}function mW(t,e){return t.eventCache.isCompleteForChild(e)}function _W(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function UA(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,u=e;l=ue(n)?r:new Le(null).setTree(n,r);const c=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(c.hasChild(d)){const p=_W(0,e.serverCache.getNode().getImmediateChild(d),h);u=c_(t,u,new Ee(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!c.hasChild(d)&&!f){const g=_W(0,e.serverCache.getNode().getImmediateChild(d),h);u=c_(t,u,new Ee(d),g,i,s,o,a)}}),u}function uge(t,e){const n=la(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ue(e)&&!n.getImmediateChild(ae(e)).isEmpty())?n.getChild(e):null}function wW(t,e,n,r){e.type===gr.MERGE&&null!==e.source.queryId&&(N(la(t.viewCache_),"We should always have a full cache before handling merges"),N(o_(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=function Jpe(t,e,n,r,i){const s=new Qpe;let o,a;if(n.type===gr.OVERWRITE){const l=n;l.source.fromUser?o=VA(t,e,l.path,l.snap,r,i,s):(N(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ue(l.path),o=c_(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===gr.MERGE){const l=n;l.source.fromUser?o=function tge(t,e,n,r,i,s,o){let a=e;return r.foreach((u,l)=>{const c=We(n,u);mW(e,ae(c))&&(a=VA(t,a,c,l,i,s,o))}),r.foreach((u,l)=>{const c=We(n,u);mW(e,ae(c))||(a=VA(t,a,c,l,i,s,o))}),a}(t,e,l.path,l.children,r,i,s):(N(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=UA(t,e,l.path,l.children,r,i,a,s))}else if(n.type===gr.ACK_USER_WRITE){const l=n;o=l.revert?function ige(t,e,n,r,i,s){let o;if(null!=l_(r,n))return e;{const a=new LA(r,e,i),u=e.eventCache.getNode();let l;if(ue(n)||".priority"===ae(n)){let c;if(e.serverCache.isFullyInitialized())c=u_(r,la(e));else{const d=e.serverCache.getNode();N(d instanceof ee,"serverChildren would be complete if leaf node"),c=OA(r,d)}l=t.filter.updateFullNode(u,c,s)}else{const c=ae(n);let d=FA(r,c,e.serverCache);null==d&&e.serverCache.isCompleteForChild(c)&&(d=u.getImmediateChild(c)),l=null!=d?t.filter.updateChild(u,c,d,Me(n),a,s):e.eventCache.getNode().hasChild(c)?t.filter.updateChild(u,c,ee.EMPTY_NODE,Me(n),a,s):u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=u_(r,la(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=l_(r,ye()),dh(e,l,o,t.filter.filtersNodes())}}(t,e,l.path,r,i,s):function nge(t,e,n,r,i,s,o){if(null!=l_(i,n))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(ue(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return c_(t,e,n,u.getNode().getChild(n),i,s,a,o);if(ue(n)){let l=new Le(null);return u.getNode().forEachChild(oi,(c,d)=>{l=l.set(new Ee(c),d)}),UA(t,e,n,l,i,s,a,o)}return e}{let l=new Le(null);return r.foreach((c,d)=>{const h=We(n,c);u.isCompleteForPath(h)&&(l=l.set(c,u.getNode().getChild(h)))}),UA(t,e,n,l,i,s,a,o)}}(t,e,l.path,l.affectedTree,r,i,s)}else{if(n.type!==gr.LISTEN_COMPLETE)throw hu("Unknown operation type: "+n.type);o=function rge(t,e,n,r,i){const s=e.serverCache;return gW(t,sW(e,s.getNode(),s.isFullyInitialized()||ue(n),s.isFiltered()),n,r,pW,i)}(t,e,n.path,r,s)}const u=s.getChanges();return function ege(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=o_(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(function tW(t){return{type:"value",snapshotNode:t}}(o_(e)))}}(e,o,u),{viewCache:o,changes:u}}(t.processor_,i,e,n,r);return function Xpe(t,e){N(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),N(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),N(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,function IW(t,e,n,r){return function Npe(t,e,n,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function _pe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(o.childName,o.snapshotNode))}),ch(t,i,"child_removed",e,r,n),ch(t,i,"child_added",e,r,n),ch(t,i,"child_moved",s,r,n),ch(t,i,"child_changed",e,r,n),ch(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}(t,s.changes,s.viewCache.eventCache.getNode(),null)}let d_,f_;function BA(t,e,n,r){const i=e.source.queryId;if(null!==i){const s=t.views.get(i);return N(null!=s,"SyncTree gave us an op for an invalid query."),wW(s,e,n,r)}{let s=[];for(const o of t.views.values())s=s.concat(wW(o,e,n,r));return s}}function Fs(t,e){let n=null;for(const r of t.views.values())n=n||uge(r,e);return n}class SW{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Le(null),this.pendingWriteTree_=function zpe(){return{visibleWrites:kr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $A(t,e,n,r,i){return function Ope(t,e,n,r,i){N(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=hh(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?fl(t,new ua({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Vs(t,e,n=!1){const r=function Lpe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function Vpe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);N(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Upe(a,r.path)?i=!1:pr(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function Bpe(t){t.visibleWrites=lW(t.allWrites,$pe,ye()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=oW(t.visibleWrites,r.path):Ft(r.children,u=>{t.visibleWrites=oW(t.visibleWrites,We(r.path,u))}),!0))}(t.pendingWriteTree_,e)){let s=new Le(null);return null!=r.snap?s=s.set(ye(),!0):Ft(r.children,o=>{s=s.set(new Ee(o),!0)}),fl(t,new i_(r.path,s,n))}return[]}function fh(t,e,n){return fl(t,new ua({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function g_(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Fs(a,Dn(o,e));if(l)return l});return cW(i,e,s,n,!0)}function fl(t,e){return xW(e,t.syncPointTree_,null,a_(t.pendingWriteTree_,ye()))}function xW(t,e,n,r){if(ue(t.path))return MW(t,e,n,r);{const i=e.get(ye());null==n&&null!=i&&(n=Fs(i,ye()));let s=[];const o=ae(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const l=n?n.getImmediateChild(o):null,c=hW(r,o);s=s.concat(xW(a,u,l,c))}return i&&(s=s.concat(BA(i,t,r,n))),s}}function MW(t,e,n,r){const i=e.get(ye());null==n&&null!=i&&(n=Fs(i,ye()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,l=hW(r,o),c=t.operationForChild(o);c&&(s=s.concat(MW(c,a,u,l)))}),i&&(s=s.concat(BA(i,t,r,n))),s}function HA(t,e){return t.tagToQueryMap.get(e)}function GA(t){const e=t.indexOf("$");return N(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ee(t.substr(0,e))}}function WA(t,e,n){const r=t.syncPointTree_.get(e);return N(r,"Missing sync point for query tag that we're tracking"),BA(r,n,a_(t.pendingWriteTree_,e),null)}class qA{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new qA(n)}node(){return this.node_}}class zA{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=We(this.path_,e);return new zA(this.syncTree_,n)}node(){return g_(this.syncTree_,this.path_)}}const RW=function(t,e,n){return t&&"object"==typeof t?(N(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Mge(t[".sv"],e,n):"object"==typeof t[".sv"]?Nge(t[".sv"],e):void N(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Mge=function(t,e,n){if("timestamp"===t)return n.timestamp;N(!1,"Unexpected server value: "+t)},Nge=function(t,e,n){t.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&N(!1,"Unexpected increment value: "+r);const i=e.node();if(N(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},KA=function(t,e,n){return QA(t,new qA(e),n)};function QA(t,e,n){const r=t.getPriority().val(),i=RW(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=RW(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ol(a,Qe(i)):t}{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ol(i))),o.forEachChild(Fe,(a,u)=>{const l=QA(u,e.getImmediateChild(a),n);l!==u&&(s=s.updateImmediateChild(a,l))}),s}}class YA{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function __(t,e){let n=e instanceof Ee?e:new Ee(e),r=t,i=ae(n);for(;null!==i;){const s=pu(r.node.children,i)||{children:{},childCount:0};r=new YA(i,r,s),n=Me(n),i=ae(n)}return r}function da(t){return t.node.value}function ZA(t,e){t.node.value=e,XA(t)}function PW(t){return t.node.childCount>0}function y_(t,e){Ft(t.node.children,(n,r)=>{e(new YA(n,t,r))})}function OW(t,e,n,r){n&&!r&&e(t),y_(t,i=>{OW(i,e,!0,r)}),n&&r&&e(t)}function mh(t){return new Ee(null===t.parent?t.name:mh(t.parent)+"/"+t.name)}function XA(t){null!==t.parent&&function Pge(t,e,n){const r=function Rge(t){return void 0===da(t)&&!PW(t)}(n),i=xi(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,XA(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,XA(t))}(t.parent,t.name,t)}const Oge=/[\[\].#$\/\u0000-\u001F\u007F]/,Fge=/[\[\].#$\u0000-\u001F\u007F]/,JA=10485760,v_=function(t){return"string"==typeof t&&0!==t.length&&!Oge.test(t)},yh=function(t,e,n){const r=n instanceof Ee?new Xfe(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+oa(r));if("function"==typeof e)throw new Error(t+"contains a function "+oa(r)+" with contents = "+e.toString());if(qm(e))throw new Error(t+"contains "+e.toString()+" "+oa(r));if("string"==typeof e&&e.length>JA/3&&Bp(e)>JA)throw new Error(t+"contains a string greater than "+JA+" utf8 bytes "+oa(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Ft(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!v_(o)))throw new Error(t+" contains an invalid key ("+o+") "+oa(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Jfe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Bp(e),jG(t)})(r,o),yh(t,a,r),function epe(t){const e=t.parts_.pop();t.byteLength_-=Bp(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+oa(r)+" in addition to actual children.")}},VW=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!v_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),function(t){return"string"==typeof t&&0!==t.length&&!Fge.test(t)}(t)}(n))throw new Error(function Up(t,e){return`${t} failed: ${e} argument `}(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Bge{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tr(t,e,n){(function w_(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==n&&!pA(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)})(t,n),function BW(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?($ge(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}(t,r=>pr(r,e)||pr(e,r))}function $ge(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();ia&&Ot("event: "+n.toString()),il(r)}}}class Hge{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Bge,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=r_(),this.transactionQueueTree_=new YA,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jW(t){const n=t.infoData_.getNode(new Ee(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function wh(t){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:jW(t)})}function HW(t,e,n,r,i){t.dataUpdateCount++;const s=new Ee(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=Lp(n,l=>Qe(l));o=function Cge(t,e,n,r){const i=HA(t,r);if(i){const s=GA(i),o=s.path,a=s.queryId,u=Dn(o,e),l=Le.fromObject(n);return WA(t,o,new dl(MA(a),u,l))}return[]}(t.serverSyncTree_,s,u,i)}else{const u=Qe(n);o=function AW(t,e,n,r){const i=HA(t,r);if(null!=i){const s=GA(i),o=s.path,a=s.queryId,u=Dn(o,e);return WA(t,o,new ua(MA(a),u,n))}return[]}(t.serverSyncTree_,s,u,i)}else if(r){const u=Lp(n,l=>Qe(l));o=function wge(t,e,n){const r=Le.fromObject(n);return fl(t,new dl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,u)}else{const u=Qe(n);o=fh(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=gl(t,s)),tr(t.eventQueue_,a,o)}function GW(t,e){nx(t,"connected",e),!1===e&&function Kge(t){pl(t,"onDisconnectEvents");const e=wh(t),n=r_();SA(t.onDisconnect_,ye(),(i,s)=>{const o=function(t,e,n,r){return QA(e,new zA(n,t),r)}(i,s,t.serverSyncTree_,e);cl(n,i,o)});let r=[];SA(n,ye(),(i,s)=>{r=r.concat(fh(t.serverSyncTree_,i,s));const o=function ox(t,e){const n=mh(zW(t,e)),r=__(t.transactionQueueTree_,e);return function kge(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{ax(t,i)}),ax(t,r),OW(r,i=>{ax(t,i)}),n}(t,i);gl(t,o)}),t.onDisconnect_=r_(),tr(t.eventQueue_,ye(),r)}(t)}function nx(t,e,n){const r=new Ee("/.info/"+e),i=Qe(n);t.infoData_.updateSnapshot(r,i);const s=fh(t.infoSyncTree_,r,i);tr(t.eventQueue_,r,s)}function I_(t){return t.nextWriteId_++}function pl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ot(n,...e)}function sx(t,e,n){return g_(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function E_(t,e=t.transactionQueueTree_){if(e||C_(t,e),da(e)){const n=KW(t,e);N(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function tme(t,e,n){const r=n.map(l=>l.currentWriteId),i=sx(t,e,r);let s=i;const o=i.hash();for(let l=0;l<n.length;l++){const c=n[l];N(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=Dn(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,l=>{pl(t,"transaction put response",{path:u.toString(),status:l});let c=[];if("ok"===l){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,c=c.concat(Vs(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();C_(t,__(t.transactionQueueTree_,e)),E_(t,t.transactionQueueTree_),tr(t.eventQueue_,e,c);for(let h=0;h<d.length;h++)il(d[h])}else{if("datastale"===l)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{ln("transaction at "+u.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}gl(t,e)}},o)}(t,mh(e),n)}else PW(e)&&y_(e,n=>{E_(t,n)})}function gl(t,e){const n=zW(t,e),r=mh(n);return function nme(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],l=Dn(n,u.path);let d,c=!1;if(N(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)c=!0,d=u.abortReason,i=i.concat(Vs(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)c=!0,d="maxretry",i=i.concat(Vs(t.serverSyncTree_,u.currentWriteId,!0));else{const h=sx(t,u.path,o);u.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){yh("transaction failed: Data returned ",f,u.path);let p=Qe(f);"object"==typeof f&&null!=f&&xi(f,".priority")||(p=p.updatePriority(h.getPriority()));const _=u.currentWriteId,I=wh(t),E=KA(p,h,I);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=E,u.currentWriteId=I_(t),o.splice(o.indexOf(_),1),i=i.concat($A(t.serverSyncTree_,u.path,E,u.currentWriteId,u.applyLocally)),i=i.concat(Vs(t.serverSyncTree_,_,!0))}else c=!0,d="nodata",i=i.concat(Vs(t.serverSyncTree_,u.currentWriteId,!0))}tr(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}C_(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)il(r[a]);E_(t,t.transactionQueueTree_)}(t,KW(t,n),r),r}function zW(t,e){let n,r=t.transactionQueueTree_;for(n=ae(e);null!==n&&void 0===da(r);)r=__(r,n),n=ae(e=Me(e));return r}function KW(t,e){const n=[];return QW(t,e,n),n.sort((r,i)=>r.order-i.order),n}function QW(t,e,n){const r=da(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);y_(e,i=>{QW(t,i,n)})}function C_(t,e){const n=da(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ZA(e,n.length>0?n:void 0)}y_(e,r=>{C_(t,r)})}function ax(t,e){const n=da(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(N(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(N(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Vs(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ZA(e,void 0):n.length=s+1,tr(t.eventQueue_,mh(e),i);for(let o=0;o<r.length;o++)il(r[o])}}const ux=function(t,e){const n=sme(t),r=n.namespace;return"firebase.com"===n.domain&&ii(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&ii("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ln("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new aA(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new Ee(n.pathString)}},sme=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if("string"==typeof t){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let c=t.indexOf("/");-1===c&&(c=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(i=function rme(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(c,d)));const h=function ime(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ln(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class nr{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ue(this._path)?null:fA(this._path)}get ref(){return new Pr(this._repo,this._path)}get _queryIdentifier(){const e=rW(this._queryParams),n=iA(e);return"{}"===n?"default":n}get _queryObject(){return rW(this._queryParams)}isEqual(e){if(!((e=Yn(e))instanceof nr))return!1;const n=this._repo===e._repo,r=pA(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Yfe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class Pr extends nr{constructor(e,n){super(e,n,new CA,!1)}get parent(){const e=$G(this._path);return null===e?null:new Pr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function dge(t){N(!d_,"__referenceConstructor has already been defined"),d_=t})(Pr),function mge(t){N(!f_,"__referenceConstructor has already been defined"),f_=t}(Pr);const cx={};class bme{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Gge(t,e,n){if(t.stats_=cA(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new n_(t.repoInfo_,(r,i,s,o)=>{HW(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>GW(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$t(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new aa(t.repoInfo_,e,(r,i,s,o)=>{HW(t,r,i,s,o)},r=>{GW(t,r)},r=>{!function Wge(t,e){Ft(e,(n,r)=>{nx(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function Afe(t,e){const n=t.toString();return lA[n]||(lA[n]=e()),lA[n]}(t.repoInfo_,()=>new xpe(t.stats_,t.server_)),t.infoData_=new bpe,t.infoSyncTree_=new SW({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=fh(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),nx(t,"connected",!1),t.serverSyncTree_=new SW({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const l=o(a,u);tr(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pr(this._repo,ye())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Ime(t,e){const n=cx[e];(!n||n[t.key]!==t)&&ii(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function qW(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ii("Cannot call "+e+" on a deleted database.")}}function Dme(t=Hp(),e){return mo(t,"database").getImmediate({identifier:e})}aa.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},aa.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function Tme(t){(function ffe(t){tA=t})(_o),sn(new jt("database",(e,{instanceIdentifier:n})=>function wme(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||ii("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ot("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let u,l,o=ux(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(u=!0,s=`http://${l}?ns=${a.namespace}`,o=ux(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const c=i&&u?new th(th.OWNER):new Dfe(t.name,t.options,e);VW("Invalid Firebase Database URL",o),ue(o.path)||ii("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function Eme(t,e,n,r){let i=cx[e.name];i||(i={},cx[e.name]=i);let s=i[t.toURLString()];return s&&ii("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Hge(t,!1,n,r),i[t.toURLString()]=s,s}(a,t,c,new bfe(t.name,n));return new bme(d,t)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),Ve(rG,"0.13.6",t),Ve(rG,"0.13.6","esm2017")}();class dx{constructor(e){return e}}const rq="database",hx=new U("angularfire2.database-instances");function Nme(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new dx(r)}}const Rme={provide:class xme{constructor(){return Zp(rq)}},deps:[[new lt,hx]]},kme={provide:dx,useFactory:function Mme(t,e){const n=Yp(rq,t,e);return n&&new dx(n)},deps:[[new lt,hx],bo]};let Pme=(()=>{class t{constructor(){Ve("angularfire",Pc.full,"rtdb")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=cn({providers:[kme,Rme]}),t})();function Ome(t,...e){return{ngModule:Pme,providers:[{provide:hx,useFactory:Nme(t),multi:!0,deps:[$e,tn,Xp,Jp,[new lt,UD],[new lt,ag],...e]}]}}const Fme=cs(Dme,!0);let Lme=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t,bootstrap:[hfe]}),t.\u0275inj=cn({imports:[N9,yJ,lfe,Lre(()=>Vre(nG_firebase)),cae(()=>dae()),Ome(()=>Fme()),she(()=>uhe())]}),t})();(function X5(){CO=!1})(),M9().bootstrapModule(Lme).catch(t=>console.error(t))}},Ne=>{Ne(Ne.s=566)}]);